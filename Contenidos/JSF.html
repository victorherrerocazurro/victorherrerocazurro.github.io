<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Victor Herrero Cazurro">
<title>JSF 2.2</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>JSF 2.2</h1>
<div class="details">
<span id="author" class="author">Victor Herrero Cazurro</span><br>
<span id="email" class="email">&lt;<a href="https://github.com/victorherrerocazurro">@vherrero11</a>&gt;</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Contenidos</div>
<ul class="sectlevel1">
<li><a href="#_introduccion">1. Introduccion</a>
<ul class="sectlevel2">
<li><a href="#__porque_jsf">1.1. ¿Porque JSF?</a></li>
<li><a href="#_versiones">1.2. Versiones</a></li>
<li><a href="#_extensiones">1.3. Extensiones</a></li>
<li><a href="#_arquitectura">1.4. Arquitectura</a></li>
</ul>
</li>
<li><a href="#_configuración">2. Configuración</a>
<ul class="sectlevel2">
<li><a href="#_declaracion_de_servlet">2.1. Declaracion de Servlet</a></li>
</ul>
</li>
<li><a href="#_ciclo_de_vida">3. Ciclo de vida</a>
<ul class="sectlevel2">
<li><a href="#_restore_view">3.1. Restore View</a></li>
<li><a href="#_apply_request_values">3.2. Apply Request Values</a></li>
<li><a href="#_process_validation">3.3. Process Validation</a></li>
<li><a href="#_update_model_values">3.4. Update Model Values</a></li>
<li><a href="#_invoke_application">3.5. Invoke Application</a></li>
<li><a href="#_render_response">3.6. Render Response</a></li>
</ul>
</li>
<li><a href="#_componentes_inmediate">4. Componentes inmediate</a></li>
<li><a href="#_vistas">5. Vistas</a>
<ul class="sectlevel2">
<li><a href="#_libreria_de_etiquetas">5.1. Libreria de Etiquetas</a>
<ul class="sectlevel3">
<li><a href="#_libreria_de_etiquetas_core">5.1.1. Libreria de Etiquetas Core</a></li>
<li><a href="#_libreria_de_etiquetas_html">5.1.2. Libreria de Etiquetas Html</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_managed_bean">6. Managed Bean</a>
<ul class="sectlevel2">
<li><a href="#_ambitos">6.1. Ambitos</a></li>
<li><a href="#_carga_rapida">6.2. Carga Rapida</a></li>
<li><a href="#_managed_property">6.3. Managed Property</a></li>
<li><a href="#_ciclo_de_vida_2">6.4. Ciclo de Vida</a></li>
</ul>
</li>
<li><a href="#_contexto_jsf">7. Contexto JSF</a></li>
<li><a href="#_acciones">8. Acciones</a>
<ul class="sectlevel2">
<li><a href="#_redirect">8.1. Redirect</a></li>
<li><a href="#_get">8.2. Get</a></li>
</ul>
</li>
<li><a href="#_eventos">9. Eventos</a>
<ul class="sectlevel2">
<li><a href="#_actionevent">9.1. ActionEvent</a></li>
<li><a href="#_valuechangeevent">9.2. ValueChangeEvent</a></li>
</ul>
</li>
<li><a href="#_expresiones_el">10. Expresiones EL</a></li>
<li><a href="#_reglas_de_navegacion">11. Reglas de Navegacion</a></li>
<li><a href="#_validaciones">12. Validaciones</a>
<ul class="sectlevel2">
<li><a href="#_asociada_a_componentes">12.1. Asociada a componentes</a></li>
<li><a href="#_genericas_o_programaticas">12.2. Genericas o programaticas</a></li>
<li><a href="#_por_métodos_de_managed_beans">12.3. Por métodos de Managed Beans</a></li>
<li><a href="#_personalizados">12.4. Personalizados</a></li>
</ul>
</li>
<li><a href="#_conversores">13. Conversores</a>
<ul class="sectlevel2">
<li><a href="#_conversores_personalizados">13.1. Conversores personalizados</a></li>
</ul>
</li>
<li><a href="#_i18n">14. i18n</a></li>
<li><a href="#_javascript">15. Javascript</a></li>
<li><a href="#_ajax">16. Ajax</a>
<ul class="sectlevel2">
<li><a href="#__f_ajax">16.1. &lt;f:ajax&gt;</a></li>
</ul>
</li>
<li><a href="#_facelets">17. Facelets</a></li>
<li><a href="#_componentes_personalizados">18. Componentes Personalizados</a>
<ul class="sectlevel2">
<li><a href="#_herencia_de_strong_uicomponent_strong">18.1. Herencia de <strong>UIComponent</strong></a></li>
<li><a href="#_facelets_2">18.2. Facelets</a></li>
</ul>
</li>
<li><a href="#_faces_flow">19. Faces Flow</a>
<ul class="sectlevel2">
<li><a href="#_navegacion_entre_pasos">19.1. Navegacion entre pasos</a></li>
<li><a href="#_flujos_anidados_nested">19.2. Flujos anidados (Nested)</a></li>
</ul>
</li>
<li><a href="#_integracion_con_spring">20. Integracion con Spring</a></li>
<li><a href="#_primefaces">21. Primefaces</a></li>
<li><a href="#_renderizacion_parcial">22. Renderizacion Parcial</a></li>
<li><a href="#_procesamiento_parcial">23. Procesamiento Parcial</a></li>
<li><a href="#_partial_submit">24. Partial Submit</a></li>
<li><a href="#_selectores_primefaces">25. Selectores Primefaces</a></li>
<li><a href="#_validaciones_cliente">26. Validaciones Cliente</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduccion">1. Introduccion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JSF es un framework JEE avanzado para la capa de presentación, que implementa MVC.</p>
</div>
<div class="sect2">
<h3 id="__porque_jsf">1.1. ¿Porque JSF?</h3>
<div class="paragraph">
<p>Muy sencillo de utilizar. Se pueden crear interfaces de usuario con mucha facilidad.</p>
</div>
<div class="paragraph">
<p>Ofrece una clara separación entre la presentación y el comportamiento de una
pagina.</p>
</div>
<div class="paragraph">
<p>Facilidad para manejo de componentes, proceso de datos, validaciones y eventos.</p>
</div>
<div class="paragraph">
<p>Mecanismo de eventos robusto</p>
</div>
<div class="paragraph">
<p>Soporte de <strong>Render Kit</strong> para distintos clientes. El que se incluye en la implementación de referencia es el de HTML.</p>
</div>
<div class="paragraph">
<p>Componentes modulares fácilmente sustituibles.</p>
</div>
</div>
<div class="sect2">
<h3 id="_versiones">1.2. Versiones</h3>
<div class="paragraph">
<p>Java Specification Reference (JSR)</p>
</div>
<div class="paragraph">
<p>El grupo <strong>jcp.org</strong> es el encargado de dirigir/mantener las especificaciones de las API’s de Java</p>
</div>
<div class="paragraph">
<p>JSR-127 define y libera la especificación de JavaServer Faces 1.1 en 2004 en el que
participó Craig McClanahan que lideró Apache Tomcat y Struts entre otros.</p>
</div>
<div class="paragraph">
<p>JSR-252 define y libera la especificación JSF 1.2 en 2006 que corresponde a los Servlets
2.5/JSP 2.1</p>
</div>
<div class="paragraph">
<p>JSR-314 comienza en mayo de 2007 y planifica y libera la especificación JSF 2.0 en
2009 con soporte para Ajax.</p>
</div>
<div class="paragraph">
<p>JSR-344 define y libera la especificación JSF 2.2 en 2013, introduciendo soporte a HTML 5, Faces Flow, Stateless views y Resource library contracts.</p>
</div>
<div class="paragraph">
<p>JSR-372 define y libera la especificación JSF 2.3 en 2017, introduciendo mayor soporte de CDI, Websockets, expresiones de búsqueda de componentes, soporte básico de URLs sin extensiones y validación de Beans a nivel de clase.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Para JBoss se puede ver las versiones de JSF soportadas para cada versión de JBoss, en <a href="https://access.redhat.com/articles/112673#EAP_6">este enlace</a>, se encuentra la de EAP 6, y en <a href="https://access.redhat.com/articles/112673#EAP_7">este otro</a> la de EAP 7, que son <strong>2.1.28.Final</strong> y <strong>2.2.13.SP4</strong> respectivamente.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_extensiones">1.3. Extensiones</h3>
<div class="paragraph">
<p>Existen múltiples extensiones de JSF, que aportan un conjunto extendido de componentes visuales, como</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Oracle ADF</p>
</li>
<li>
<p>RichFaces</p>
</li>
<li>
<p>IceFaces</p>
</li>
<li>
<p>PrimeFaces</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_arquitectura">1.4. Arquitectura</h3>
<div class="paragraph">
<p>JavaServer Faces amplia el concepto de desarrollo web basado en etiquetas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_arquitectura.png" alt="jsf arquitectura">
</div>
</div>
<div class="paragraph">
<p>Se proporciona un catálogo estándar de etiquetas que puede ser extendido dando la oportunidad al desarrollador de crear sus propios componentes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_arquitectura_componentes.png" alt="jsf arquitectura componentes">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuración">2. Configuración</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JSF cubre la capa de presentacion web de los proyectos, por lo que se necesita un proyecto tipo Web (WAR) y un contenedor de servlets donde desplegar (TOMCAT, JBOSS, &#8230;&#8203;.).</p>
</div>
<div class="paragraph">
<p>El proyecto deberá tener en el classpath las librerías de la implementación a emplear de
JSF.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Si es un servidor JEE, el servidor podrá proveer dichas dependencias.</p>
</li>
<li>
<p>Sino el proyecto deberá incluirlas.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Las librerías necesarias dependerán de la implementación a emplear, existen dos implementaciones de jsf</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mojarra (Implementación de referencia de Oracle).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Para añadir la dependencia con Mojarra 2.2 empleando Maven</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>com.sun.faces<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>jsf-api<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>2.2.10<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>com.sun.faces<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>jsf-impl<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>2.2.10<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para añadir la dependencia con Mojarra 2.3 empleando Maven</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.glassfish<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>javax.faces<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>2.3.8<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="comment">&lt;!-- Soporte CDI --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>javax.enterprise<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>cdi-api<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>1.2<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.jboss.weld.servlet<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>weld-servlet<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>2.2.9.Final<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache MyFaces.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Para añadir la dependencia con MyFaces empleando Maven</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.myfaces.core<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>myfaces-api<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>2.2.7<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.myfaces.core<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>myfaces-impl<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>2.2.7<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si se desea trabajar con alguna extension de JSF, habrá que añadir tambien al classpath la libreria en cuestion</p>
</div>
<div class="listingblock">
<div class="title">Para añadir la depednecia con Primefaces empleando Maven</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.primefaces<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>primefaces<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>5.1<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_declaracion_de_servlet">2.1. Declaracion de Servlet</h3>
<div class="paragraph">
<p>El primer paso en la configuración de los componentes del proyecto es el servlet que hace de FrontController, en este caso <strong>FacesServlet</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servlet&gt;</span>
        <span class="tag">&lt;servlet-name&gt;</span>Faces Servlet<span class="tag">&lt;/servlet-name&gt;</span>
        <span class="tag">&lt;servlet-class&gt;</span>javax.faces.webapp.FacesServlet<span class="tag">&lt;/servlet-class&gt;</span>
<span class="tag">&lt;/servlet&gt;</span>
<span class="tag">&lt;servlet-mapping&gt;</span>
        <span class="tag">&lt;servlet-name&gt;</span>Faces Servlet<span class="tag">&lt;/servlet-name&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>*.xhtml<span class="tag">&lt;/url-pattern&gt;</span>
<span class="tag">&lt;/servlet-mapping&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>El siguiente el establecimineto de los parametros de configuracion, existen varios que se definen como parámetros de contexto web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;context-param&gt;</span>
        <span class="tag">&lt;param-name&gt;</span>javax.faces.PROJECT_STAGE<span class="tag">&lt;/param-name&gt;</span>
        <span class="tag">&lt;param-value&gt;</span>Development<span class="tag">&lt;/param-value&gt;</span>
<span class="tag">&lt;/context-param&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Algunos de los parámetros de configuración mas importantes son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>javax.faces.CONFIG_FILES</strong>: Listado de ficheros separados por comas, con la configuración de JSF, de no existir el por defecto será “/WEB-INF/faces-config.xml”</p>
</li>
<li>
<p><strong>javax.faces.PROJECT_STAGE</strong>: Estado en el que se encuentra el proyecto. Los posibles valores son Development, UnitTest, SystemTest o Production.</p>
</li>
<li>
<p><strong>javax.faces.STATE_SAVING_METHOD</strong>: Define donde se guarda la información del estado de la vista. Los posibles valores son:</p>
<div class="ulist">
<ul>
<li>
<p>server (por defecto), que lo almacena en HttpSession.</p>
</li>
<li>
<p>client, que lo almacena en un campo oculto de la vista.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>javax.faces.FACELETS_SKIP_COMMENTS</strong>: Permite indicar que no se rendericen los comentarios.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ciclo_de_vida">3. Ciclo de vida</h2>
<div class="sectionbody">
<div class="paragraph">
<p>El ciclo de vida de JSF se divide en una serie de fases</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Restore View</p>
</li>
<li>
<p>Apply Request Values</p>
</li>
<li>
<p>Process Validation</p>
</li>
<li>
<p>Update Model Values</p>
</li>
<li>
<p>Invoke Application</p>
</li>
<li>
<p>Render Response</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_ciclo_de_vida.png" alt="jsf ciclo de vida">
</div>
</div>
<div class="sect2">
<h3 id="_restore_view">3.1. Restore View</h3>
<div class="paragraph">
<p>Primera fase.</p>
</div>
<div class="paragraph">
<p>La Request llega al Faces Servlet.</p>
</div>
<div class="paragraph">
<p>Se busca la vista en el almacén de vistas del servidor o se recupera de la petición, y si no está se crea.</p>
</div>
<div class="paragraph">
<p>La vista se materializa en un árbol de componentes.</p>
</div>
<div class="paragraph">
<p>Si se crea el árbol por primera vez, se pasa a la ultima fase <strong>Render Response</strong>, dado que no se responde a una interaccion del usuario sobre la vista y por tanto no hay que procesar datos ni acciones.</p>
</div>
</div>
<div class="sect2">
<h3 id="_apply_request_values">3.2. Apply Request Values</h3>
<div class="paragraph">
<p>Aplica los valores de la Request, a los distintos componentes del árbol con los que están asociados, actualizando el árbol.</p>
</div>
</div>
<div class="sect2">
<h3 id="_process_validation">3.3. Process Validation</h3>
<div class="paragraph">
<p>En esta fase se aplican los <strong>Validadores</strong> y los <strong>Conversores</strong>.</p>
</div>
<div class="paragraph">
<p>Si se produce un error de validación, se incluye un mensaje en el <strong>FacesContext</strong>, marcándose el componente como invalido y se salta a la fase <strong>Render Response</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_update_model_values">3.4. Update Model Values</h3>
<div class="paragraph">
<p>Se crean/actualizan (<strong>binding</strong>) los <strong>Managed Beans</strong> con los valores de los componentes del árbol a los cuales están asociados, esta operación, se realiza interpretando las expresiones EL.</p>
</div>
</div>
<div class="sect2">
<h3 id="_invoke_application">3.5. Invoke Application</h3>
<div class="paragraph">
<p>Se ejecuta el método del <strong>Managed Bean</strong> asociado al evento invocado.</p>
</div>
<div class="paragraph">
<p>El controlador jsf (<strong>Managed Bean</strong>) permite la ejecución de la lógica de negocio de la aplicación, ya que están garantizadas las <strong>Validaciones</strong> y <strong>Conversiones</strong>.</p>
</div>
<div class="paragraph">
<p>Se decide el identificador de la vista a mostrar.</p>
</div>
</div>
<div class="sect2">
<h3 id="_render_response">3.6. Render Response</h3>
<div class="paragraph">
<p>Según el identificador de la vista y el <strong>Navigation Handler</strong> definido, se selecciona la vista a renderizar y se renderiza.</p>
</div>
<div class="paragraph">
<p>Se actualiza el árbol de la vista residente en memoria.</p>
</div>
<div class="paragraph">
<p>Muestra la vista en el estado actual.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_componentes_inmediate">4. Componentes inmediate</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Se pueden realizar las peticiones al servidor mediante acciones <strong>inmediate</strong>, esto es, aplicando a los componentes UICommand, el atributo inmediate.</p>
</div>
<div class="paragraph">
<p>Con este atributo, se consigue saltar directamente a la fase de <strong>Render Response</strong> sin aplicar validaciones, conversiones o logica de control.</p>
</div>
<div class="paragraph">
<p>Es util para casos como <strong>cancelar</strong>, para el cual no se precisa que se procesen los datos del formulario.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_ciclo_de_vida_inmediate.png" alt="jsf ciclo de vida inmediate">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vistas">5. Vistas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Las vistas en JSF, se pueden componer en <strong>jsp</strong> o en <strong>xhtml</strong>.</p>
</div>
<div class="paragraph">
<p>Se recomienda el empleo de <strong>xhtml</strong>, dado que <strong>jsp</strong> conlleva una compilación a servlet, el cual no se emplea y ocupa espacio en memoria.</p>
</div>
<div class="paragraph">
<p>Las vistas tienen distintas propiedades, entre las que se encuentran:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Value</strong>: Describe el valor del componente, bien con un literal o con una expresión EL que haga referencia a un atributo de un Managed Bean.</p>
</li>
<li>
<p><strong>Binding</strong>: Expresión EL, que asocia el componente del xhtml, con un atributo de clase de un ManagedBean, que será de un tipo View.</p>
</li>
<li>
<p><strong>Rendered</strong>: Permite definir con una expresión EL, cuando se ha de pintar el componente.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_libreria_de_etiquetas">5.1. Libreria de Etiquetas</h3>
<div class="paragraph">
<p>Las páginas JSF se construyen con librerías de etiquetas y con el lenguaje de expresiones EL (ej: #{miBean.miPropiedad})</p>
</div>
<div class="paragraph">
<p>Las librerías de etiquetas con sus atributos permiten personalizar el aspecto y el comportamiento de cada componente.</p>
</div>
<div class="paragraph">
<p>Las librerías de etiquetas estándar son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>core tags libraries</strong>: definen vistas, listeners, converters, validators, etc.</p>
</li>
<li>
<p><strong>html tags libraries</strong>: definen componentes de entrada, de salida, de acción, de selección, de agrupación.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_libreria_de_etiquetas_core">5.1.1. Libreria de Etiquetas Core</h4>
<div class="paragraph">
<p>Algunas de las etiquetas de <strong>Core</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Vistas</strong></p>
<div class="ulist">
<ul>
<li>
<p>&lt;f:view/&gt;: Crea una vista principal.</p>
</li>
<li>
<p>&lt;f:subview/&gt;: Crea una vista secundaria.</p>
</li>
<li>
<p>&lt;f:facet/&gt;: Añade un facet a un componente.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Listener</strong></p>
<div class="ulist">
<ul>
<li>
<p>&lt;f:actionListener/&gt;: Añade un ActionListener a un componente.</p>
</li>
<li>
<p>&lt;f:valueChangeListener/&gt;: Añade un ValueChangeListener a un componente.</p>
</li>
<li>
<p>&lt;f:setPropertyChangeListener/&gt;: Añade un ActionListener a un componente que establece una propiedad de un bean a un valor dado.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Converters</strong></p>
<div class="ulist">
<ul>
<li>
<p>&lt;f:converter/&gt;: Añade un Converter a un componente.</p>
</li>
<li>
<p>&lt;f:convertDateTime/&gt;: Añade un DateTimeConverter a un componente.</p>
</li>
<li>
<p>&lt;f:convertNumber/&gt;: Añade un NumberConverter a un componente.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Validators</strong></p>
<div class="ulist">
<ul>
<li>
<p>&lt;f:validator/&gt;: Añade un Validator a un componente.</p>
</li>
<li>
<p>&lt;f:validateDoubleRange/&gt;: Valida que el valor de un componente esté dentro de un rango de valores de tipo double.</p>
</li>
<li>
<p>&lt;f:validateLength/&gt;: Valida la longitud del texto de un componente.</p>
</li>
<li>
<p>&lt;f:validateLongRange/&gt;: Valida que el valor de un componente esté dentro de un rango de valores de tipo long.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Otros</strong></p>
<div class="ulist">
<ul>
<li>
<p>&lt;f:attribute/&gt;: Añade un atributo (clave/valor) a un componente.</p>
</li>
<li>
<p>&lt;f:param/&gt;: Añade un parámetro a un componente.</p>
</li>
<li>
<p>&lt;f:loadBundle/&gt;: Carga un ResourceBundle y guarda las propiedades como un Map.</p>
</li>
<li>
<p>&lt;f:selectitems/&gt;: Specifica los items de un select.</p>
</li>
<li>
<p>&lt;f:selectitem/&gt;: Specifica un item de un select.</p>
</li>
<li>
<p>&lt;f:verbatim/&gt;: Añade etiquetas HTML dentro de una página JSF.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_libreria_de_etiquetas_html">5.1.2. Libreria de Etiquetas Html</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managed_bean">6. Managed Bean</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Se trata de objetos manejados por el contexto de JSF, esto es, objetos de los cuales el desarrollador no es responsable.</p>
</div>
<div class="paragraph">
<p>Cuando se referencia un Managed Bean, el contexto de JSF creará el objeto, lo inicializará y lo almacenará en el ámbito definido, o lo retornará si ya existe.</p>
</div>
<div class="paragraph">
<p>Es necesario, que los Managed Bean, tengan:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Constructor por defecto.</p>
</li>
<li>
<p>Métodos de Get para permitir el renderizado de las propiedades en las <strong>View</strong>.</p>
</li>
<li>
<p>Métodos de Set para que los usuarios de la aplicación envien información al back.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para que un objeto sea un Managed Bean, hay que declararlo como tal, esto se puede hacer con
* Anotaciones JSF</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ManagedBean</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@SessionScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserBean</span> {...}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Anotaciones CDI</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Named</span>
<span class="annotation">@SessionScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserBean</span> {...}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Declarativo en el faces-config.xml</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>userBean<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>com.examples.UserBean<span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>session<span class="tag">&lt;/managed-bean-scope&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La declaración por anotaciones no es posible emplearla, cuando se definen Managed Beans, de los cuales no se tiene el código fuente, para ello solo se puede emplear la declarativa, es el caso de Los Map, List, Set, etc.</p>
</div>
<div class="listingblock">
<div class="title">Ejemplo de declaracion de un <strong>ArrayList&lt;SelectItem&gt;</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>newsletters<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>java.util.ArrayList<span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>application<span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;list-entries&gt;</span>
        <span class="tag">&lt;value-class&gt;</span>javax.faces.model.SelectItem<span class="tag">&lt;/value-class&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{newsletter0}<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{newsletter1}<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{newsletter2}<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{newsletter3}<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/list-entries&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de declaracion de un <strong>HashMap&lt;String,BigDecimal&gt;</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>newsletters<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>java.util.Map<span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>application<span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;map-entries&gt;</span>
        <span class="tag">&lt;key-class&gt;</span>java.lang.String<span class="tag">&lt;/key-class&gt;</span>
        <span class="tag">&lt;value-class&gt;</span>java.math.BigDecimal<span class="tag">&lt;/value-class&gt;</span>
        <span class="tag">&lt;map-entry&gt;</span>
            <span class="tag">&lt;key&gt;</span>clave1<span class="tag">&lt;/key&gt;</span>
            <span class="tag">&lt;value&gt;</span>30.75<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;/map-entry&gt;</span>
        <span class="tag">&lt;map-entry&gt;</span>
            <span class="tag">&lt;key&gt;</span>clave2<span class="tag">&lt;/key&gt;</span>
            <span class="tag">&lt;value&gt;</span>40.75<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;/map-entry&gt;</span>
    <span class="tag">&lt;/map-entries&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_ambitos">6.1. Ambitos</h3>
<div class="paragraph">
<p>Tradicionalmente, se pueden almacenar en tres ámbitos (JSF 1.x)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>application</strong>: Se guarda la información durante toda la vida de la aplicación web, independientemente de todas las peticiones y sesiones que se realicen. Los bean se instancian con la primera petición a la aplicación y desaparece cuando la aplicación web se elimina del servidor.</p>
</li>
<li>
<p><strong>session</strong>: En este ámbito, los bean se guardan desde que el usuario comienza una sesión hasta que ésta termina (porque el tiempo expiró o se invocó al método invalidate sobre un objeto HttpSession).</p>
</li>
<li>
<p><strong>request</strong>: Comienza cuando se envía una petición al servidor y termina cuando se devuelve la respuesta al usuario. Los mensajes de estado y de error que se muestran al usuario son buenos candidatos a ser request, ya que se muestran una vez que el servidor devuelve la respuesta.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>En JSF 2.0, se amplían a</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>view</strong>: Los bean duran desde que se muestra una página JSF al usuario hasta que el usuario navega hacia otra página. Es muy útil para páginas que usan AJAX.</p>
</li>
<li>
<p><strong>none</strong>: Los beans se instancian cuando son necesitados por otros beans, y se eliminan cuando esta necesidad desaparece.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_carga_rapida">6.2. Carga Rapida</h3>
<div class="paragraph">
<p>Se puede indicar que los <strong>Managed Bean</strong> se creen al arrancar la aplicación, en lugar de la primera vez que son necesarios</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Programatica</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ManagedBean</span>(eager=<span class="predefined-constant">true</span>)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Declarativa</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean</span> <span class="attribute-name">eager</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managed_property">6.3. Managed Property</h3>
<div class="paragraph">
<p>Los <strong>Managed Bean</strong> pueden tener propiedades manejadas, es decir, propiedades que gestiona el contexto.</p>
</div>
<div class="paragraph">
<p>Como para la declaración de los Managed Bean, para declaración de <strong>Managed Property</strong>, se pueden emplear</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Anotaciones</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ManagedBean</span>
<span class="annotation">@SessionScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserBean</span> {
    <span class="annotation">@ManagedProperty</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">Ana</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@ManagedProperty</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{amigo}</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> UserBean amigo;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>faces-config.xml</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>userBean<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>com.examples.UserBean<span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>session<span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>name<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>Ana<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>amigo<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{amigo}<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Los Bean a los que referencia deben de ser de un Ambito igual de longevo o mas, desde <strong>Session</strong> no se puede referenciar a <strong>Request</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ciclo_de_vida_2">6.4. Ciclo de Vida</h3>
<div class="paragraph">
<p>Cuando a un método le asocias la anotación <strong>@PostConstruct</strong> se ejecutará después de la inicialización del bean pero antes de que sea guardado en su <strong>scope</strong> correspondiente.</p>
</div>
<div class="paragraph">
<p>Si al método le asocias la anotación <strong>@PreDestroy</strong> se ejecutará justo antes de que el bean sea eliminado del <strong>scope</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contexto_jsf">7. Contexto JSF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>El contexto se encarga de crear e inicializar los bean para los distintos ámbitos.</p>
</div>
<div class="paragraph">
<p>Se puede acceder de forma programática al contexto de JSF empleando.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext.getCurrentInstante();</code></pre>
</div>
</div>
<div class="paragraph">
<p>No se encarga de la destrucción de los objetos, aunque si puede eliminar un ámbito.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext.getCurrentInstante().getExternaContext().getSessionMap().remove();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se puede acceder a la <strong>HttpRequest</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext.getCurrentInstance().getExternalContext().getRequest();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y a la <strong>HttpSession</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext.getCurrentInstance().getExternalContext().getSession(<span class="predefined-constant">true</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y los parámetros de la HttpRequest</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y los atributos de la HttpSession.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext.getCurrentInstance().getExternalContext().getSessionMap();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y los atributos de la HttpRequest.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext.getCurrentInstance().getExternalContext().getRequestMap();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acciones">8. Acciones</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Corresponde a la invocación de un método de un <strong>Managed Bean</strong> o a la invocación de una pagina JSF, por realizar el usuario una interacción con una pagina. Se emplea el atributo action de las etiquetas <strong>CommandButton</strong> o <strong>CommandLink</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Invocacion de un método</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Entrar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{login.submit}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Invocacion de una pagina</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Entrar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">login</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>El método ha de retornar <strong>void</strong> o un <strong>String</strong>, en el caso de <strong>String</strong> este será interpretado como la pagina JSF que se empleará como vista de salida y en el caso de <strong>void</strong> la pagina a retornar será la de origen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> submit() {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">login</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_redirect">8.1. Redirect</h3>
<div class="paragraph">
<p>Por defecto, JSF hace <strong>POST</strong> y <strong>forward</strong>.</p>
</div>
<div class="paragraph">
<p>Al hacer <strong>forward</strong> tenemos como ventaja que al cambiar de página no se pierde el objeto <strong>request</strong>, pero como desventaja no se actualiza la URL del navegador (eso es a veces confuso para los usuarios, y malo para los bookmarks y el SEO)</p>
</div>
<div class="paragraph">
<p>Podemos obligar a que JSF haga un <strong>redirect</strong>, aunque esto implique perder el objeto <strong>request</strong> y por ende si se quiere intercambiar información entre <strong>Managed Beans</strong> estos han de tener <strong>SessionScope</strong> como ambito.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">label</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Login</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span><span class="error">&quot;</span><span class="attribute-name">login</span><span class="error">?</span><span class="attribute-name">faces-redirect</span>=<span class="attribute-value">true</span><span class="error">&quot;</span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A partir de JSF 2.0 se puede emplear el objeto <strong>flash</strong>, con un ámbito inferior a
<strong>Session</strong> y superior a <strong>Request</strong>, que se mantiene aunque se realicen redirecciones.</p>
</div>
<div class="paragraph">
<p>Su uso en las vistas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">nombre</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{flash.usuario.nombre}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Y en los <strong>Managed Bean</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ELFlash.getFlash();

<span class="comment">//o</span>

FacesContext.getCurrentInstance().getExternalContext().getFlash()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_get">8.2. Get</h3>
<div class="paragraph">
<p>Para hacer GET, se han de emplear <strong>button</strong> y <strong>link</strong> en vez de <strong>commandButton</strong> y <strong>commandLink</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:link</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Aceptar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">outcome</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">login?myname=Ana</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Para recoger los parámetros de la request, en las vistas, habrá que hacer</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:metadata&gt;</span>
    <span class="tag">&lt;f:viewParam</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userBean.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/f:metadata&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Donde <strong>myname</strong>, es parámetro de request, que se asigna al atributo <strong>name</strong> del <strong>Managed Bean userBean</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_eventos">9. Eventos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Existen dos eventos que se pueden manejar en JSF</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ActionEvent</strong> que se procesan con <strong>ActionListener</strong></p>
</li>
<li>
<p><strong>ValueChangeEvent</strong> que se procesan con <strong>ValueChangeListener</strong></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_actionevent">9.1. ActionEvent</h3>
<div class="paragraph">
<p>Los <strong>ActionListener</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Se ejecutan antes que los Action.</p>
</li>
<li>
<p>Provocan navegación hacia la misma página siguiendo el flujo normal de las vista, por lo que se ven afectadas por <strong>Conversores</strong> y <strong>Validadores</strong>, si se establece <strong>immediate=true</strong> se consigue evitar <strong>Conversores</strong> y <strong>Validadores</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>El evento puede ser procesado por:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Una clase que implemente <strong>ActionListener</strong>, a la cual se referencia desde el componente con el atributo <strong>actionListener</strong> o con la etiqueta <strong>ActionListener</strong>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MiActionListener</span> <span class="directive">implements</span> <span class="predefined-type">ActionListener</span>{
        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="type">void</span> processAction(<span class="predefined-type">ActionEvent</span> event) <span class="directive">throws</span> AbortProcessingException {
                <span class="comment">// TODO Auto-generated method stub</span>
        }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Un método de un <strong>Managed Bean</strong> que reciba como parámetro <strong>ActionEvent</strong> y no retorne nada.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> procesar(<span class="predefined-type">ActionEvent</span> e){
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_valuechangeevent">9.2. ValueChangeEvent</h3>
<div class="paragraph">
<p>Evento que se ejecuta cuando se envia el formulario, que controla que se haya producido un cambio en el valor de un campo.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Realizar el cambio no provoca la petición.</p>
</div>
<div class="paragraph">
<p>Se puede forzar con javascript.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">onchange=<span class="string"><span class="delimiter">&quot;</span><span class="content">this.form.submit()</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Estos eventos son lanzados por:
* comboboxes,
* checkboxes.
* radiobuttons.
* textfields.
* selectonemenu.
* selectbooleanmenu.
* selectoneradio.
* inputtext.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectOneMenu</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{controladorPersona.persona.ciudad}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">onchange</span>=<span class="string"><span class="delimiter">&quot;</span>submit()<span class="delimiter">&quot;</span></span> <span class="attribute-name">valueChangeListener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{controladorPersona.cambioCiudad}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:selectItems</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{controladorPersona.ciudades}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:selectOneMenu&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>En el Managed Bean, se ha de definir un método que recibirá un objeto <strong>ValueChangeEvent</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> cambioCiudad(ValueChangeEvent e){
    persona.setCiudad(e.getNewValue().toString());
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_expresiones_el">10. Expresiones EL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Creado originalmente como parte del jstl (java standard tag library 1.0)</p>
</div>
<div class="paragraph">
<p>Se traslada a JSF, empleando el operador <strong>#</strong>, en lugar del operador <strong>$</strong>.</p>
</div>
<div class="paragraph">
<p>Son bidireccionales (lectura y escritura) leen o actualizan valores.</p>
</div>
<div class="paragraph">
<p>Pueden referenciar métodos.</p>
</div>
<div class="paragraph">
<p>Se definen una serie de objetos implícitos en el ámbito de las
expresiones EL, estos son</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>#{application}</strong>: el ServletContext.</p>
</li>
<li>
<p><strong>#{facesContext}</strong>: el FacesContext actual.</p>
</li>
<li>
<p><strong>#{session}</strong>: el HttpSession actual.</p>
</li>
<li>
<p><strong>#{request}</strong>: el HttpServletRequest actual.</p>
</li>
<li>
<p><strong>#{view}</strong>: el UIViewRoot actual.</p>
</li>
<li>
<p><strong>#{component}</strong>: el UIComponent actual.</p>
</li>
<li>
<p><strong>#{applicationScope}</strong>: un map con los atributos del scope aplication actual.</p>
</li>
<li>
<p><strong>#{sessionScope}</strong>: un map con los atributos de la session actual.</p>
</li>
<li>
<p><strong>#{requestScope}</strong>: un map con los atributos de la request actual.</p>
</li>
<li>
<p><strong>#{viewScope}</strong>: un map con los atributos de la view actual.</p>
</li>
<li>
<p><strong>#{initParam}</strong>: un map con los parámetros del context actual.</p>
</li>
<li>
<p><strong>#{param}</strong>: un map con los parámetros de la request actual.</p>
</li>
<li>
<p><strong>#{paramValues}</strong>: un map con los valores de los parámetros de la request actual.</p>
</li>
<li>
<p><strong>#{header}</strong>: un map con la cabecera de la request actual.</p>
</li>
<li>
<p><strong>#{headerValues}</strong>: un map con los valores de la cabecera de la request actual.</p>
</li>
<li>
<p><strong>#{cookie}</strong>: un map con los atributos de la cookie.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_ejemplos_expresiones_EL.png" alt="jsf ejemplos expresiones EL">
</div>
</div>
<div class="paragraph">
<p>Cuando se referencia aun objeto no implícito con expresiones EL, este se busca siguiendo el orden</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request</p>
</li>
<li>
<p>View</p>
</li>
<li>
<p>Session</p>
</li>
<li>
<p>Application</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para acceder a las propiedades y a los métodos de los beans, se emplea el operador <strong>.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userBean.profile}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Podemos utilizar operadores aritméticos, lógicos o comprobar si el valor es empty.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userBean.profile=='VIP'}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Bono regalo de #{bono.base-10} Euros</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_operadores_expresiones_EL.png" alt="jsf operadores expresiones EL">
</div>
</div>
<div class="paragraph">
<p>Desde JSF 2.0, podemos invocar a métodos con parámetros, siempre que no estén sobrecargados.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Aceptar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userBean.addText('texto')}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se puede acceder a un <strong>Managed Bean</strong> desde el código empleando <strong>Expresiones EL</strong> y el contexto.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext ctx = FacesContext.getCurrentInstance();
Application app = ctx.getApplication( );
ELContext ec = ctx.getELContext( );
ExpressionFactory ef = app.getExpressionFactory( );

<span class="predefined-type">String</span> name = (<span class="predefined-type">String</span>) app.evaluateValueExpressionGet(ctx,<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userBean.name}</span><span class="delimiter">&quot;</span></span>,<span class="predefined-type">String</span>.class);

ValueExpression ve = ef.createValueExpression(ec,<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userBean.name}</span><span class="delimiter">&quot;</span></span>,<span class="predefined-type">String</span>.class);
name = (<span class="predefined-type">String</span>) ve.getValue(ec);
ve.setValue(ec, <span class="string"><span class="delimiter">&quot;</span><span class="content">Serena</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reglas_de_navegacion">11. Reglas de Navegacion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Existe un componente que se encarga de resolver la vista a mostrar tras una petición, este componente se llama <strong>NavigationHandler</strong>.</p>
</div>
<div class="paragraph">
<p>Por defecto el <strong>NavigationHandler</strong> resolverá el <strong>String</strong> definido en el atributo <strong>action</strong> de los componentes o el retornado por un método de <strong>Acción</strong> de un <strong>Managed Bean</strong> referenciado por el atributo <strong>action</strong> de los componentes como una url a partir de <strong>src/main/webapp</strong>, añadiendo la extensión <strong>xhtml</strong>.</p>
</div>
<div class="paragraph">
<p>De retornar el método de <strong>Accion</strong> <strong>null</strong> o <strong>void</strong>, se interpreta que se ha de renderizar la misma vista de la que se viene.</p>
</div>
<div class="paragraph">
<p>También, se pueden definir reglas de navegación mas granulares en el fichero <strong>faces-config.xml</strong>, para ello se tienen las etiquetas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>navigation-rule</strong>: Define un conjunto de navegaciones desde una vista hacia otras.</p>
</li>
<li>
<p><strong>navigation-case</strong>: Define una navegacion hacia otra vista.</p>
</li>
<li>
<p><strong>from-view-id</strong>: Vista de la que se parte, la que origina la <strong>request</strong></p>
</li>
<li>
<p><strong>from-outcome</strong>: <strong>String</strong> que retorna el método de <strong>Accion</strong>, se puede considerar la clave de la navegacion.</p>
</li>
<li>
<p><strong>to-view-id</strong>: Path de la vista a la que se navega.</p>
</li>
<li>
<p><strong>from-action</strong>: Método de un <strong>Managed Bean</strong> que ha retornado el String que se está resolviendo.</p>
</li>
<li>
<p><strong>if</strong>: Permite definir una condicion booleana para aplicar la regla.</p>
</li>
<li>
<p><strong>redirect</strong>: permite indicar que se ha de realizar una redireccion en lugar de <strong>forward</strong>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;navigation-rule&gt;</span>
    <span class="tag">&lt;from-view-id&gt;</span>/index.xhtml<span class="tag">&lt;/from-view-id&gt;</span>
    <span class="tag">&lt;navigation-case&gt;</span>
        <span class="tag">&lt;from-outcome&gt;</span>login<span class="tag">&lt;/from-outcome&gt;</span>
        <span class="tag">&lt;if&gt;</span>#{indexController.profile != 1}<span class="tag">&lt;/if&gt;</span>
        <span class="tag">&lt;to-view-id&gt;</span>/login.xhtml<span class="tag">&lt;/to-view-id&gt;</span>
    <span class="tag">&lt;/navigation-case&gt;</span>
    <span class="tag">&lt;navigation-case&gt;</span>
        <span class="tag">&lt;from-action&gt;</span>#{indexController.processRegister}<span class="tag">&lt;/from-action&gt;</span>
        <span class="tag">&lt;from-outcome&gt;</span>register<span class="tag">&lt;/from-outcome&gt;</span>
        <span class="tag">&lt;to-view-id&gt;</span>/register.xhtml<span class="tag">&lt;/to-view-id&gt;</span>
    <span class="tag">&lt;/navigation-case&gt;</span>
<span class="tag">&lt;/navigation-rule&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>En la anterior regla de navegación podemos ver que desde la página <strong>index.xhtml</strong> podemos ir a <strong>login.xhtml</strong> o a <strong>register.xhtml</strong> dependiendo si el método de accion devuelve <strong>login</strong> o <strong>register</strong> respectivamente, indicando que para ir a login, el atributo <strong>profile</strong> del <strong>Managed Bean</strong> debe ser distinto de <strong>1</strong> y para ir a <strong>register.xhtml</strong> se deberá de venir desde el método <strong>processRegister</strong> de <strong>IndexController</strong>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validaciones">12. Validaciones</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permiten comprobar que el dato introducido por el usuario cumple con unas condiciones.</p>
</div>
<div class="paragraph">
<p>Se distinguen cuatro tipos de validaciones</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Asociada a los componentes.</p>
</li>
<li>
<p>Genéricos o programática.</p>
</li>
<li>
<p>Por métodos de Managed Beans.</p>
</li>
<li>
<p>Personalizados.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para mostrar el resultado de la validación, se emplea la etiqueta <strong>&lt;h:message&gt;</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Se pueden mostrar todos los errores</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:messages</span> <span class="attribute-name">globalOnly</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">error</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>O lo de un componente particular</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccexpiry</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.apellido}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">validator</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.validateCCExpiry}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;h:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccexpiry</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">errorClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">error</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Aunque son Bean Manejados por el FacesContext, su durabilidad es durante la fase de Validacion, luego se pierde la referencia, por lo que no pueden ser inyectados en <strong>Managed Bean</strong></p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_asociada_a_componentes">12.1. Asociada a componentes</h3>
<div class="paragraph">
<p>Se puede validar que se introduce un valor en el campo, con el atributo <strong>required</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bidBean2.bidAmount}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">You must enter an amount</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">converterMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Amount must be a number</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">amount</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se incluyen tres componentes validadores:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>validateDoubleRange</strong>: Se valida que una entrada numérica está dentro de un rango determinado. Es aplicables a los valores que se pueden convertir a un doble.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bidBean2.bidAmount}</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">converterMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Amount must be a number</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">validatorMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Amount must be 0.10 or greater</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">amount</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validateDoubleRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0.10</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>validateLength</strong>: Se valida que la longitud de la cadena de entrada está dentro de un rango determinado.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bidBean2.userID}</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">validatorMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ID must be 5 or 6 chars</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validateLength</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maximum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">6</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>validateLongRange</strong>: Se valida que una entrada numérica está dentro de un rango determinado. Es aplicables a los valores que se pueden convertir a un long.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{item.quantity}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se pueden añadir los mensajes a mostrar en caso de no cumplir la validación</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{item.quantity}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">validatorMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Minimo uno!</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_genericas_o_programaticas">12.2. Genericas o programaticas</h3>
<div class="paragraph">
<p>Son aquellas que no se ciñen a un campo en concreto, y que se pasan en los métodos de accion de los <strong>Managed Bean</strong> antes de invocar la lógica.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Para ello, se añade al <strong>FacesContext</strong> un <strong>FacesMessage</strong>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext ctxt = FacesContext.getCurrentInstance();
FacesMessage mess = <span class="keyword">new</span> FacesMessage();
mess.setSeverity(FacesMessage.SEVERITY_ERROR);
mess.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Este es el mensaje de error principal</span><span class="delimiter">&quot;</span></span>);
mess.setDetail(<span class="string"><span class="delimiter">&quot;</span><span class="content">Este es el detalle</span><span class="delimiter">&quot;</span></span>);
ctxt.addMessage(<span class="predefined-constant">null</span>, mess);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si se aplican varias validaciones en un mismo método, se debe comprobar si se ha añadido algún mensaje de validación para no realizar la navegación, para ello</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">if</span> (context.getMessageList().size() &gt; <span class="integer">0</span>) {
    <span class="keyword">return</span> <span class="predefined-constant">null</span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_por_métodos_de_managed_beans">12.3. Por métodos de Managed Beans</h3>
<div class="paragraph">
<p>Se puede definir en un <strong>Managed Bean</strong> un método con la firma</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> &lt;nombreMetodo&gt;(FacesContext context,
        UIComponent componentToValidate, <span class="predefined-type">Object</span> value) <span class="directive">throws</span> ValidatorException {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Que se encarge de realizar una validacion sobre un componente y su valor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> validateBidAmount(FacesContext context,
        UIComponent componentToValidate, <span class="predefined-type">Object</span> value) <span class="directive">throws</span> ValidatorException {
    <span class="type">double</span> bidAmount = (<span class="predefined-type">Double</span>)value;
    <span class="type">double</span> previousHighestBid = currentHighestBid();
    <span class="keyword">if</span> (bidAmount &lt;= previousHighestBid) {
        FacesMessage message = <span class="keyword">new</span> FacesMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">Bid must be higher than current </span><span class="delimiter">&quot;</span></span> + <span class="string"><span class="delimiter">&quot;</span><span class="content">highest bid ($</span><span class="delimiter">&quot;</span></span> + previousHighestBid + <span class="string"><span class="delimiter">&quot;</span><span class="content">).</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">throw</span> <span class="keyword">new</span> ValidatorException(message);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>De producirse problemas de validacion se debera lanzar una excepcion <strong>ValidatorException</strong> con un <strong>FacesMessage</strong> asociado</p>
</div>
<div class="paragraph">
<p>Para referenciar al método, se emplean expresion EL como con las acciones</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:inputText value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bidBean2.bidAmount}</span><span class="delimiter">&quot;</span></span>
    required=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
    requiredMessage=<span class="string"><span class="delimiter">&quot;</span><span class="content">You must enter an amount</span><span class="delimiter">&quot;</span></span>
    converterMessage=<span class="string"><span class="delimiter">&quot;</span><span class="content">Amount must be a number</span><span class="delimiter">&quot;</span></span>
    validator=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bidBean2.validateBidAmount}</span><span class="delimiter">&quot;</span></span>
    id=<span class="string"><span class="delimiter">&quot;</span><span class="content">amount</span><span class="delimiter">&quot;</span></span>/&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_personalizados">12.4. Personalizados</h3>
<div class="paragraph">
<p>Se ha de crear una implementación de la interface <strong>javax.faces.validator.Validator</strong>, donde se ha de implementar el método <strong>Validate</strong>, que implementará la lógica de validación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">NifValidator</span> <span class="directive">implements</span> <span class="predefined-type">Validator</span> {
        <span class="directive">public</span> <span class="type">void</span> validate(FacesContext context, UIComponent component, <span class="predefined-type">Object</span> value) <span class="directive">throws</span> ValidatorException {
                <span class="predefined-type">String</span> valor = StringUtils.defaultString((<span class="predefined-type">String</span>) value);
                valor = valor.toUpperCase();
                <span class="predefined-type">Pattern</span> mask = <span class="predefined-type">Pattern</span>.compile(<span class="string"><span class="delimiter">&quot;</span><span class="content">[0-9]{8,8}[A-Z]</span><span class="delimiter">&quot;</span></span>);
                <span class="predefined-type">Matcher</span> matcher = mask.matcher(valor);
                <span class="keyword">if</span> (!matcher.matches())
                        <span class="keyword">throw</span> <span class="keyword">new</span> ValidatorException(
                <span class="keyword">new</span> FacesMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">El componente </span><span class="delimiter">&quot;</span></span> + component.getId()
                                + <span class="string"><span class="delimiter">&quot;</span><span class="content"> no contiene un NIF valido. Las 8 primeras posiciones deben ser numericas</span><span class="delimiter">&quot;</span></span>));
                <span class="predefined-type">String</span> dni = valor.substring(<span class="integer">0</span>, <span class="integer">8</span>);
                <span class="predefined-type">String</span> digitoControl = valor.substring(<span class="integer">8</span>, <span class="integer">9</span>);
                <span class="predefined-type">String</span> letras = <span class="string"><span class="delimiter">&quot;</span><span class="content">TRWAGMYFPDXBNJZSQVHLCKE</span><span class="delimiter">&quot;</span></span>;
                <span class="type">int</span> posicion_modulo = <span class="predefined-type">Integer</span>.parseInt(dni) % <span class="integer">23</span>;
                <span class="predefined-type">String</span> digitoControlCalculado = letras.substring(posicion_modulo,posicion_modulo + <span class="integer">1</span>);
                <span class="keyword">if</span> (!digitoControl.equalsIgnoreCase(digitoControlCalculado))
                        <span class="keyword">throw</span> <span class="keyword">new</span> ValidatorException(
                <span class="keyword">new</span> FacesMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">El componente </span><span class="delimiter">&quot;</span></span>        + component.getId() + <span class="string"><span class="delimiter">&quot;</span><span class="content"> no contiene un NIF valido</span><span class="delimiter">&quot;</span></span>));
        }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En caso de error se ha de lanzar un <strong>ValidatorException</strong>, con un <strong>FacesMessage</strong> asociado.</p>
</div>
<div class="paragraph">
<p>Se ha de declarar la clase como validador, para ello se puede hacer con</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Anotaciones</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesValidator</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">nifValidator</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">NifValidator</span> <span class="directive">implements</span> <span class="predefined-type">Validator</span> {}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Declarativa en el faces-config.xml</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;validator&gt;</span>
    <span class="tag">&lt;validator-id&gt;</span>nifValidator<span class="tag">&lt;/validator-id&gt;</span>
    <span class="tag">&lt;validator-class&gt;</span>com.ejemplo.NifValidator<span class="tag">&lt;/validator-class&gt;</span>
<span class="tag">&lt;/validator&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conversores">13. Conversores</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Un conversor se utiliza para obligar a que la entrada de un dato, se realice en un formato predefinido, de no cumplirse dicha premisa, se lanzará un error de conversión.</p>
</div>
<div class="paragraph">
<p>Convierten el String que introduce el usuario en un objeto java, y viceversa.</p>
</div>
<div class="paragraph">
<p>Existen dos conversores predefinidos</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ConvertDateTime</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{myBean.date}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dateStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">medium</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.fecnac}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dateStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">short</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.fecnac}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">timeStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">timeZone</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GMT+2</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.fecnac}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">both</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dateStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">locale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fr</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.fecnac}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">both</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dateStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">short</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.fecnac}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dd.MM.yyyy</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.fecnac}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dateStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">short</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span>
<span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.fecnac}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dd.MM.yyyy</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_conversores_convertdatetime.png" alt="jsf conversores convertdatetime">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ConvertNumber</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{myBean.date}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxIntegerDigits</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:</span> outputText<span class="error">&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.testInt}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">maxIntegerDigits</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.testInt}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">currencySymbol</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.testInt}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">percent</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.salario}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">maxFractionDigits</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.salario}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">###0.00%</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span>
<span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.testInt}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">integerOnly</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span>
<span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.salario}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">000,000.000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_conversores_convertnumber.png" alt="jsf conversores convertnumber">
</div>
</div>
<div class="paragraph">
<p>Se pueden aplicar convertidores a las siguientes etiquetas</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&lt;h:outputText&gt;</p>
</li>
<li>
<p>&lt;h:outputFormat&gt;</p>
</li>
<li>
<p>&lt;h:outputLink&gt;</p>
</li>
<li>
<p>&lt;h:outputLabel&gt;</p>
</li>
<li>
<p>&lt;h:inputText&gt;</p>
</li>
<li>
<p>&lt;h:inputTextarea&gt;</p>
</li>
<li>
<p>&lt;h:inputHidden&gt;</p>
</li>
<li>
<p>&lt;h:inputSecret&gt;</p>
</li>
<li>
<p>&lt;h:selectBooleanCheckbox&gt;</p>
</li>
<li>
<p>&lt;h:selectManyListbox&gt;</p>
</li>
<li>
<p>&lt;h:selectMaynyMenu&gt;</p>
</li>
<li>
<p>&lt;h:selectOneRadio&gt;</p>
</li>
<li>
<p>&lt;h:selectOneListbox&gt;</p>
</li>
<li>
<p>&lt;h:selectOneMenu&gt;</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_conversores_personalizados">13.1. Conversores personalizados</h3>
<div class="paragraph">
<p>Se pueden definir conversores personalizados, para ello se ha de crear un implementación de la interface <strong>javax.faces.Converter</strong>, que obliga a implementar los métodos</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>getAsObject()</strong>. Recibe como parámetro el String introducido en el campo, y ha de retornar un Objeto.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">Object</span> getAsObject(FacesContext arg0, UIComponent arg1, <span class="predefined-type">String</span> arg2) {
    <span class="keyword">if</span> (arg2 == <span class="predefined-constant">null</span> || arg2.equals(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)) {
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    }
    <span class="predefined-type">Pattern</span> patron = <span class="predefined-type">Pattern</span>.compile(<span class="string"><span class="delimiter">&quot;</span><span class="char">\\</span><span class="content">d{8}-[A-z]</span><span class="delimiter">&quot;</span></span>);
    <span class="predefined-type">Matcher</span> matcher = patron.matcher(arg2);
    <span class="keyword">if</span> (!matcher.matches()) {
        FacesMessage msg = <span class="keyword">new</span> FacesMessage(FacesMessage.SEVERITY_ERROR, <span class="string"><span class="delimiter">&quot;</span><span class="content">NIF Conversion error.</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Formato no valido para el NIF.</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">throw</span> <span class="keyword">new</span> ConverterException(msg);
    }
    <span class="keyword">return</span> <span class="keyword">new</span> Nif(<span class="predefined-type">Integer</span>.parseInt(arg2.substring(<span class="integer">0</span>, <span class="integer">8</span>)), arg2.charAt(<span class="integer">9</span>));
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>getAsString()</strong>. Recibe como parámetro el Objeto y ha de retornar el String a introducir en el campo.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> getAsString(FacesContext arg0, UIComponent arg1, <span class="predefined-type">Object</span> arg2) {
    <span class="keyword">return</span> arg2.toString();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>De producirse problemas en la conversión, se ha de lanzar una excepción de tipo
<strong>ConverterException</strong>, con un parametro <strong>FacesMessage</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesMessage msg = <span class="keyword">new</span> FacesMessage(FacesMessage.SEVERITY_ERROR, <span class="string"><span class="delimiter">&quot;</span><span class="content">NIF Conversion error.</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Formato no valido para el NIF.</span><span class="delimiter">&quot;</span></span>);
<span class="keyword">throw</span> <span class="keyword">new</span> ConverterException(msg);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Por último, se ha de declarar dicha clase como <strong>Converter</strong>, siempre definiendo
un ID, se puede hacer con:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Anotaciones</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesConverter</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">CCNumberConverter</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CCNumberConverter</span> <span class="directive">implements</span> Converter {}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Declarativo en <strong>faces-config.xml</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;converter&gt;</span>
    <span class="tag">&lt;converter-id&gt;</span>CCNumberConverter<span class="tag">&lt;/converter-id&gt;</span>
    <span class="tag">&lt;converter-class&gt;</span>curso.converters.CCNumberConverter<span class="tag">&lt;/converter-class&gt;</span>
<span class="tag">&lt;/converter&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se pueden asociar los conversores a los campos de las siguientes maneras</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Con la propiedad converter de las etiquetas</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.pasatiempo}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">converter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CCNumberConverter</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Añadir la etiqueta converter</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Usuario.pasatiempo}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:converter</span> <span class="attribute-name">converterId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CCNumberConverter</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:</span> outputText<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Además se puede añadir un mensaje personalizado en caso de no cumplir la conversión</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{item.quantity}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">converterMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Un entero por favor!</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">integerOnly</span>=<span class="error">“</span><span class="attribute-value">true</span><span class="error">&quot;</span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_i18n">14. i18n</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mecanismo estándar para la traducción de páginas sin generar contenidos distintos.</p>
</div>
<div class="paragraph">
<p>Soporte para múltiples <strong>locales</strong>.</p>
</div>
<div class="paragraph">
<p>Se debe configurar un <strong>Default Locale</strong> y los <strong>Supported Locale</strong> en el fichero <strong>faces-config.xml</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;application&gt;</span>
    <span class="tag">&lt;locale-config&gt;</span>
        <span class="tag">&lt;default-locale&gt;</span>es<span class="tag">&lt;/default-locale&gt;</span>
        <span class="tag">&lt;supported-locale&gt;</span>en<span class="tag">&lt;/supported-locale&gt;</span>
    <span class="tag">&lt;/locale-config&gt;</span>
<span class="tag">&lt;/application&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>El <strong>Locale</strong> empleado, se puede recuperar de forma programática de la siguiente forma</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext.getCurrentInstance().getViewRoot().getLocale();</code></pre>
</div>
</div>
<div class="paragraph">
<p>También se puede modificar</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Locale</span> locale = <span class="keyword">new</span> <span class="predefined-type">Locale</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">es</span><span class="delimiter">&quot;</span></span>);
FacesContext.getCurrentInstance().getViewRoot().setLocale(locale);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para el uso de mensajes traducidos, se deberán definir ficheros properties con los mensajes traducidos.</p>
</div>
<div class="paragraph">
<p>Se pueden parametrizar los mensajes, empleando la sintaxis <strong>{0}</strong>.</p>
</div>
<div class="paragraph">
<p>A modo de recordatorio, los properties, contienen pares <strong>clave-valor</strong>, donde cada propertie contiene el mismo número de elementos que han sido traducido al <strong>Locale</strong> específico.</p>
</div>
<div class="listingblock">
<div class="title">Contenido de un fichero mensajes_es.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">view.index.mensaje=Mi mensaje</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Contenido de un fichero mensajes_en.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">view.index.mensaje=My message</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los nombres de los <strong>properties</strong> que serán cargados por el <strong>Resource Bundle</strong>, estará compuesto del siguiente modo <strong>baseName + "<em>" + language + "</em>" + country + "_" + variant</strong></p>
</div>
<div class="paragraph">
<p>Los properties se pueden referenciar:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>De forma local a la vista</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:loadBundle</span> <span class="attribute-name">basename</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">custom.MyMessages</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">msg</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Global en el <strong>faces-config.xml</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;application&gt;</span>
    <span class="tag">&lt;resource-bundle&gt;</span>
        <span class="tag">&lt;base-name&gt;</span>custom.MyMessages<span class="tag">&lt;/base-name&gt;</span>
        <span class="tag">&lt;var&gt;</span>msg<span class="tag">&lt;/var&gt;</span>
    <span class="tag">&lt;/resource-bundle&gt;</span>
<span class="tag">&lt;/application&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Se pueden acceder empleando la variable definida</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{msg[view.index.mensaje]}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>También se puede acceder al boundle desde código.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FacesContext facesContext = FacesContext.getCurrentInstance();
<span class="predefined-type">String</span> messageBundleName = facesContext.getApplication().getMessageBundle();
<span class="predefined-type">Locale</span> locale = facesContext.getViewRoot().getLocale();
<span class="predefined-type">ResourceBundle</span> bundle = <span class="predefined-type">ResourceBundle</span>.getBundle(messageBundleName, locale);</code></pre>
</div>
</div>
<div class="paragraph">
<p>O incluso inyectarlo en un ManagedBean</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ManagedProperty</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#{msg}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> <span class="predefined-type">ResourceBundle</span> bundle;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_javascript">15. Javascript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Se puede hacer referencia a ficheros <strong>javascript</strong> con la etiqueta <strong>h:outputScript</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputScript</span> <span class="attribute-name">library</span> = <span class="string"><span class="delimiter">&quot;</span><span class="content">js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span> = <span class="string"><span class="delimiter">&quot;</span><span class="content">help.js</span><span class="delimiter">&quot;</span></span>  <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Donde el fichero <strong>javascript</strong> estará en <strong>src/main/resources/&lt;nombre de la libreria&gt;</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ajax">16. Ajax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Se proporciona un objeto <strong>javascript</strong> con funcionalidades <strong>ajax</strong> llamado <strong>jsf</strong>.</p>
</div>
<div class="paragraph">
<p>A traves de el se pueden realizar peticiones ajax de forma sencilla.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span>
    <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{indexBean.message}</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">valueChangeListener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{indexBean.valueChange}</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">onblur</span>=<span class="string"><span class="delimiter">&quot;</span>jsf.ajax.request(<span class="local-variable">this</span>, event,{
        <span class="key">execute</span>: <span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>,
        <span class="key">render</span> : <span class="string"><span class="delimiter">'</span><span class="content">output</span><span class="delimiter">'</span></span>,
        <span class="key">onevent</span>: mi.dominio.monitor,
        <span class="key">onerror</span>: mi.dominio.errores
    })<span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;script&gt;</span>
<span class="inline">mi.dominio = {
    <span class="function">monitor</span>:
    <span class="keyword">function</span> (data){
        <span class="keyword">var</span> loading = document.getElementById(<span class="string"><span class="delimiter">&quot;</span><span class="content">image</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">if</span>(data.status == <span class="string"><span class="delimiter">&quot;</span><span class="content">begin</span><span class="delimiter">&quot;</span></span>){
            loading.style.display = <span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span>;
        }
        <span class="keyword">else</span> <span class="keyword">if</span>(data.status == <span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span>){
            loading.style.display = <span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>;
        }
    },
    <span class="function">errores</span>:
    <span class="keyword">function</span>(error){
        console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Error Description: </span><span class="delimiter">&quot;</span></span> + error.description);
        console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Error Name: </span><span class="delimiter">&quot;</span></span> + error.errorName);
        console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Error errorMessage: </span><span class="delimiter">&quot;</span></span> + error.errorMessage);
        console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">httpError: </span><span class="delimiter">&quot;</span></span> + error.httpError);
        console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">emptyResponse: </span><span class="delimiter">&quot;</span></span> + error.emptyResponse);
        console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">maleformed: </span><span class="delimiter">&quot;</span></span> + error.maleformed);
        console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">serverError: </span><span class="delimiter">&quot;</span></span> + error.serverError);
    }
}</span>
<span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="__f_ajax">16.1. &lt;f:ajax&gt;</h3>
<div class="paragraph">
<p>Etiqueta que permite configurar que las interacciones con el servidor se hagan por <strong>ajax</strong></p>
</div>
<div class="paragraph">
<p>Define los siguientes parámetros</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>render</strong>: Los elementos a actualizar con la respuesta.</p>
</li>
<li>
<p><strong>execute</strong>: Los datos a enviar al servidor en la petición para operar.</p>
</li>
<li>
<p><strong>event</strong>: Indica el evento que lanza la peticion ajax. Puede ser: blur, change, click, action, dblclick, focus, keydown, keypress, keyup, mousedown, mousemove, mouseout, mouseover, mouseup o select.</p>
</li>
<li>
<p><strong>listener</strong>: Define un método de un <strong>Managed Bean</strong> que será invocado, este debe cumplir la firma</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> facetListener(javax.faces.event.AjaxBehaviorEvent event)
                <span class="directive">throws</span> javax.faces.event.AbortProcessingException{}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>onerror</strong>: Define una funcion javascript que se invocará en caso de error en la peticion</p>
</li>
<li>
<p><strong>onevent</strong>: Define una funcion javascript que se invocará con cada cambio de estado de la peticion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para los parametros <strong>render</strong> y <strong>execute</strong> se pueden poner los <strong>id</strong> de los componentes afectados separados por espacios, o bien recurrir a las siguientes constantes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>@all</strong>: Opera con toda la vista</p>
</li>
<li>
<p><strong>@form</strong>: Opera con el formulario donde este la etiqueta.</p>
</li>
<li>
<p><strong>@this</strong>: Opera con el elemento que provoca el evento.</p>
</li>
<li>
<p><strong>@none</strong>: No opera con datos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bankingBeanAjax.customerId}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;h:inputSecret</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bankingBeanAjax.password}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Show</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bankingBeanAjax.showBalance}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;f:ajax</span> <span class="attribute-name">execute</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@form</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ajaxMessage1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:commandButton&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bankingBeanAjax.message}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ajaxMessage1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_facelets">17. Facelets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permiten generar las vistas empleando plantillas.</p>
</div>
<div class="paragraph">
<p>Dispone de un namespace para las etiquetas</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La plantilla se define como una vista normal, definiendo huecos en los que se podrán insertar elementos que varían.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_facelets.png" alt="jsf facelets">
</div>
</div>
<div class="paragraph">
<p>En la plantilla, los huecos, serán definidos con la etiqueta <strong>ui:insert</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;ui:insert</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Las paginas que empleen la plantilla, tendrán como nodo principal <strong>ui:composition</strong> que permite referenciar a la plantilla.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;ui:composition</span> <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/plantilla.xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Y definirán el relleno de los huecos con <strong>ui:define</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;ui:define</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>También e puede emplear la etiqueta <strong>ui:include</strong> que permite referencia a ficheros <strong>xhtml</strong>, a los cuales puede pasarles parámetros.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;ui:include</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cabecera.xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;ui:param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Titulo de la aplicacion</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pudiendo recoger estos parametros en el otro fichero xhtml empleando expresiones EL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">#{title}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_componentes_personalizados">18. Componentes Personalizados</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Se pueden crear componentes de varis formas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Por herencia de <strong>UIComponent</strong></p>
</li>
<li>
<p>Con <strong>Facelets</strong></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_herencia_de_strong_uicomponent_strong">18.1. Herencia de <strong>UIComponent</strong></h3>
<div class="paragraph">
<p>Se ha de definir una nueva clae que herede de la jerarquia de <strong>UICOmponent</strong> anotada con la <strong>@FacesComponent</strong> que la declarará como componente visual, pudiendo:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Implementar la renderización en el propio componente con los métodos <strong>encodeXXX</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> encodeBegin(FacesContext context) <span class="directive">throws</span> <span class="exception">IOException</span> {
    ResponseWriter writer = context.getResponseWriter();
    writer.write(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Definir un <strong>Renderer</strong> que se encarge de ello, para lo cual hay que definir en el componente que tipo de Render emplea y la familia</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> HelloWorldComponent() {
    setRendererType(HtmlInputText.COMPONENT_TYPE);
}

<span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">String</span> getFamily() {
    <span class="keyword">return</span> HtmlInputText.COMPONENT_FAMILY;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y se ha de definir un render extiendo de la jerarquia de <strong>Renderer</strong> anotado con <strong>@FacesRenderer</strong> que la declarará como <strong>Renderer</strong> que se encargue de renderizar esos componentes, indicando el tipo de render y la familia</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesRenderer</span>(componentFamily=HtmlInputText.COMPONENT_FAMILY, rendererType = HtmlInputText.COMPONENT_TYPE)
<span class="directive">public</span> <span class="type">class</span> <span class="class">InputRenderer</span> <span class="directive">extends</span> TextRenderer {

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> getEndTextToRender(FacesContext context, UIComponent component, <span class="predefined-type">String</span> currentValue)
            <span class="directive">throws</span> java.io.IOException {

        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Renderizando un UIInput o UIOutput</span><span class="delimiter">&quot;</span></span>);

        <span class="predefined-type">String</span><span class="type">[]</span> attributes = { <span class="string"><span class="delimiter">&quot;</span><span class="content">placeholder</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">data-theme</span><span class="delimiter">&quot;</span></span> };

        ResponseWriter writer = context.getResponseWriter();

        <span class="keyword">for</span> (<span class="predefined-type">String</span> attribute : attributes) {
            <span class="predefined-type">String</span> value = (<span class="predefined-type">String</span>) component.getAttributes().get(attribute);
            <span class="keyword">if</span> (value != <span class="predefined-constant">null</span>) {
                writer.writeAttribute(attribute, value, attribute);
            }
        }
        <span class="local-variable">super</span>.getEndTextToRender(context, component, currentValue);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para realizar la renderización el <strong>API</strong> proporciona la clase <strong>ResponseWriter</strong> que permite definir el texto a generar, siendo sus principales métodos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>writer.startElement("input", component);</p>
</li>
<li>
<p>writer.write("Hello World!");</p>
</li>
<li>
<p>writer.endElement("input");</p>
</li>
<li>
<p>writer.startCDATA();</p>
</li>
<li>
<p>writer.endCDATA();</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Se puede acceder a los atributos definidos para el componente</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="local-variable">this</span>.getAttributes().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">styleClass</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_facelets_2">18.2. Facelets</h3>
<div class="paragraph">
<p>Permite definir un nuevo componente encapsulando componentes ya existentes, para ello se ha de definir un nuevo <strong>xhtml</strong> en la carpeta <strong>src/main/webapp/resources/&lt;libreria de componentes&gt;</strong> empleando el namespace</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">xmlns:composite=&quot;http://java.sun.com/jsf/composite&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>El fichero se dividirá en dos seccione:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>composite:interface</strong>: declara el contrato del componente, indicando atributos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;composite:interface&gt;</span>
    <span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">actionLabel</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">actionMethod</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method-signature</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.String action()</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">resetLabel</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/composite:interface&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>composite:implementation</strong>: define la implementación del componente.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;composite:implementation&gt;</span>
    <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.actionLabel}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.actionMethod}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.resetLabel}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">reset</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/composite:implementation&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Dentro del componente se puede tener acceso a los atributos declarados en la <strong>interface</strong> con la variable <strong>cc</strong>.</p>
</div>
<div class="paragraph">
<p>Una vez definido el componente desde la vistas se puede acceder indicando el namespace</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">http://java.sun.com/jsf/composite/<span class="tag">&lt;libreria</span> <span class="attribute-name">de</span> <span class="attribute-name">componentes</span><span class="tag">&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faces_flow">19. Faces Flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permite definir flujos de vistas (<strong>Wizard</strong>) al estilo de <strong>Spring Flow</strong>.</p>
</div>
<div class="paragraph">
<p>La idea es agrupar los objetos que se manejan en varias Vistas en un ambito superior al de la <strong>request</strong> pero inferior al de <strong>session</strong>, este ambito se llama <strong>flow</strong>.</p>
</div>
<div class="paragraph">
<p>Se crea una nueva anotacion <strong>@FlowScoped("FlowName")</strong> que permite asociar un <strong>ManagedBean</strong> a un Flujo.</p>
</div>
<div class="paragraph">
<p>Ademas de definir un nuevo objeto accesible desde las vista con las expresiones EL</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{flowScope.name}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Para ello hay que definir un directorio por cada flujo en <strong>src/main/webapp</strong>, definiendo en el:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Un fichero de configuracion de JSF cuyo nombre ha de ser <strong>&lt;FlowName&gt;-flow.xml</strong>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;faces-config</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/xml/ns/javaee</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span>
        <span class="content">http://xmlns.jcp.org/xml/ns/javaee</span>
        <span class="content">http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/faces-config&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Un fichero de vista con nombre <strong>&lt;FlowName&gt;.xhtml</strong> que será el punto de entrada del flujo por defecto.</p>
</li>
<li>
<p>El resto de pasos que tenga el flujo, podrán llamarse de cualquier forma.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_navegacion_entre_pasos">19.1. Navegacion entre pasos</h3>
<div class="paragraph">
<p>Se pueden emplear <strong>commandButton</strong> indicando en el <strong>action</strong> el nombre de la vista del flujo a la que ir.</p>
</div>
<div class="listingblock">
<div class="title">Extracto del fichero <strong>signup.xhtml</strong>, debera existir en el directorio del flujo el fichero <strong>signup2.xhtml</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">next</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">signup2</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>O bien invocar un método de accion de un <strong>Managed Bean</strong> que retorne el nombre de la vista a la que ir.</p>
</div>
<div class="listingblock">
<div class="title">Extracto del fichero <strong>signup2.xhtml</strong>, debera existir un Bean con ambito <strong>flow</strong> con un método <strong>accept()</strong>.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">next</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">next</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{signupBean.accept}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Posible contenido del método <strong>accept</strong> que dirige el flujo hacia el fichero <strong>signup3.xhtml</strong> que deberá existir en el directorio del flujo.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> accept() {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">signup3</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si se desea salir del flujo, se ha de definir en el fichero de configuracion un <strong>flow-return</strong>, dado que salir a una vista fuera del flujo no declarada de esta forma no se resuelve.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;flow-return</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">homePage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;from-outcome&gt;</span>/index<span class="tag">&lt;/from-outcome&gt;</span>
<span class="tag">&lt;/flow-return&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">home</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">home</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">homePage</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flujos_anidados_nested">19.2. Flujos anidados (Nested)</h3>
<div class="paragraph">
<p>Se pueden invocar flujos desde flujos.</p>
</div>
<div class="paragraph">
<p>Para ello, en el fichero de configuracion hay que definir en el fichero de configuracion del flujo un <strong>flow-call</strong>, donde se definen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Un identificador de la llamada al otro flujo, que permite invocarlo desde la vistas</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">call2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter Flow2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">callSettingsFlow</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>La referencia al otro flujo por <strong>FlowName</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;flow-call</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">callSettingsFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;flow-reference&gt;</span>
        <span class="tag">&lt;flow-id&gt;</span>confirm<span class="tag">&lt;/flow-id&gt;</span>
    <span class="tag">&lt;/flow-reference&gt;</span>
    <span class="tag">&lt;outbound-parameter&gt;</span>
        <span class="tag">&lt;name&gt;</span>paramFromSignup<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{flowScope.email}<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/outbound-parameter&gt;</span>
<span class="tag">&lt;/flow-call&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Parametros a pasar de un flujo a otro, de suceder esto, habrá que recogerlos en la configuracion del otro flujo para ponerlos en el nuevo objeto <strong>flowScope</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;inbound-parameter&gt;</span>
    <span class="tag">&lt;name&gt;</span>paramFromSignup<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;value&gt;</span>#{flowScope.param1Value}<span class="tag">&lt;/value&gt;</span>
<span class="tag">&lt;/inbound-parameter&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_integracion_con_spring">20. Integracion con Spring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Se puede emplear Spring junto con JSF, pudiendo referenciar a <strong>Beans</strong> de Spring desde <strong>Managed Bean</strong> de JSF, para ello habrá que definir dos contextos.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>El de JSF que se crea con <strong>FacesServlet</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Extracto del fichero <strong>web.xml</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servlet&gt;</span>
    <span class="tag">&lt;description&gt;</span><span class="tag">&lt;/description&gt;</span>
    <span class="tag">&lt;display-name&gt;</span>FacesServlet<span class="tag">&lt;/display-name&gt;</span>
    <span class="tag">&lt;servlet-name&gt;</span>FacesServlet<span class="tag">&lt;/servlet-name&gt;</span>
    <span class="tag">&lt;servlet-class&gt;</span>javax.faces.webapp.FacesServlet<span class="tag">&lt;/servlet-class&gt;</span>
<span class="tag">&lt;/servlet&gt;</span>
<span class="tag">&lt;servlet-mapping&gt;</span>
    <span class="tag">&lt;servlet-name&gt;</span>FacesServlet<span class="tag">&lt;/servlet-name&gt;</span>
    <span class="tag">&lt;url-pattern&gt;</span>*.xhtml<span class="tag">&lt;/url-pattern&gt;</span>
<span class="tag">&lt;/servlet-mapping&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>El de Spring, que se crea con <strong>ContextLoaderListener</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Extracto del fichero <strong>web.xml</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;listener&gt;</span>
    <span class="tag">&lt;listener-class&gt;</span>
        org.springframework.web.context.ContextLoaderListener
    <span class="tag">&lt;/listener-class&gt;</span>
<span class="tag">&lt;/listener&gt;</span>
<span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>contextConfigLocation<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>/WEB-INF/applicationContext.xml<span class="tag">&lt;/param-value&gt;</span>
<span class="tag">&lt;/context-param&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Lo que se persigue es que los <strong>Managed Bean</strong> sean capaces de encontrar los <strong>Bean</strong> de Spring, para lo cual hay que proporcionar a JSF una nueva implementacion de <strong>ELResolver</strong> que permita que las expresiones EL se resuelvan buscando Beans en el contexto de Spring.</p>
</div>
<div class="listingblock">
<div class="title">Extracto de <strong>faces-config.xml</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;el-resolver&gt;</span>org.springframework.web.jsf.el.SpringBeanFacesELResolver<span class="tag">&lt;/el-resolver&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A partir de aquí se pueden definir beans de spring</p>
</div>
<div class="listingblock">
<div class="title">Extracto de <strong>applicationContext.xml</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.curso.jsf.controllers.Saludo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Que son accesibles desde <strong>Managed Bean</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">indexController</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IndexController</span> {
        <span class="annotation">@Inject</span>
        <span class="directive">private</span> Saludo saludo;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_primefaces">21. Primefaces</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_renderizacion_parcial">22. Renderizacion Parcial</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En Primefaces, se tiene un sistema mas avanzado de renderización y procesamiento parcial en las peticiones Ajax que en JSF estandar.</p>
</div>
<div class="paragraph">
<p>Entre otras cosas, se puede configurar el framework, para que en las peticiones AJAX, no se envie por <strong>post</strong> todo el formulario, sino solo aquellas partes que participarán del procesamiento, cosa que en JSF estandar no pasa, ya que se envia todo el formulario.</p>
</div>
<div class="paragraph">
<p>Se puede activar de forma global, para lo cual hay que indicar una propiedad del contexto.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>primefaces.SUBMIT<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>partial<span class="tag">&lt;/param-name&gt;</span>
<span class="tag">&lt;/context-param&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>O de forma parcial en los coponentes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">partialSubmit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true|false</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Para que el codigo quede mas limpio, se han incorporado los atributos <strong>update</strong> y <strong>process</strong> a los componentes compatibles con Ajax, por lo que no es ncesario el uso de <strong>&lt;f:ajax&gt;</strong>.</p>
</div>
<div class="paragraph">
<p>Tambien se permite actualizar componentes en otros formularios, precediendo el identificador de <strong>:</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">update</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">:form2:display</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span>
<span class="tag">&lt;h:form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">display</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.value}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ejemplo de enlazado de combos</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;h:selectOneMenu</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.city}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;f:selectItems</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.cityChoices}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;p:ajax</span> <span class="attribute-name">actionListener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.populateSuburbs}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">change</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">update</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">suburbs</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">process</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@this</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:selectOneMenu&gt;</span>
    <span class="tag">&lt;h:selectOneMenu</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">suburbs</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.suburb}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;f:selectItems</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.suburbChoices}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:selectOneMenu&gt;</span>
    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.email}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_procesamiento_parcial">23. Procesamiento Parcial</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Se proporciona la opcion de definir a que componentes se les aplicará el ciclo de vida de JSF, sobre todo interesante desde el punto de vista de las validaciones, ya que permite evitar el uso de <strong>immediate</strong>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_partial_submit">24. Partial Submit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permite reducir el trafico, ya que permite que solo los componentes que se veran afectados en el procesamiento del servidor sean enviados.</p>
</div>
<div class="paragraph">
<p>Se puede activar de forma global</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>primefaces.SUBMIT<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>partial<span class="tag">&lt;/param-value&gt;</span>
<span class="tag">&lt;/context-param&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>O para los componentes particulares.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">partialSubmit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true|false</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_selectores_primefaces">25. Selectores Primefaces</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.primefaces.org/showcase/ui/ajax/selector.xhtml" class="bare">https://www.primefaces.org/showcase/ui/ajax/selector.xhtml</a></p>
</div>
<div class="paragraph">
<p>Primefaces permite emplear selectores de <strong>JQuery</strong> cuando se precisa hacer referencia a componentes para la actualización parcial con <strong>Ajax</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf_primefaces_selectores.png" alt="jsf primefaces selectores">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Actualizar todos los formularios de la pagina:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml"><span class="tag">&lt;p:commandButton</span> <span class="attribute-name">update</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@(form)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">All Forms</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Actualziar el primer formulario de la pagina</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml">update=&quot;@(form:first)&quot;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Actualizar los componentes que tienen como <strong>styleClass</strong> mystyle.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml">update=&quot;@(.mystyle)&quot;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Actualizar y procesar todos los componentes de tipo <strong>input</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml">update=&quot;@(:input)&quot; process=&quot;@(:input)&quot;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Actualizar todas las <strong>datatables</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml">update=&quot;@(.ui-datatable)&quot;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Procesar todos los <strong>input</strong> dentro de un <strong>panel</strong> y actualizar todos los <strong>panel</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml">process=&quot;@(.ui-panel :input)&quot; update=&quot;@(.ui-panel)&quot;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>PRocesar todos los <strong>input</strong>, salvo los <strong>select</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml">process=&quot;@(:input:not(select))&quot;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Actualizar los input <strong>deshabilitados</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml">update=&quot;@(:input:disabled)&quot;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xhtml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;p:panel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">panel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">header</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PFS Form</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">margin-bottom</span>:<span class="float">10px</span>;<span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;p:messages</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">messages</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

        <span class="tag">&lt;h:panelGrid</span> <span class="attribute-name">columns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cellpadding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Text 1: *</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;p:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{selectorView.text1}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">label</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Text 1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;f:validateLength</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/p:inputText&gt;</span>
            <span class="tag">&lt;p:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt1</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{selectorView.text1}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

            <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Text 2: *</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;p:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{selectorView.text2}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">label</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Text 2</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;p:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt2</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{selectorView.text2}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

            <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Text 3: *</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;h:selectOneMenu</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{selectorView.text3}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">label</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Text 3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Select One</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">noSelectionOption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
                <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Option 1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
                <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Option 2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
                <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Option 3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/h:selectOneMenu&gt;</span>
            <span class="tag">&lt;p:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txt3</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{selectorView.text3}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:panelGrid&gt;</span>
    <span class="tag">&lt;/p:panel&gt;</span>

    <span class="tag">&lt;h:panelGrid</span> <span class="attribute-name">columns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">update</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@(form)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">All Forms</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">update</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@(form:last)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Last Form</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">update</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@(.ui-panel)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">All Panels</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">process</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@(.ui-panel :input)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">update</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@(.ui-panel)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Inputs of Panel</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">process</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@(.ui-panel :input:not(select))</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">update</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@(.ui-panel)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Inputs Except Select</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:panelGrid&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validaciones_cliente">26. Validaciones Cliente</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permite ejecutar las validaciones del lado cliente, sin llegar a realizar las peticiones al servidor.</p>
</div>
<div class="paragraph">
<p>Se ha activar, ya que por defecto esta desactivado, para ello hay que añadir un nuevo <strong>context-param</strong> en el <strong>web.xml</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>primefaces.CLIENT_SIDE_VALIDATION<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>true<span class="tag">&lt;/param-value&gt;</span>
<span class="tag">&lt;/context-param&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Y luego en aquellos formularios donde se desee aplicar, se ha de activar la propiedad <strong>validateClient</strong> de los <strong>p:commandButton</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;p:messages</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;p:inputText</span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;p:inputTextarea</span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Save</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">validateClient</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ajax</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se proporciona la etiqueta <strong>p:clientValidator</strong> que permite lanzar la validación cuando el componente pierde el foco, en lugar de esperar a que se envie el formulario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;p:panel</span> <span class="attribute-name">header</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Validate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:panelGrid</span> <span class="attribute-name">columns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cellpadding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Text: (Change)</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;p:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{validationBean.text}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;f:validateLength</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maximum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
                <span class="tag">&lt;p:clientValidator</span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/p:inputText&gt;</span>
            <span class="tag">&lt;p:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">display</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">icon</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{validationBean.text}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Integer: (Keyup)</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;p:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{validationBean.integer}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;p:clientValidator</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">keyup</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/p:inputText&gt;</span>
            <span class="tag">&lt;p:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">display</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">icon</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{validationBean.integer}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:panelGrid&gt;</span>
        <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Save</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ajax</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">icon</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ui-icon-check</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">validateClient</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/p:panel&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se ofrece compatibilidad con <strong>Beans Validator</strong>, por lo que definiendo un <strong>Managed Bean</strong> con las anotaciones estandar</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Bean</span> {
    <span class="annotation">@Size</span>(min=<span class="integer">2</span>,max=<span class="integer">5</span>)
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Min</span>(<span class="integer">10</span>)
    <span class="annotation">@Max</span>(<span class="integer">20</span>)
    <span class="directive">private</span> <span class="predefined-type">Integer</span> age;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;p:growl</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;h:panelGrid&gt;</span>
        <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Name:</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;p:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.name}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">label</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Name</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;p:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Age: (@Min(10) @Max(20))</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;p:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.age}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">label</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Age</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;p:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:panelGrid&gt;</span>
    <span class="tag">&lt;p:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Save</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">validateClient</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ajax</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si se desea extender la validacion cliente sobre validadores personalizados, habrá que:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Añadir la interface <strong>org.primefaces.validate.ClientValidator</strong> al validador estandar JSF.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesValidator</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">custom.emailValidator</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailValidator</span> <span class="directive">implements</span> <span class="predefined-type">Validator</span>, ClientValidator {
    <span class="directive">private</span> <span class="predefined-type">Pattern</span> pattern;
    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> EMAIL_PATTERN = <span class="string"><span class="delimiter">&quot;</span><span class="content">^[_A-Za-z0-9-</span><span class="char">\\</span><span class="content">+]+(</span><span class="char">\\</span><span class="content">.[_A-Za-z0-9-]+)*@</span><span class="delimiter">&quot;</span></span> + <span class="string"><span class="delimiter">&quot;</span><span class="content">[A-Za-z0-9-]+(</span><span class="char">\\</span><span class="content">.[A-Za-z0-9]+)*(</span><span class="char">\\</span><span class="content">.[A-Za-z]{2,})$</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">public</span> EmailValidator() {
        pattern = <span class="predefined-type">Pattern</span>.compile(EMAIL_PATTERN);
    }
    <span class="directive">public</span> <span class="type">void</span> validate(FacesContext context, UIComponent component, <span class="predefined-type">Object</span> value)<span class="directive">throws</span> ValidatorException {
        <span class="keyword">if</span>(value == <span class="predefined-constant">null</span>) {
            <span class="keyword">return</span>;
        }

        <span class="keyword">if</span>(!pattern.matcher(value.toString()).matches()) {
            <span class="keyword">throw</span> <span class="keyword">new</span> ValidatorException(<span class="keyword">new</span> FacesMessage(FacesMessage.SEVERITY_ERROR, <span class="string"><span class="delimiter">&quot;</span><span class="content">Validation Error</span><span class="delimiter">&quot;</span></span>, value + <span class="string"><span class="delimiter">&quot;</span><span class="content"> is not a valid email;</span><span class="delimiter">&quot;</span></span>));
        }
    }
    <span class="directive">public</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; getMetadata() {
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getValidatorId() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">custom.emailValidator</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Definir una funcion javascript que implemente la logica del lado cliente empleando <strong>PrimeFaces.validator</strong>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">PrimeFaces.validator[<span class="string"><span class="delimiter">'</span><span class="content">custom.emailValidator</span><span class="delimiter">'</span></span>] = {
    <span class="key">pattern</span>: <span class="regexp"><span class="delimiter">/</span><span class="char">\S</span><span class="content">+@</span><span class="char">\S</span><span class="content">+</span><span class="delimiter">/</span></span>,
    <span class="function">validate</span>: <span class="keyword">function</span>(element, value) {
        <span class="comment">//use element.data() to access validation metadata, in this case there is     none.</span>
        <span class="keyword">if</span>(!<span class="local-variable">this</span>.pattern.test(value)) {
            <span class="keyword">throw</span> {
                <span class="key">summary</span>: <span class="string"><span class="delimiter">'</span><span class="content">Validation Error</span><span class="delimiter">'</span></span>,
                <span class="key">detail</span>: value + <span class="string"><span class="delimiter">'</span><span class="content"> is not a valid email.</span><span class="delimiter">'</span></span>
            }
        }
    }
};</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-11-28 19:10:38 UTC
</div>
</div>
</body>
</html>