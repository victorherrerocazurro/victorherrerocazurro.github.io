<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="description" content="Groovy">
<meta name="keywords" content="Groovy">
<meta name="author" content="Victor Herrero Cazurro">
<title>Groovy</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>Groovy</h1>
<div class="details">
<span id="author" class="author">Victor Herrero Cazurro</span><br>
<span id="email" class="email">&lt;<a href="https://github.com/victorherrerocazurro">@vherrero11</a>&gt;</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Contenidos</div>
<ul class="sectlevel1">
<li><a href="#__que_es_groovy">1. ¿Que es Groovy?</a></li>
<li><a href="#_instalación">2. Instalación</a>
<ul class="sectlevel2">
<li><a href="#_groovy_web_console">2.1. Groovy Web Console</a></li>
</ul>
</li>
<li><a href="#_conceptos_basicos">3. Conceptos Basicos</a>
<ul class="sectlevel2">
<li><a href="#_clases">3.1. Clases</a>
<ul class="sectlevel3">
<li><a href="#_contructores">3.1.1. Contructores</a></li>
<li><a href="#_decontructores_extractores">3.1.2. Decontructores (Extractores)</a></li>
<li><a href="#_atributos">3.1.3. Atributos</a></li>
<li><a href="#_getter_y_setter">3.1.4. Getter y Setter</a></li>
</ul>
</li>
<li><a href="#_strings">3.2. Strings</a></li>
</ul>
</li>
<li><a href="#_closures">4. Closures</a>
<ul class="sectlevel2">
<li><a href="#_paso_por_parametros">4.1. Paso por parametros</a></li>
<li><a href="#_estrategia_de_delegacion">4.2. Estrategia de Delegacion</a></li>
<li><a href="#_currying">4.3. Currying</a></li>
<li><a href="#_memoize_cache">4.4. Memoize (Cache)</a></li>
<li><a href="#_composicion">4.5. Composicion</a></li>
<li><a href="#_trampoline">4.6. Trampoline</a></li>
<li><a href="#_empleo_con_interfaces">4.7. Empleo con Interfaces</a></li>
<li><a href="#_with">4.8. With</a></li>
</ul>
</li>
<li><a href="#_metaprogramacion">5. Metaprogramacion</a>
<ul class="sectlevel2">
<li><a href="#_reflection">5.1. Reflection</a></li>
<li><a href="#_runtime">5.2. Runtime</a>
<ul class="sectlevel3">
<li><a href="#_delegatingmetaclass">5.2.1. DelegatingMetaClass</a></li>
<li><a href="#_metaclass_por_defecto">5.2.2. MetaClass por defecto</a></li>
<li><a href="#_metaclass_por_instancia">5.2.3. MetaClass por instancia</a></li>
</ul>
</li>
<li><a href="#_expandometaclass">5.3. ExpandoMetaClass</a>
<ul class="sectlevel3">
<li><a href="#_metodos">5.3.1. Metodos</a></li>
<li><a href="#_propiedades">5.3.2. Propiedades</a></li>
<li><a href="#_contructores_2">5.3.3. Contructores</a></li>
<li><a href="#_metodos_estaticos">5.3.4. Metodos estaticos</a></li>
<li><a href="#_metodos_prestados_borrowing">5.3.5. Metodos prestados (borrowing)</a></li>
<li><a href="#_nombres_de_metodos_dinamicos">5.3.6. Nombres de Metodos Dinamicos</a></li>
<li><a href="#_interfaces">5.3.7. Interfaces</a></li>
<li><a href="#_runtime_discovery">5.3.8. Runtime Discovery</a></li>
</ul>
</li>
<li><a href="#_groovyobject">5.4. GroovyObject</a></li>
<li><a href="#_metodos_2">5.5. Metodos</a></li>
<li><a href="#_methodmissing">5.6. MethodMissing</a></li>
<li><a href="#_propiedades_2">5.7. Propiedades</a></li>
<li><a href="#_atributos_2">5.8. Atributos</a></li>
<li><a href="#_propertymissing">5.9. PropertyMissing</a></li>
<li><a href="#_modulos_de_extension">5.10. Modulos de Extension</a></li>
</ul>
</li>
<li><a href="#_operadores">6. Operadores</a>
<ul class="sectlevel2">
<li><a href="#_sobrecarga_de_operadores">6.1. Sobrecarga de operadores</a></li>
<li><a href="#_operador">6.2. Operador ==</a></li>
<li><a href="#_operador_2">6.3. Operador *</a></li>
<li><a href="#_operador_power">6.4. Operador ** (power)</a></li>
<li><a href="#_operador_3">6.5. Operador .&amp;</a></li>
<li><a href="#_operador_4">6.6. Operador &lt;&#8658;</a></li>
<li><a href="#_operador_5">6.7. Operador []</a></li>
<li><a href="#_operador_in">6.8. Operador in</a></li>
<li><a href="#_operador_as">6.9. Operador as</a></li>
<li><a href="#_operador_6">6.10. Operador ()</a></li>
<li><a href="#_operador_safe_navigator">6.11. Operador safe navigator</a></li>
<li><a href="#_operador_ternario_y_operador_elvis">6.12. Operador ternario y operador Elvis</a></li>
</ul>
</li>
<li><a href="#_colecciones">7. Colecciones</a>
<ul class="sectlevel2">
<li><a href="#_list_listas">7.1. List (Listas)</a>
<ul class="sectlevel3">
<li><a href="#_acceso_a_elementos">7.1.1. Acceso a elementos</a></li>
<li><a href="#_edicion_de_elementos">7.1.2. Edicion de elementos</a></li>
<li><a href="#_agregacion_de_elementos">7.1.3. Agregacion de elementos</a></li>
<li><a href="#_borrado_de_elementos">7.1.4. Borrado de elementos</a></li>
<li><a href="#_iterador">7.1.5. Iterador</a></li>
<li><a href="#_map_collect">7.1.6. Map (Collect)</a></li>
<li><a href="#_operaciones_con_los_elementos_de_la_lista">7.1.7. Operaciones con los elementos de la lista</a></li>
<li><a href="#_busquedas">7.1.8. Busquedas</a></li>
<li><a href="#_ordenacion">7.1.9. Ordenacion</a></li>
<li><a href="#_agrupacion">7.1.10. Agrupacion</a></li>
</ul>
</li>
<li><a href="#_mapas">7.2. Mapas</a>
<ul class="sectlevel3">
<li><a href="#_claves">7.2.1. Claves</a></li>
<li><a href="#_acceso_a_elementos_2">7.2.2. Acceso a elementos</a></li>
<li><a href="#_edicion_y_agregacion_de_elementos">7.2.3. Edicion y Agregacion de elementos</a></li>
<li><a href="#_borrado_de_elementos_2">7.2.4. Borrado de elementos</a></li>
<li><a href="#_iterador_2">7.2.5. Iterador</a></li>
<li><a href="#_map_collect_2">7.2.6. Map (Collect)</a></li>
<li><a href="#_operaciones_con_los_elementos_del_mapa">7.2.7. Operaciones con los elementos del mapa</a></li>
<li><a href="#_busquedas_2">7.2.8. Busquedas</a></li>
<li><a href="#_ordenacion_2">7.2.9. Ordenacion</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_sql">8. SQL</a>
<ul class="sectlevel2">
<li><a href="#_preparacion_de_la_bd">8.1. Preparacion de la BD</a></li>
<li><a href="#_conexion">8.2. Conexion</a></li>
<li><a href="#_crear_tablas">8.3. Crear Tablas</a></li>
<li><a href="#_inserciones">8.4. Inserciones</a></li>
<li><a href="#_actualizaciones">8.5. Actualizaciones</a></li>
<li><a href="#_borrados">8.6. Borrados</a></li>
<li><a href="#_consultas">8.7. Consultas</a></li>
<li><a href="#_transacciones">8.8. Transacciones</a></li>
<li><a href="#_batch">8.9. Batch</a></li>
<li><a href="#_paginacion">8.10. Paginacion</a></li>
<li><a href="#_procedimientos_almacenados">8.11. Procedimientos Almacenados</a></li>
<li><a href="#_dataset">8.12. DataSet</a></li>
</ul>
</li>
<li><a href="#_ficheros">9. Ficheros</a></li>
<li><a href="#_api_groovy">10. Api Groovy</a>
<ul class="sectlevel2">
<li><a href="#_gstrings">10.1. GStrings</a></li>
<li><a href="#_expresiones_regulares">10.2. Expresiones regulares</a></li>
<li><a href="#_json">10.3. Json</a></li>
</ul>
</li>
<li><a href="#_ast">11. AST</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="__que_es_groovy">1. ¿Que es Groovy?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Es un lenguaje basado en Java, que persigue la simplificación de las sentencias <strong>Java</strong> en lo estrictamente necesario.</p>
</div>
<div class="paragraph">
<p>Tambien es un lenguaje dinámico, ya que se pueden ejecutar sentencias directamente sobre una consola</p>
</div>
<div class="paragraph">
<p>Dos tipos de consolas</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>groovysh</strong>: Shell de groovy, con historial de comandos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ groovysh</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>groovycosole</strong>: Consola gráfica que permite opciones mas potentes que la shell, como guardar y cargar archivos, opciones de edición de texto, etc.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ groovyConsole</code></pre>
</div>
</div>
<div class="paragraph">
<p>El 99% del código Java puede ser compilado con groovy, por lo que el salto de un lenguaje a otro se puede dar de forma paulatina.</p>
</div>
<div class="paragraph">
<p>El 100% del código Groovy es convertido en bytecode Java, y ejecutado en la JVM.</p>
</div>
<div class="paragraph">
<p>Comparte con Java el mismo modelo de objetos, de hilos y de seguridad.</p>
</div>
<div class="paragraph">
<p>Se puede encontrar la documentacion <a href="http://groovy-lang.org/documentation.html">aquí</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instalación">2. Instalación</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Groovy</strong> esta basado en la maquina virtual de Java, por lo que hay que tener instalada la JDK para poder desarrollar con <strong>Groovy</strong>, se puede descargar desde <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">aquí</a></p>
</div>
<div class="paragraph">
<p>Además se ha de declarar la variable de entorno JAVA_HOME, que apuntará al directorio de la JDK.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/java_home.png" alt="java home">
</div>
</div>
<div class="paragraph">
<p>Es recomendable hacer referencia en la variable de entorno PATH al direcotrio bin de la JDK.</p>
</div>
<div class="paragraph">
<p>De forma analoga, á que descargar <strong>Groovy</strong> e instalarlo, se puede descargar desde <a href="http://groovy-lang.org/download.html">aquí</a></p>
</div>
<div class="paragraph">
<p>Además de definir la variable de entorno GROOVY_HOME, que apuntará al directorio instalación de Groovy.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="images/groovy_home.png" alt="groovy home">
</div>
</div>
<div class="paragraph">
<p>De nuevo es recomendable hacer referencia en la variable de entorno PATH al direcotrio bin de <strong>Groovy</strong>.</p>
</div>
<div class="paragraph">
<p>Una de las herramientas que se obtienen, es la consola de Groovy, que se ejecuta con el comando <strong>groovyconsole</strong></p>
</div>
<div class="paragraph">
<p>Como herramienta de desarrollo <strong>IDE</strong>, se pueden emplear varias,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eclipse + Plugin Groovy</p>
</li>
<li>
<p>Intellij</p>
</li>
<li>
<p>GTS Groovy Tool Suite</p>
</li>
<li>
<p>Netbeans</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_groovy_web_console">2.1. Groovy Web Console</h3>
<div class="paragraph">
<p>Existe una consola Web que se puede emplear para probar el codigo, sin necesidad de instalar nada, se accede <a href="https://groovyconsole.appspot.com/">aquí</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conceptos_basicos">3. Conceptos Basicos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>El punto y coma (;) es opcional como delimitador de sentencias, el salto de linea es suficiente, solo será necesario cuando se introduzcan varias sentencias en una unica linea.</p>
</div>
<div class="paragraph">
<p>En los scripts se pueden definir funciones y variables.</p>
</div>
<div class="paragraph">
<p>No es necesaria la declaración de los tipos de las variables en los scripts, pudiendose emplear una misma variable para referenciar a objetos de distinto tipo, ya que no estan tipadas (tipado debil).</p>
</div>
<div class="listingblock">
<div class="title">En los scripts no se necesita declarar la variable indicando en tipo o def</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">a = <span class="integer">1</span>

a = <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se permite definir asignaciones multiples</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> (a, b, c) = [<span class="integer">10</span>, <span class="integer">20</span>, <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>]
<span class="keyword">assert</span> a == <span class="integer">10</span> &amp;&amp; b == <span class="integer">20</span> &amp;&amp; c == <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Todo en Groovy es un objeto, incluso los primitivos o el null</p>
</div>
<div class="listingblock">
<div class="title">Los primitivos de java son objetos en groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">entero = <span class="integer">12</span>

println entero.floatValue()

println <span class="integer">22</span>.floatValue()</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">El null es un objeto</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">def j = <span class="predefined-constant">null</span>;
println j.getClass().getSimpleName();
println j.equals(<span class="predefined-constant">null</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>La sentencia de <strong>return</strong> es opcional, ya que de no indicarse, se retorna el resultado de la ejecución de la ultima sentencia.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">int</span> sumar(<span class="type">int</span> a, <span class="type">int</span> b) {
    a + b
}

<span class="type">int</span> resultado = sumar <span class="integer">1</span>, <span class="integer">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se permite la definicion de rangos numericos de forma reducida, con el operador <strong>..</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> x = <span class="integer">0</span>
<span class="keyword">for</span> (i <span class="keyword">in</span> <span class="integer">0</span> .. <span class="integer">10</span>) {
    x += i
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy importa por defecto las siguientes clases y paquetes</p>
</div>
<div class="ulist">
<ul>
<li>
<p>groovy.lang</p>
</li>
<li>
<p>groovy.util</p>
</li>
<li>
<p>java.lang</p>
</li>
<li>
<p>java.util</p>
</li>
<li>
<p>java.net</p>
</li>
<li>
<p>java.io</p>
</li>
<li>
<p>java.math.BigInteger</p>
</li>
<li>
<p>java.math.BigDecimal</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Todas las excepciones son <strong>uncached</strong>, heredan de <strong>RunTimeException</strong> por lo que no es obligatorio procesarlas (ni declararlas (throws), ni capturarlas (try)).</p>
</div>
<div class="paragraph">
<p>Se amplia el concepto de verdadero y falso respecto a java, en groovy las siguientes situaciones daran como resultado "false"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>El valor null</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">El valor null</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Object</span> o3 = <span class="predefined-constant">null</span>
println <span class="string"><span class="delimiter">&quot;</span><span class="content">o3 es </span><span class="inline"><span class="inline-delimiter">${</span>o3<span class="inline-delimiter">}</span></span><span class="content"> e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>o3.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

o3 = <span class="keyword">new</span> <span class="predefined-type">Object</span>()
println <span class="string"><span class="delimiter">&quot;</span><span class="content">o3 es </span><span class="inline"><span class="inline-delimiter">${</span>o3<span class="inline-delimiter">}</span></span><span class="content"> e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>o3.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>El valor 0</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">El valor 0</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> entero = <span class="integer">0</span>
println <span class="string"><span class="delimiter">&quot;</span><span class="content">entero es </span><span class="inline"><span class="inline-delimiter">${</span>entero<span class="inline-delimiter">}</span></span><span class="content"> e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>entero.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

entero = <span class="integer">1</span>
println <span class="string"><span class="delimiter">&quot;</span><span class="content">entero es </span><span class="inline"><span class="inline-delimiter">${</span>entero<span class="inline-delimiter">}</span></span><span class="content"> e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>entero.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>La Cadena de caracteres vacia</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">La Cadena de caracteres vacia</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> cadenaVacia = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
println <span class="string"><span class="delimiter">&quot;</span><span class="content">la cadena esta vacia e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>cadenaVacia.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

cadenaVacia = <span class="string"><span class="delimiter">&quot;</span><span class="content">cualquier texto</span><span class="delimiter">&quot;</span></span>
println <span class="string"><span class="delimiter">&quot;</span><span class="content">la cadena vale '</span><span class="inline"><span class="inline-delimiter">${</span>cadenaVacia<span class="inline-delimiter">}</span></span><span class="content">' e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>cadenaVacia.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Una coleccion vacia o un array de longitud 0</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Una coleccion vacia o un array de longitud 0</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> array = <span class="type">[]</span>
println <span class="string"><span class="delimiter">&quot;</span><span class="content">el array esta vacio, tiene longitud </span><span class="inline"><span class="inline-delimiter">${</span>array.size()<span class="inline-delimiter">}</span></span><span class="content"> e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>array.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

array = [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>,<span class="integer">4</span>,<span class="integer">5</span>]
println <span class="string"><span class="delimiter">&quot;</span><span class="content">el array no esta vacio, tiene longitud </span><span class="inline"><span class="inline-delimiter">${</span>array.size()<span class="inline-delimiter">}</span></span><span class="content"> e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>array.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Un StringBuilder o un StringBuffer vacio</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un StringBuilder o un StringBuffer vacio</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> sb = <span class="keyword">new</span> <span class="predefined-type">StringBuffer</span>();
println <span class="string"><span class="delimiter">&quot;</span><span class="content">StringBuffer esta vacio, tiene longitud </span><span class="inline"><span class="inline-delimiter">${</span>sb.size()<span class="inline-delimiter">}</span></span><span class="content"> e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>sb.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

sb = <span class="keyword">new</span> <span class="predefined-type">StringBuffer</span>().append(<span class="string"><span class="delimiter">&quot;</span><span class="content">Cualquier texto</span><span class="delimiter">&quot;</span></span>);
println <span class="string"><span class="delimiter">&quot;</span><span class="content">StringBuffer no esta vacio, tiene longitud </span><span class="inline"><span class="inline-delimiter">${</span>sb.size()<span class="inline-delimiter">}</span></span><span class="content"> e interpretado como booleano </span><span class="inline"><span class="inline-delimiter">${</span>sb.asBoolean()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Los parentesis para invocar una función son opcionales, salvo que la función no describa parametros.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">void</span> saludar(<span class="predefined-type">String</span> nombre, <span class="predefined-type">String</span> apellido) {
    println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola </span><span class="delimiter">&quot;</span></span> + nombre + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span> + apellido + <span class="string"><span class="delimiter">&quot;</span><span class="content">!!!!</span><span class="delimiter">&quot;</span></span>
}

saludar <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Herrero</span><span class="delimiter">&quot;</span></span>

<span class="type">void</span> saludar(<span class="predefined-type">String</span> nombre) {
    println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola </span><span class="delimiter">&quot;</span></span> + nombre + <span class="string"><span class="delimiter">&quot;</span><span class="content">!!!!</span><span class="delimiter">&quot;</span></span>
}

saludar <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>

<span class="type">void</span> saludar() {
    println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola </span><span class="delimiter">&quot;</span></span> + nombre + <span class="string"><span class="delimiter">&quot;</span><span class="content">!!!!</span><span class="delimiter">&quot;</span></span>
}

saludar()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Al definir las funciones, se puede emplear <strong>def</strong> para los tipos retornados.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">saludador</span> {
    <span class="keyword">def</span> <span class="function">saludar</span> (<span class="predefined-type">String</span> nombre){
        prefijo + nombre + sufijo
    }
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_clases">3.1. Clases</h3>
<div class="paragraph">
<p>Las <strong>Clases</strong> y los <strong>métodos</strong> son <strong>public</strong> por defecto.</p>
</div>
<div class="paragraph">
<p>Los equivalentes en groovy a los POJO de Java, son los POGO</p>
</div>
<div class="paragraph">
<p>Al definir los métodos, hay que declarar el retorno, pero se puede emplear <strong>def</strong> para indicar que puede ser cualquiera.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">saludador</span> {
        <span class="keyword">def</span> <span class="function">saludar</span> (<span class="predefined-type">String</span> nombre){
                prefijo + nombre + sufijo
        }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_contructores">3.1.1. Contructores</h4>
<div class="paragraph">
<p>Se generan constructores por defecto al declarar atributos sin moficiador de acceso, que son invocables enviando un <strong>map</strong> para pasar los parametros.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Persona</span> {
    <span class="keyword">def</span> nombre
    <span class="keyword">def</span> edad
}

<span class="keyword">def</span> persona = <span class="keyword">new</span> Person(<span class="key">nombre</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Juan</span><span class="delimiter">&quot;</span></span>, <span class="key">edad</span>: <span class="integer">50</span>)

<span class="keyword">def</span> mapa = [<span class="key">nombre</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Juan</span><span class="delimiter">&quot;</span></span>, <span class="key">edad</span>: <span class="integer">50</span>]
<span class="keyword">def</span> otraPersona = <span class="keyword">new</span> Person(mapa)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se pueden asignar valores por defecto a los parametros de un contructor</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Persona</span> {
    <span class="keyword">def</span> nombre
    <span class="keyword">def</span> edad
    Persona(<span class="predefined-type">String</span> nombre=<span class="string"><span class="delimiter">'</span><span class="content">Victor</span><span class="delimiter">'</span></span>, <span class="type">int</span> edad=<span class="integer">40</span>) {
        <span class="local-variable">this</span>.nombre = nombre
        <span class="local-variable">this</span>.edad = edad
    }
}

<span class="keyword">def</span> p = <span class="keyword">new</span> Persona()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los parámetros opcionales deben aparecer después de los parámetros obligatorios</p>
</div>
<div class="paragraph">
<p>De existir dos parametros del mismo tipo, al invocar el contructor indicando uno de ellos, siempre se asignará el valor al mas a la izquierda</p>
</div>
</div>
<div class="sect3">
<h4 id="_decontructores_extractores">3.1.2. Decontructores (Extractores)</h4>
<div class="paragraph">
<p>Se pueden extraer los atributos de una clase siempre que sean accesibles hacia variables independientes, con una asignacion multiple</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> coordinates = <span class="keyword">new</span> Coordinates(<span class="key">latitude</span>: <span class="float">43.23</span>, <span class="key">longitude</span>: <span class="float">3.67</span>)

<span class="keyword">def</span> (la, lo) = coordinates

<span class="keyword">assert</span> la == <span class="float">43.23</span>
<span class="keyword">assert</span> lo == <span class="float">3.67</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Será necesario definir el método <strong>getAt(int)</strong> en la clase dado que será el encargado de extraer la informacion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Coordinates</span>{
    <span class="keyword">def</span> latitude
    <span class="keyword">def</span> longitude
    <span class="keyword">def</span> <span class="function">getAt</span>(<span class="type">int</span> i){
        <span class="keyword">switch</span> (i){
            <span class="keyword">case</span> <span class="integer">0</span>: <span class="keyword">return</span> latitude
            <span class="keyword">case</span> <span class="integer">1</span>: <span class="keyword">return</span> longitude
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_atributos">3.1.3. Atributos</h4>
<div class="paragraph">
<p>Los Atributos son <strong>private</strong> por defecto.</p>
</div>
<div class="paragraph">
<p>Es necesario declarar los atributos, aunque no su tipo, ya que se puede emplear la palabra reservada <strong>def</strong>, como tipo generico.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">saludador</span> {
    <span class="keyword">def</span> prefijo = <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola </span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si los atributos de clase son declarados sin modificadores de acceso, se genera un campo privado con un getter y un setter públicos, aunque la forma de accederlo es como si se accediese al campo.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="scala">class Persona {
    String nombre
    int edad
}

def persona = new Persona()

persona.edad = 12

persona.nombre = &quot;Victor&quot;

println(&quot;La persona tiene nombre = $persona.nombre y edad $persona.edad&quot;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si el atributo de clase es declarado con un modificador de acceso (public, private o protected), entonces se genera unicamente el atributo, no sus getter y setter y se puede acceder a el siguiendo las reglas definidas por el modificador de acceso.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Cliente</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> nombre
    <span class="directive">protected</span> <span class="type">int</span> edad
}

<span class="keyword">def</span> cliente = <span class="keyword">new</span> Cliente()

<span class="comment">//No accesible</span>
<span class="comment">//cliente.nombre</span>

<span class="comment">//Accesible directamente como atributo, no a traves del getter/setter</span>
cliente.edad = <span class="integer">12</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si es declarada como final, entonces el campo privado es creado como final y no se genera un setter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Padre</span> {
    <span class="directive">final</span> <span class="predefined-type">String</span> nombre = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
    <span class="directive">final</span> <span class="type">int</span> edad = <span class="integer">1</span>
}

<span class="keyword">def</span> padre = <span class="keyword">new</span> Padre()

<span class="comment">//No se pueden establecer porque son final</span>
<span class="comment">//padre.nombre = &quot;&quot;</span>
<span class="comment">//padre.edad = 45</span>

<span class="comment">//Se accede a traves del getter</span>
println(padre.nombre)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy se reserva unos privilegios especiales sobre los atributos, pudiendo accederlos independientemente de su modificador de acceso</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Cliente</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> nombre
    <span class="directive">protected</span> <span class="type">int</span> edad
}

<span class="keyword">def</span> cliente = <span class="keyword">new</span> Cliente()

cliente.@nombre = <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>
println cliente.@nombre</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_getter_y_setter">3.1.4. Getter y Setter</h4>
<div class="ulist">
<ul>
<li>
<p>Se pueden redefinir los getter y setter.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Libro</span> {
    <span class="predefined-type">String</span> titulo
    <span class="predefined-type">String</span> autor

    <span class="predefined-type">String</span> getTitulo() {
        println <span class="string"><span class="delimiter">&quot;</span><span class="content">Empleando el getter redefinido</span><span class="delimiter">&quot;</span></span>
        <span class="keyword">return</span> titulo.toUpperCase()
    }

    <span class="keyword">def</span> <span class="function">setAutor</span>(<span class="predefined-type">String</span> autor) {
        println <span class="string"><span class="delimiter">&quot;</span><span class="content">Empleando el setter redefinido</span><span class="delimiter">&quot;</span></span>
        <span class="local-variable">this</span>.autor = autor.toLowerCase()
    }
}

<span class="keyword">def</span> libro = <span class="keyword">new</span> Libro()
libro.titulo = <span class="string"><span class="delimiter">&quot;</span><span class="content">Los pilares de la Tierra</span><span class="delimiter">&quot;</span></span>
libro.autor = <span class="string"><span class="delimiter">&quot;</span><span class="content">Ken Follet</span><span class="delimiter">&quot;</span></span>

println <span class="string"><span class="delimiter">&quot;</span><span class="content">El libro </span><span class="inline"><span class="inline-delimiter">${</span>libro.titulo<span class="inline-delimiter">}</span></span><span class="content"> fue escrito por </span><span class="inline"><span class="inline-delimiter">${</span>libro.autor<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_strings">3.2. Strings</h3>
<div class="paragraph">
<p>Se pueden definir empleando comillas dobles y simples.</p>
</div>
<div class="paragraph">
<p>Las simples representan os String tradicionales de java.</p>
</div>
<div class="paragraph">
<p>Las dobles representan los <strong>GString</strong>, que son Strings que son capaces de resolver expresiones definidas con <strong>${}</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> nombre = <span class="string"><span class="delimiter">'</span><span class="content">Victor</span><span class="delimiter">'</span></span>
<span class="keyword">def</span> mensaje = <span class="string"><span class="delimiter">&quot;</span><span class="content">Buenos dias </span><span class="inline"><span class="inline-delimiter">${</span>nombre<span class="inline-delimiter">}</span></span><span class="content">, hoy es </span><span class="inline"><span class="inline-delimiter">${</span><span class="keyword">new</span> <span class="predefined-type">Date</span>()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
println mensaje</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se pueden definir GString multilinea denominados <strong>Heredocs</strong>, que permiten también mezclar comillas simples y dobles en su interior.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> nombre = <span class="string"><span class="delimiter">'</span><span class="content">Victor</span><span class="delimiter">'</span></span>
<span class="predefined-type">String</span> multilinea = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">Un string de
    varias líneas
    con &quot;comillas dobles&quot; y 'comillas simples'
    y con acceso a variables </span><span class="inline"><span class="inline-delimiter">${</span>nombre<span class="inline-delimiter">}</span></span><span class="content">
</span><span class="delimiter">&quot;&quot;&quot;</span></span>
print multilinea</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_closures">4. Closures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Forma reducida de definicion de funciones anonimas que se pueden asignar a variables y se pueden pasar por parametros.</p>
</div>
<div class="paragraph">
<p>Las closures son de tipo <strong>groovy.lang.Closure</strong></p>
</div>
<div class="listingblock">
<div class="title">Definicon de Closure</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">{ println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola Mundo!</span><span class="delimiter">&quot;</span></span> }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Asignacion a una variable</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> clos = { println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola Mundo!</span><span class="delimiter">&quot;</span></span> }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Invocacion de Closure</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">clos()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para invocar las closures, se puede emplear el método  <strong>call()</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">clos.call()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para la definición de parametros, basta con incluir el operador <strong>&#8594;</strong>. Si varios parametros se declaran separados por comas. Se puede o no espedificar el tipo de los parametros.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> clos = { b -&gt; println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola </span><span class="inline"><span class="inline-delimiter">$</span>b</span><span class="delimiter">&quot;</span></span> }
clos(<span class="string"><span class="delimiter">'</span><span class="content">Victor</span><span class="delimiter">'</span></span>)<span class="error">​</span>

clos = { <span class="predefined-type">String</span> x, <span class="type">int</span> y -&gt; println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola </span><span class="inline"><span class="inline-delimiter">${</span>x<span class="inline-delimiter">}</span></span><span class="content"> el entero es </span><span class="inline"><span class="inline-delimiter">${</span>y<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>}
clos(<span class="string"><span class="delimiter">'</span><span class="content">Victor</span><span class="delimiter">'</span></span>, <span class="integer">12</span>)<span class="error">​</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Su cuerpo puede tener varias sentencias</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">{ reader -&gt;
    <span class="keyword">def</span> line = reader.readLine()
    line.trim()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Las closures pueden retornar objetos</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> devolverAleatorio = {<span class="predefined-type">Math</span>.random()}
println <span class="string"><span class="delimiter">&quot;</span><span class="content">Numero aleatorio </span><span class="delimiter">&quot;</span></span> + devolverAleatorio()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dentro de las Closures se puede referenciar a variables definidas fuera de la closure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> prefijo = <span class="string"><span class="delimiter">'</span><span class="content">Hola </span><span class="delimiter">'</span></span>
<span class="keyword">def</span> saludar = { nombre -&gt; prefijo + nombre }
println saludar <span class="string"><span class="delimiter">'</span><span class="content">Victor</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Por defecto los clousures tienen una variable interna que es <strong>it</strong>, al declara una propia esta desapareceria</p>
</div>
<div class="listingblock">
<div class="title">Aunque la Closure no define parametros de entrada, se le pueden pasar y recoger con it</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> greeting = { <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, </span><span class="inline"><span class="inline-delimiter">$</span><span class="local-variable">it</span></span><span class="content">!</span><span class="delimiter">&quot;</span></span> }
<span class="keyword">assert</span> greeting(<span class="string"><span class="delimiter">'</span><span class="content">Patrick</span><span class="delimiter">'</span></span>) == <span class="string"><span class="delimiter">'</span><span class="content">Hello, Patrick!</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Recorremos la <strong>lista</strong> y por cada elemento ejecutamos el closure, siendo <strong>it</strong> el elemento</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> lista = [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>,<span class="integer">4</span>,<span class="integer">5</span>]
<span class="keyword">def</span> imprimeCl = {println <span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="inline"><span class="inline-delimiter">$</span><span class="local-variable">it</span></span><span class="delimiter">&quot;</span></span>}
lista.each  imprimeCl</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_paso_por_parametros">4.1. Paso por parametros</h3>
<div class="paragraph">
<p>Las Closures se pueden pasar por parametro a otras funciones para invocarlas internamente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">//Definicion de método que acepta Closure por parametro</span>
<span class="keyword">def</span> <span class="function">funcionAleatorio</span> (<span class="predefined-type">String</span> parametro, Closure closure){
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Este es el parametro recibido: </span><span class="inline"><span class="inline-delimiter">$</span>parametro</span><span class="content"> y este el resultado de invocar la Closure: </span><span class="inline"><span class="inline-delimiter">${</span>closure()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
}

<span class="comment">//Definicion de Closure</span>
<span class="keyword">def</span> devolverAleatorio = {<span class="predefined-type">Math</span>.random()}

println funcionAleatorio(<span class="string"><span class="delimiter">&quot;</span><span class="content">El dato enviado a la funcion</span><span class="delimiter">&quot;</span></span>, devolverAleatorio)</code></pre>
</div>
</div>
<div class="paragraph">
<p>En el API es habitual encontrarse con métodos que aceptan una serie de parametros y finalmente una Closure, y en vez de invocar ese método de forma tradicional, se puede encontrar algo como lo siguiente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> <span class="function">metodo</span>( <span class="predefined-type">String</span> parametro, Closure algoritmo) {
    algoritmo(parametro)
}

metodo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hola Mundo!!!!</span><span class="delimiter">&quot;</span></span>){ println <span class="local-variable">it</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La sintaxis de la invocacion es similar a la de definición de funcion, pero no se declaran parametros, sino que se pasan</p>
</div>
</div>
<div class="sect2">
<h3 id="_estrategia_de_delegacion">4.2. Estrategia de Delegacion</h3>
<div class="paragraph">
<p>Permite acceder a variables en distintos ambitos de las Closures.</p>
</div>
<div class="paragraph">
<p>Se definen tres variables internas dentro de las Closures</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>this</strong>: Objeto de tipo Clase donde la closure es definida</p>
</li>
<li>
<p><strong>owner</strong>: Objeto donde la closure es definida, puede ser otra Closure. Generalmente es igual a <strong>this</strong>, salvo que la Closure se  defina dentro de otra Closure.</p>
</li>
<li>
<p><strong>delegate</strong>: Objeto que puede ser redefinido por el usuario, que la Closure emplea. Su valor por defecto es <strong>owner</strong>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> objeto = <span class="keyword">new</span> ClaseContenedora()

objeto.closureDentroDeClase.delegate = <span class="string"><span class="delimiter">&quot;</span><span class="content">Juan</span><span class="delimiter">&quot;</span></span>

objeto.closureDentroDeClase()


<span class="type">class</span> <span class="class">ClaseContenedora</span> {

    <span class="keyword">def</span> closureDentroDeClase = {
        <span class="keyword">def</span> closureDentroDeClosure = {
            println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Resultado dentro de closureDentroDeClosure</span><span class="delimiter">&quot;</span></span>)
            <span class="comment">//Dá la clase contenedora</span>
            println <span class="local-variable">this</span>
            <span class="comment">//Dá el objeto contenedor, en este caso *closureDentroDeClase*</span>
            println owner
            <span class="comment">//Dá el objeto delegate definido u owner en caso de no definirse</span>
            println delegate
        }

        closureDentroDeClosure.delegate = <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>

        closureDentroDeClosure()

        println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Resultado dentro de closureDentroDeMetodoDeClase</span><span class="delimiter">&quot;</span></span>)
        <span class="comment">//Dá la clase contenedora</span>
        println <span class="local-variable">this</span>
        <span class="comment">//Dá el objeto contenedor, en este caso la clase contenedora</span>
        println owner
        <span class="comment">//Dá el objeto delegate definido u owner en caso de no definirse</span>
        println delegate
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los <strong>delegados</strong> ofrecen dos caracteristicas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La opcion de cambiar, por configuracion del objeto Closure, un objeto que se emplea internamente en un monmento distinto a la de la invocación.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Ejemplo que define un delegado que hace uso de una variable <strong>name</strong> que no existe en su ambito, pero que establece un <strong>delegate</strong> que si la define, por lo que la emplea</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Cliente</span> {
    <span class="predefined-type">String</span> name
}

<span class="comment">//Definicion de objeto con caractristica *name*</span>
<span class="keyword">def</span> cliente = <span class="keyword">new</span> Cliente(<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Igor</span><span class="delimiter">'</span></span>)

<span class="comment">//Definicion de una Closue que hace uso de una varaible *name* que no existe en su ambito</span>
<span class="keyword">def</span> cl = { name.toUpperCase() }

<span class="comment">//Asociacion como delegado del objeto Cliente a la Closure, sin esta linea la Closure falla</span>
cl.delegate = cliente
<span class="keyword">assert</span> cl() == <span class="string"><span class="delimiter">'</span><span class="content">IGOR</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Establecer una estrategia de resolución de variables dentro de la Closure basada en la eleccion de <strong>owner</strong> o <strong>delegate</strong>, que permite referenciar a variables en el cuerpo de la Closure sin necesidad de indicar su propietario. Las posibles estrategias son</p>
<div class="ulist">
<ul>
<li>
<p><strong>Closure.OWNER_FIRST</strong>: Es la estrategia por defecto, consiste en buscar la propiedad o el metodo primero en el objeto <strong>owner</strong> y si este lo tiene, es el que se usa, de no tenerlo, se hace uso del objeto <strong>delegate</strong>.</p>
</li>
<li>
<p><strong>Closure.DELEGATE_FIRST</strong>: Al contrario que el anterior, primero busca en <strong>delegate</strong> y luego en <strong>owner</strong>.</p>
</li>
<li>
<p><strong>Closure.OWNER_ONLY</strong>: Busca solo en el <strong>owner</strong>.</p>
</li>
<li>
<p><strong>Closure.DELEGATE_ONLY</strong>: Buscasolo en el <strong>delegate</strong>.</p>
</li>
<li>
<p><strong>Closure.TO_SELF</strong>: Busca solo en el ambito de la clase <strong>Closure</strong>, solo se util al definir subclases de <strong>Closure</strong>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {
    <span class="predefined-type">String</span> name
    <span class="keyword">def</span> pretty = { <span class="string"><span class="delimiter">&quot;</span><span class="content">My name is </span><span class="inline"><span class="inline-delimiter">$</span>name</span><span class="delimiter">&quot;</span></span> }
    <span class="predefined-type">String</span> toString() {
        pretty()
    }
}
<span class="type">class</span> <span class="class">Thing</span> {
    <span class="predefined-type">String</span> name
}

<span class="keyword">def</span> p = <span class="keyword">new</span> Person(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Sarah</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> t = <span class="keyword">new</span> Thing(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Teapot</span><span class="delimiter">'</span></span>)

<span class="keyword">assert</span> p.toString() == <span class="string"><span class="delimiter">'</span><span class="content">My name is Sarah</span><span class="delimiter">'</span></span>
p.pretty.delegate = t
<span class="keyword">assert</span> p.toString() == <span class="string"><span class="delimiter">'</span><span class="content">My name is Sarah</span><span class="delimiter">'</span></span>

p.pretty.resolveStrategy = Closure.DELEGATE_FIRST
<span class="keyword">assert</span> p.toString() == <span class="string"><span class="delimiter">'</span><span class="content">My name is Teapot</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_currying">4.3. Currying</h3>
<div class="paragraph">
<p>Permite predefinir parametros de una función, simplificando la invocacion de la función ya que no deberá pasar todos los parametros, es una forma de reutilizar la definicion de parametros para varias ejecuciones de la misma funcion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> multiplicar = { numero1, numero2 -&gt;
        print numero1 + <span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span> + numero2 + <span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span>
        <span class="comment">//recordemos que se devuleve la ultima sentencia</span>
        numero1 * numero2
}
<span class="keyword">def</span> doble = multiplicar.curry(<span class="integer">2</span>)<span class="comment">//precargamos el valor más a la izquierda</span>
<span class="keyword">def</span> triple = multiplicar.rcurry(<span class="integer">3</span>)<span class="comment">//precargamos el valor más a la derecha</span>
<span class="keyword">def</span> tresXcuatro = multiplicar.curry(<span class="integer">3</span>,<span class="integer">4</span>)
println <span class="string"><span class="delimiter">&quot;</span><span class="content">2 x 7: </span><span class="delimiter">&quot;</span></span> + doble(<span class="integer">7</span>)
println <span class="string"><span class="delimiter">&quot;</span><span class="content">7 x 3 </span><span class="delimiter">&quot;</span></span> + triple(<span class="integer">7</span>)
println <span class="string"><span class="delimiter">&quot;</span><span class="content">3 x 4 = </span><span class="delimiter">&quot;</span></span> + tresXcuatro()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_memoize_cache">4.4. Memoize (Cache)</h3>
<div class="paragraph">
<p>Método de las <strong>Closures</strong> que permite cachear los resultados de las ivocaciones a las <strong>Closures</strong>, es especialmente interesante cuando se emplea recursividad y del todo fiable cuando se programa funcionalmente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">init = <span class="keyword">new</span> <span class="predefined-type">Date</span>().getTime()

<span class="keyword">def</span> fib
fib = { <span class="type">long</span> n -&gt; n&lt;<span class="integer">2</span>?n:fib(n-<span class="integer">1</span>)+fib(n-<span class="integer">2</span>) }
println fib(<span class="integer">25</span>) <span class="comment">//== 610 // slow!</span>

postLow = <span class="keyword">new</span> <span class="predefined-type">Date</span>().getTime()

println (<span class="string"><span class="delimiter">&quot;</span><span class="content">La operacion lenta tarda </span><span class="inline"><span class="inline-delimiter">${</span>postLow- init<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)

fib = { <span class="type">long</span> n -&gt; n&lt;<span class="integer">2</span>?n:fib(n-<span class="integer">1</span>)+fib(n-<span class="integer">2</span>) }.memoize()
println fib(<span class="integer">25</span>) <span class="comment">//== 75025 // fast!</span>
println (<span class="string"><span class="delimiter">&quot;</span><span class="content">La operacion rapida tarda </span><span class="inline"><span class="inline-delimiter">${</span><span class="keyword">new</span> <span class="predefined-type">Date</span>().getTime() - postLow<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_composicion">4.5. Composicion</h3>
<div class="paragraph">
<p>Permite agrupar las logicas de dos Closures en una nueva, se emplean los operadores <strong>&lt;&lt;</strong> y <strong>&gt;&gt;</strong>, dependiendo del orden de ejecución de las <strong>Closures</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>&lt;&lt;</strong>: Primero se ejecuta la que se indique en la derecha de la expresion</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> plus2  = { <span class="local-variable">it</span> + <span class="integer">2</span> }
<span class="keyword">def</span> times3 = { <span class="local-variable">it</span> * <span class="integer">3</span> }

<span class="comment">//Componiendo una nueva funcion que realiza (it * 3) + 2</span>
<span class="keyword">def</span> times3plus2 = plus2 &lt;&lt; times3
<span class="keyword">assert</span> times3plus2(<span class="integer">3</span>) == <span class="integer">11</span>
<span class="keyword">assert</span> times3plus2(<span class="integer">4</span>) == plus2(times3(<span class="integer">4</span>))</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>&gt;&gt;</strong>: Primero se ejecuta la que se indique en la izquierda de la expresion</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">//Componiendo una nueva funcion que realiza (it + 2) * 3</span>
<span class="keyword">def</span> plus2times3 = plus2 &gt;&gt; times3
<span class="keyword">assert</span> plus2times3(<span class="integer">3</span>) == <span class="integer">15</span>
<span class="keyword">assert</span> plus2times3(<span class="integer">5</span>) == times3(plus2(<span class="integer">5</span>))</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trampoline">4.6. Trampoline</h3>
<div class="paragraph">
<p>Los algoritmos recursivos están restringidos por el tamaño del stack, en el stack se almacena la pila de llamadas, cuantas mas llamadas, mas ocupa en el stack.</p>
</div>
<div class="paragraph">
<p>Para evitar esta dependencia, es importante no necesitar volver al método invocante, es decir no dejar abierta la operación que se inicio al invocar un método, sino resolverlo y descartar la referencia a dicho método, es decir en vez de realizar una pila de llamadas recursiveas, ir realizando llamadas al método, obteniendo respuesta y descartando su referencia en la pila, esto es lo que hace <strong>trampoline</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> factorial

<span class="comment">// Aproximacion pura del factorial con recursion, se va dejando trabajo por hacer en cada</span>
<span class="comment">// llamada al método, en este caso la operacion de multiplicar, por lo que no hay mas</span>
<span class="comment">// remedio que volver al método</span>

factorial = { <span class="predefined-type">BigInteger</span> n -&gt;
    <span class="keyword">if</span> (n == <span class="integer">1</span>) <span class="keyword">return</span> n
    n * factorial(n - <span class="integer">1</span>)
}

println factorial(<span class="integer">10</span>)  <span class="comment">// Con 1000 Stack Overflow</span>

<span class="comment">// Primera mejora para evitar tener que volver al método, ya que la operacion se realiza</span>
<span class="comment">// antes de la invocacion recursiva gracias al acumulador, pero se sigue retornando a cada</span>
<span class="comment">// invocación del método</span>

factorial = { <span class="predefined-type">Integer</span> n, <span class="predefined-type">BigInteger</span> acc = <span class="integer">1</span> -&gt;
    <span class="keyword">if</span> (n == <span class="integer">1</span>) <span class="keyword">return</span> acc
    factorial(n - <span class="integer">1</span>, n * acc)
}
println factorial(<span class="integer">10</span>)  <span class="comment">// Con 1000 Stack Overflow, ya que la estructura de llamadas</span>
<span class="comment">// sigue existiendo y es muy grande, hay que mantener la referencia a todas las funciones,</span>
<span class="comment">// aunque sea para asignar su resultado a la anterior</span>

<span class="comment">// Segunda aproximacion empleando *trampoline*, que sustituye en la pia de llamadas la</span>
<span class="comment">// invocacion ya terminada, siendo el resultado de la invocacion directamente la de la</span>
<span class="comment">// ultima invocacion</span>

factorial = { <span class="predefined-type">Integer</span> n, <span class="predefined-type">BigInteger</span> acc = <span class="integer">1</span> -&gt;
    <span class="keyword">if</span> (n == <span class="integer">1</span>) <span class="keyword">return</span> acc
    factorial.trampoline(n - <span class="integer">1</span>, n * acc)
}.trampoline()

println factorial(<span class="integer">1000</span>)  <span class="comment">// It works</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_empleo_con_interfaces">4.7. Empleo con Interfaces</h3>
<div class="paragraph">
<p>Se puede implementar una <strong>Interface</strong> con una <strong>Closure</strong>, para ello se emplea la palabra reservada <strong>as</strong>.</p>
</div>
<div class="paragraph">
<p>Se distinguira entre:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Interfaces funcionales</strong>, aquellas con un unico método. donde simplemente la <strong>Closure</strong> definira el cuerpo de dicho método.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">En este ejemplo, la variable <strong>miSaludar</strong> no apunta a la <strong>Closure</strong>, sino a un objeto de tipo <strong>Saludar</strong>, siendo la implementacion del método <strong>saludo()</strong> la que describe la <strong>Closure</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">public</span> <span class="type">interface</span> Saludar {
        <span class="type">void</span> saludo();
}

<span class="keyword">def</span> miSaludar = {
        println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola mundo desde closure</span><span class="delimiter">&quot;</span></span>
} <span class="keyword">as</span> Saludar

miSaludar.saludo()</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Interfaces con varios métodos, en este caso no se necesita una unica <strong>Closure</strong>, sino varias, y es necesario asignar cada <strong>Closure</strong> al método de la interface, para ello se ha de definir un <strong>Array</strong> de elementos <strong>key,value</strong> (maps), donde las <strong>key</strong> son los nombres de los métodos de la interface y ls <strong>value</strong> las <strong>Closures</strong> que los implementan.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">public</span> <span class="type">interface</span> Imprimir {
        <span class="type">void</span> imprimirPantalla(<span class="predefined-type">String</span> s);
        <span class="type">void</span> imprimirFichero(<span class="predefined-type">String</span> s, <span class="predefined-type">String</span> fichero);
}

Imprimir miImprimir = [
        <span class="key">imprimirFichero</span>: { s, fichero -&gt;
           println <span class="string"><span class="delimiter">&quot;</span><span class="content">Imprimiendo el contenido </span><span class="inline"><span class="inline-delimiter">${</span>s<span class="inline-delimiter">}</span></span><span class="content"> dentro del fichero </span><span class="inline"><span class="inline-delimiter">${</span>fichero<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
        },
        <span class="key">imprimirPantalla</span>: { s -&gt;
                println <span class="string"><span class="delimiter">&quot;</span><span class="content">Imprimiendo el contenido </span><span class="inline"><span class="inline-delimiter">$</span>s</span><span class="content"> en la pantalla</span><span class="delimiter">&quot;</span></span>
        },
] <span class="keyword">as</span> Imprimir

miImprimir.imprimirFichero(<span class="string"><span class="delimiter">&quot;</span><span class="content">este texto</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">fichero.txt</span><span class="delimiter">&quot;</span></span>)
miImprimir.imprimirPantalla(<span class="string"><span class="delimiter">&quot;</span><span class="content">otro texto</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_with">4.8. With</h3>
<div class="paragraph">
<p>Método que permite asociar una Closure de inicializacion a todos los objetos, pudiendo en la Closure establece caracteristicas o invocar métodos del objeto.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Persona</span> {
        <span class="keyword">def</span> nombre
        <span class="keyword">def</span> apellidos
        <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; hobbies = <span class="type">[]</span>;

        <span class="keyword">def</span> <span class="function">addHobbie</span>(<span class="predefined-type">String</span> s){
                hobbies &lt;&lt; s;
        }
        <span class="keyword">def</span> <span class="function">presentarse</span>(){
                println <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola soy </span><span class="inline"><span class="inline-delimiter">$</span>nombre</span><span class="content"> </span><span class="inline"><span class="inline-delimiter">$</span>apellidos</span><span class="delimiter">&quot;</span></span>
                println <span class="string"><span class="delimiter">&quot;</span><span class="content">Mis hobbies son </span><span class="inline"><span class="inline-delimiter">$</span>hobbies</span><span class="delimiter">&quot;</span></span>
        }
}

<span class="keyword">def</span> persona = <span class="keyword">new</span> Persona()
persona.with {
        nombre = <span class="string"><span class="delimiter">&quot;</span><span class="content">Pepe</span><span class="delimiter">&quot;</span></span>
        apellidos = <span class="string"><span class="delimiter">&quot;</span><span class="content">Teja</span><span class="delimiter">&quot;</span></span>
        addHobbie <span class="string"><span class="delimiter">&quot;</span><span class="content">Mus</span><span class="delimiter">&quot;</span></span>
        addHobbie <span class="string"><span class="delimiter">&quot;</span><span class="content">Tenis</span><span class="delimiter">&quot;</span></span>
        presentarse();
}
println persona.nombre

<span class="comment">//Se puede aplicar a cualquier objeto del API</span>
<span class="keyword">def</span> sb = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>()
sb.with {
        append <span class="string"><span class="delimiter">'</span><span class="content">Escribo cosas </span><span class="delimiter">'</span></span>
        append <span class="string"><span class="delimiter">'</span><span class="content">y las voy concatenando </span><span class="delimiter">'</span></span>
        append <span class="string"><span class="delimiter">'</span><span class="content">en un stringBuilder()</span><span class="delimiter">'</span></span>
}

println sb.toString()</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_metaprogramacion">5. Metaprogramacion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La metaprogramacion consiste en alterar la definicion de los tipos</p>
</div>
<div class="paragraph">
<p>Existen dos tipos de metaprogramacion en Groovy</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Runtime</p>
</li>
<li>
<p>Compiletime</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_reflection">5.1. Reflection</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println <span class="predefined-type">String</span>.class
<span class="predefined-type">String</span>.interfaces.each { println <span class="local-variable">it</span> }
<span class="predefined-type">String</span>.constructors.each { println <span class="local-variable">it</span> }
<span class="predefined-type">String</span>.methods.each { println <span class="local-variable">it</span> }

<span class="keyword">def</span> s = <span class="keyword">new</span> <span class="predefined-type">String</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cadena de texto</span><span class="delimiter">&quot;</span></span>)
s.properties.each { propiedad -&gt;
    println propiedad
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_runtime">5.2. Runtime</h3>
<div class="paragraph">
<p>Groovy, añade a todos los objetos una caracteristica <strong>metaClass</strong>, que es la encargada de resolver el codigo a ejecutar en el proceso de invocacion de métodos a través de <strong>MetaClass#invokeMethod</strong>.</p>
</div>
<div class="paragraph">
<p>Por defecto se emplea una implementacion de <strong>MetaClassImpl</strong>, que describe un ciclo de algoritmo que consiste en</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Buscar el método definido en la clase.</p>
</li>
<li>
<p>Invocar <strong>methodMissing</strong> del objeto</p>
</li>
<li>
<p>Finalmente <strong>GroovyObject#invokeMethod</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Se pueden definir otras implementaciones de la interface <strong>MetaClass</strong> y asignarlas a las clases y a los objetos. El API ofrece algunas implmentaciones como MetaClassImpl, DelegatingMetaClass, ExpandoMetaClass, ProxyMetaClass, etc.</p>
</div>
<div class="paragraph">
<p>Antes de emplear una nueva instancia de <strong>MetaClass</strong> habrá que invocar su método <strong>groovy.lang.MetaClass#initialize()</strong></p>
</div>
<div class="sect3">
<h4 id="_delegatingmetaclass">5.2.1. DelegatingMetaClass</h4>
<div class="paragraph">
<p>Se emplea si lo que se necesita es añadir algo de funcionalidad a la implementacion de referencia (decorar) ya que se dispone de la referencia a <strong>super</strong></p>
</div>
<div class="listingblock">
<div class="title">Ejemplo en el que se emplea la implementacion de referencia, pero que sobre su resultado aplica un transformacion a mayusculas.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Foo</span> { <span class="keyword">def</span> <span class="function">bar</span>() { <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span> } }

<span class="type">class</span> <span class="class">MyFooMetaClass</span> <span class="directive">extends</span> DelegatingMetaClass {
  MyFooMetaClass(MetaClass metaClass) { <span class="local-variable">super</span>(metaClass) }
  MyFooMetaClass(<span class="predefined-type">Class</span> theClass) { <span class="local-variable">super</span>(theClass) }

  <span class="predefined-type">Object</span> invokeMethod(<span class="predefined-type">Object</span> object, <span class="predefined-type">String</span> methodName, <span class="predefined-type">Object</span><span class="type">[]</span> args) {
     <span class="keyword">def</span> result = <span class="local-variable">super</span>.invokeMethod(object,methodName.toLowerCase(), args)
     result.toUpperCase();
  }
}


<span class="keyword">def</span> mc =  <span class="keyword">new</span> MyFooMetaClass(Foo.metaClass)
mc.initialize()

Foo.metaClass = mc
<span class="keyword">def</span> f = <span class="keyword">new</span> Foo()

<span class="keyword">assert</span> f.BAR() == <span class="string"><span class="delimiter">&quot;</span><span class="content">BAR</span><span class="delimiter">&quot;</span></span> <span class="comment">// the new metaclass routes .BAR() to .bar() and uppercases the result</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metaclass_por_defecto">5.2.2. MetaClass por defecto</h4>
<div class="paragraph">
<p>Se puede cambiar la metaclase por defecto para un tipo, creando una clase con un nombre particular en un paquete particular. Por ejemplo para <strong>java.lang.Integer</strong>, será necesario definir la clase <strong>IntegerMetaClass</strong> en el paquete <strong>groovy.runtime.metaclass.java.lang</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// file: IntegerMetaClass.groovy</span>
<span class="keyword">package</span> groovy.runtime.metaclass.java.lang;

<span class="type">class</span> <span class="class">IntegerMetaClass</span> <span class="directive">extends</span> DelegatingMetaClass {
  IntegerMetaClass(MetaClass metaClass) { <span class="local-variable">super</span>(metaClass) }
  IntegerMetaClass(<span class="predefined-type">Class</span> theClass) { <span class="local-variable">super</span>(theClass) }
  <span class="predefined-type">Object</span> invokeMethod(<span class="predefined-type">Object</span> object, <span class="predefined-type">String</span> name, <span class="predefined-type">Object</span><span class="type">[]</span> args) {
    <span class="keyword">if</span> (name =~ <span class="regexp"><span class="delimiter">/</span><span class="content">isBiggerThan</span><span class="delimiter">/</span></span>) {
      <span class="keyword">def</span> other = name.split(<span class="regexp"><span class="delimiter">/</span><span class="content">isBiggerThan</span><span class="delimiter">/</span></span>)[<span class="integer">1</span>].toInteger()
      object &gt; other
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> <span class="local-variable">super</span>.invokeMethod(object,name, args);
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metaclass_por_instancia">5.2.3. MetaClass por instancia</h4>
<div class="paragraph">
<p>Se puede asociar una <strong>metaclass</strong> a una instancia en particular, por lo que es posible que diferentes instancias de la misma clase, tengan distintas <strong>metaclass</strong> asociadas.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Foo</span> { <span class="keyword">def</span> <span class="function">bar</span>() { <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span> }}

<span class="type">class</span> <span class="class">FooMetaClass</span> <span class="directive">extends</span> DelegatingMetaClass {
  FooMetaClass(MetaClass metaClass) { <span class="local-variable">super</span>(metaClass) }
  <span class="predefined-type">Object</span> invokeMethod(<span class="predefined-type">Object</span> object, <span class="predefined-type">String</span> name, <span class="predefined-type">Object</span><span class="type">[]</span> args) {
      <span class="local-variable">super</span>.invokeMethod(object,name,args).toUpperCase()
  }
}

<span class="keyword">def</span> f1 = <span class="keyword">new</span> Foo()
<span class="keyword">def</span> f2 = <span class="keyword">new</span> Foo()
f2.metaClass = <span class="keyword">new</span> FooMetaClass(f2.metaClass)

<span class="keyword">assert</span> f1.bar() == <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>
<span class="keyword">assert</span> f2.bar() == <span class="string"><span class="delimiter">&quot;</span><span class="content">BAR</span><span class="delimiter">&quot;</span></span>
<span class="keyword">assert</span> f1.metaClass =~ <span class="regexp"><span class="delimiter">/</span><span class="content">MetaClassImpl</span><span class="delimiter">/</span></span>
<span class="keyword">assert</span> f2.metaClass =~ <span class="regexp"><span class="delimiter">/</span><span class="content">FooMetaClass</span><span class="delimiter">/</span></span>
<span class="keyword">assert</span> f1.class.toString() == <span class="string"><span class="delimiter">&quot;</span><span class="content">class Foo</span><span class="delimiter">&quot;</span></span>
<span class="keyword">assert</span> f2.class.toString() == <span class="string"><span class="delimiter">&quot;</span><span class="content">class Foo</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_expandometaclass">5.3. ExpandoMetaClass</h3>
<div class="paragraph">
<p>Implementacion que permite añadir o modificar metodos, constructores y propiedades de forma dinamica a clases ya definidas.</p>
</div>
<div class="paragraph">
<p>Especialmente útil en escenarios de test.</p>
</div>
<div class="paragraph">
<p>Para emplearla de forma global, es decir sustituir la implementación por defecto de <strong>MetaClass</strong>, basta con invocar <strong>ExpandoMetaClass#enableGlobally()</strong> al comienzo del programa.</p>
</div>
<div class="paragraph">
<p>Aunque en cuanto se hace referencia a las funcionalidades que proporciona, la implmentacion cambia automaticamente.</p>
</div>
<div class="sect3">
<h4 id="_metodos">5.3.1. Metodos</h4>
<div class="paragraph">
<p>Se pueden añadir métodos empleando los operadores <strong>=</strong> y <strong>&lt;&lt;</strong> sobre la instancia <strong>metaClass</strong> de un objeto o clase.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>=</strong>: Permite sobreescribir metodos ya definidos.</p>
</li>
<li>
<p><strong>&lt;&lt;</strong>: Permite definir nuevos métodos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
   <span class="predefined-type">String</span> title
}

<span class="predefined-type">Book</span>.metaClass.titleInUpperCase &lt;&lt; {-&gt; title.toUpperCase() }

<span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">The Stand</span><span class="delimiter">&quot;</span></span>)

<span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">THE STAND</span><span class="delimiter">&quot;</span></span> == b.titleInUpperCase()</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_propiedades">5.3.2. Propiedades</h4>
<div class="paragraph">
<p>Se pueden añadir propiedades siguiendo dos aproximaciones</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Añadiendo la propiedad</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="goovy">class Book {
   String title
}

Book.metaClass.author = &quot;Stephen King&quot;
def b = new Book()

assert &quot;Stephen King&quot; == b.author</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Definiendo los <strong>getter/setter</strong>. En este caso el principal handicap es donde se almacena el valor de la propiedad, ya que en este caso solo se define el método y no el atributo de clase asociado.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="goovy">class Book {
  String title
}
Book.metaClass.getAuthor &lt;&lt; {-&gt; &quot;Stephen King&quot; }

def b = new Book()

assert &quot;Stephen King&quot; == b.author</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_contructores_2">5.3.3. Contructores</h4>
<div class="paragraph">
<p>Se pueden definir nuevas formas de construir objetos, para ello se emplea la caracteristica <strong>constructor</strong> del objeto <strong>metaClass</strong> junto con los operadores <strong>=</strong> y <strong>&lt;&lt;</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="predefined-type">String</span> title
}
<span class="predefined-type">Book</span>.metaClass.constructor &lt;&lt; { <span class="predefined-type">String</span> title -&gt; <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>:title) }

<span class="keyword">def</span> book = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="string"><span class="delimiter">'</span><span class="content">Groovy in Action - 2nd Edition</span><span class="delimiter">'</span></span>)
<span class="keyword">assert</span> book.title == <span class="string"><span class="delimiter">'</span><span class="content">Groovy in Action - 2nd Edition</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metodos_estaticos">5.3.4. Metodos estaticos</h4>
<div class="paragraph">
<p>De forma analoga a como se definen los constructores, se pueden definir métodos estaticos, esta vez empelando la caracteristica <strong>static</strong> del objeto <strong>metaClass</strong> junto con los operadores <strong>=</strong> y <strong>&lt;&lt;</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
   <span class="predefined-type">String</span> title
}

<span class="predefined-type">Book</span>.metaClass.static.create &lt;&lt; { <span class="predefined-type">String</span> title -&gt; <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>:title) }

<span class="keyword">def</span> b = <span class="predefined-type">Book</span>.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Stand</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metodos_prestados_borrowing">5.3.5. Metodos prestados (borrowing)</h4>
<div class="paragraph">
<p>Se pueden asignar a clases métodos definidos en otras clases empleando el operador <strong>.&amp;</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {
    <span class="predefined-type">String</span> name
}
<span class="type">class</span> <span class="class">MortgageLender</span> {
   <span class="directive">static</span> <span class="keyword">def</span> <span class="function">borrowMoney</span>() {
      <span class="string"><span class="delimiter">&quot;</span><span class="content">buy house</span><span class="delimiter">&quot;</span></span>
   }
}

Person.metaClass.buyHouse = MortgageLender.&amp;borrowMoney

<span class="keyword">def</span> p = <span class="keyword">new</span> Person()

<span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">buy house</span><span class="delimiter">&quot;</span></span> == p.buyHouse()</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nombres_de_metodos_dinamicos">5.3.6. Nombres de Metodos Dinamicos</h4>
<div class="paragraph">
<p>Se pueden definir los nombres de los métodos empleando cadenas de caracteres GString.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {
   <span class="predefined-type">String</span> name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Fred</span><span class="delimiter">&quot;</span></span>
}

<span class="keyword">def</span> methodName = <span class="string"><span class="delimiter">&quot;</span><span class="content">Bob</span><span class="delimiter">&quot;</span></span>

Person.metaClass.<span class="string"><span class="delimiter">&quot;</span><span class="content">changeNameTo</span><span class="inline"><span class="inline-delimiter">${</span>methodName<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> = {-&gt; delegate.name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Bob</span><span class="delimiter">&quot;</span></span> }

<span class="keyword">def</span> p = <span class="keyword">new</span> Person()

<span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Fred</span><span class="delimiter">&quot;</span></span> == p.name

p.changeNameToBob()

<span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Bob</span><span class="delimiter">&quot;</span></span> == p.name</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_interfaces">5.3.7. Interfaces</h4>
<div class="paragraph">
<p>Se pueden añadir métodos a interfaces</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">List</span>.metaClass.sizeDoubled = {-&gt; delegate.size() * <span class="integer">2</span> }

<span class="keyword">def</span> list = <span class="type">[]</span>

list &lt;&lt; <span class="integer">1</span>
list &lt;&lt; <span class="integer">2</span>

<span class="keyword">assert</span> <span class="integer">4</span> == list.sizeDoubled()</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_runtime_discovery">5.3.8. Runtime Discovery</h4>
<div class="paragraph">
<p>Se dispone de los siguientes métodos en runtime para poder buscar metodos y propiedades en los objetos y clases.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>getMetaMethod: Obtiene la referencia a un método</p>
</li>
<li>
<p>hasMetaMethod: Comprueba la existencia de un método</p>
</li>
<li>
<p>getMetaProperty: Obtiene la referencia a una propiedad</p>
</li>
<li>
<p>hasMetaProperty: Comprueba la existencia de una propiedad</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {
    <span class="predefined-type">String</span> name
}
<span class="type">class</span> <span class="class">MortgageLender</span> {
    <span class="directive">static</span> <span class="keyword">def</span> <span class="function">borrowMoney</span>() {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">buy house</span><span class="delimiter">&quot;</span></span>
    }
}

Person.metaClass.buyHouse = MortgageLender.&amp;borrowMoney

<span class="keyword">def</span> p = <span class="keyword">new</span> Person()

<span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">buy house</span><span class="delimiter">&quot;</span></span> == p.buyHouse()

<span class="keyword">assert</span> Person.metaClass.getMetaMethod(<span class="string"><span class="delimiter">&quot;</span><span class="content">buyHouse</span><span class="delimiter">&quot;</span></span>,  <span class="type">[]</span> <span class="keyword">as</span> <span class="predefined-type">Class</span><span class="type">[]</span>) != <span class="predefined-constant">null</span>

<span class="keyword">assert</span> Person.metaClass.hasMetaMethod(<span class="string"><span class="delimiter">&quot;</span><span class="content">buyHouse</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovyobject">5.4. GroovyObject</h3>
<div class="paragraph">
<p>Interface que por defecto cumplen todos los objetos basados en clases <strong>Groovy</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> groovy.lang;

<span class="directive">public</span> <span class="type">interface</span> GroovyObject {

    <span class="predefined-type">Object</span> invokeMethod(<span class="predefined-type">String</span> name, <span class="predefined-type">Object</span> args);

    <span class="predefined-type">Object</span> getProperty(<span class="predefined-type">String</span> propertyName);

    <span class="type">void</span> setProperty(<span class="predefined-type">String</span> propertyName, <span class="predefined-type">Object</span> newValue);

    MetaClass getMetaClass();

    <span class="type">void</span> setMetaClass(MetaClass metaClass);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metodos_2">5.5. Metodos</h3>
<div class="paragraph">
<p>La implementacion de <strong>invokeMethod()</strong> será invocado cuando se invoque un método que no exista.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SomeGroovyClass</span> {

    <span class="keyword">def</span> <span class="function">invokeMethod</span>(<span class="predefined-type">String</span> name, <span class="predefined-type">Object</span> args) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">called invokeMethod </span><span class="inline"><span class="inline-delimiter">$</span>name</span><span class="content"> </span><span class="inline"><span class="inline-delimiter">$</span>args</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">test</span>() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">'</span><span class="content">method exists</span><span class="delimiter">'</span></span>
    }
}

<span class="keyword">def</span> someGroovyClass = <span class="keyword">new</span> SomeGroovyClass()

<span class="keyword">assert</span> someGroovyClass.test() == <span class="string"><span class="delimiter">'</span><span class="content">method exists</span><span class="delimiter">'</span></span>
<span class="keyword">assert</span> someGroovyClass.someMethod() == <span class="string"><span class="delimiter">'</span><span class="content">called invokeMethod someMethod []</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>En el anterior ejemplo, de no definirse <strong>invokeMethod()</strong> se obtendria un <strong>groovy.lang.MissingMethodException</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Se desaconseja su uso para implementar métodos no definidos, en ese caso es mejor recurrir a <strong>methodMissing</strong></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_methodmissing">5.6. MethodMissing</h3>
<div class="paragraph">
<p>Invocado unicamente cuando ha ocurrido un fallo al acceder a un método por no estar definido.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Foo</span> {

   <span class="keyword">def</span> <span class="function">methodMissing</span>(<span class="predefined-type">String</span> name, <span class="keyword">def</span> args) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">this is me</span><span class="delimiter">&quot;</span></span>
   }
}

<span class="keyword">assert</span> <span class="keyword">new</span> Foo().someUnknownMethod(<span class="integer">42l</span>) == <span class="string"><span class="delimiter">'</span><span class="content">this is me</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_propiedades_2">5.7. Propiedades</h3>
<div class="paragraph">
<p>El acceso a cualquier propiedad, uso de <strong>get/set</strong> de un objeto Groovy, pasará por la implementacion de <strong>getProperty/setProperty</strong>, exista la propiedad o no, la implementacion por defecto de este método recurre a <strong>metaClass</strong> para obtener la referencia a la propiedad.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SomeGroovyClass</span> {

    <span class="keyword">def</span> property1 = <span class="string"><span class="delimiter">'</span><span class="content">ha</span><span class="delimiter">'</span></span>
    <span class="keyword">def</span> field2 = <span class="string"><span class="delimiter">'</span><span class="content">ho</span><span class="delimiter">'</span></span>

    <span class="keyword">def</span> <span class="function">getField1</span>() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">'</span><span class="content">getHa</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">getProperty</span>(<span class="predefined-type">String</span> name) {
        <span class="keyword">if</span> (name != <span class="string"><span class="delimiter">'</span><span class="content">field3</span><span class="delimiter">'</span></span>)
            <span class="keyword">return</span> metaClass.getProperty(<span class="local-variable">this</span>, name)
        <span class="keyword">else</span>
            <span class="keyword">return</span> <span class="string"><span class="delimiter">'</span><span class="content">field3</span><span class="delimiter">'</span></span>
    }
}

<span class="keyword">def</span> someGroovyClass = <span class="keyword">new</span> SomeGroovyClass()

<span class="keyword">assert</span> someGroovyClass.field1 == <span class="string"><span class="delimiter">'</span><span class="content">getHa</span><span class="delimiter">'</span></span>
<span class="keyword">assert</span> someGroovyClass.field2 == <span class="string"><span class="delimiter">'</span><span class="content">ho</span><span class="delimiter">'</span></span>
<span class="keyword">assert</span> someGroovyClass.field3 == <span class="string"><span class="delimiter">'</span><span class="content">field3</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>De implementar <strong>setProperty</strong>, habrá que hacer uso de una sintaxis especial de acceso a la propiedad del objeto, empleando <strong>.@</strong> para evitar un acceso recursivo infinito</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">POGO</span> {

    <span class="predefined-type">String</span> property

    <span class="type">void</span> setProperty(<span class="predefined-type">String</span> name, <span class="predefined-type">Object</span> value) {
        <span class="local-variable">this</span>.@<span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">$</span>name</span><span class="delimiter">&quot;</span></span> = <span class="string"><span class="delimiter">'</span><span class="content">overridden</span><span class="delimiter">'</span></span>
    }
}

<span class="keyword">def</span> pogo = <span class="keyword">new</span> POGO()
pogo.property = <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>

<span class="keyword">assert</span> pogo.property == <span class="string"><span class="delimiter">'</span><span class="content">overridden</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_atributos_2">5.8. Atributos</h3>
<div class="paragraph">
<p>Se puede acceder directamente a cualquier atributo, sin usar <strong>get/set</strong>, empleando la caracteristica <strong>metaClass</strong> de un objeto Groovy y sus métodos <strong>getAttribute/setAttribute</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SomeGroovyClass</span> {

    <span class="keyword">def</span> field1 = <span class="string"><span class="delimiter">'</span><span class="content">ha</span><span class="delimiter">'</span></span>
    <span class="keyword">def</span> field2 = <span class="string"><span class="delimiter">'</span><span class="content">ho</span><span class="delimiter">'</span></span>

    <span class="keyword">def</span> <span class="function">getField1</span>() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">'</span><span class="content">getHa</span><span class="delimiter">'</span></span>
    }
}

<span class="keyword">def</span> someGroovyClass = <span class="keyword">new</span> SomeGroovyClass()

<span class="keyword">assert</span> someGroovyClass.metaClass.getAttribute(someGroovyClass, <span class="string"><span class="delimiter">'</span><span class="content">field1</span><span class="delimiter">'</span></span>) == <span class="string"><span class="delimiter">'</span><span class="content">ha</span><span class="delimiter">'</span></span>
<span class="keyword">assert</span> someGroovyClass.metaClass.getAttribute(someGroovyClass, <span class="string"><span class="delimiter">'</span><span class="content">field2</span><span class="delimiter">'</span></span>) == <span class="string"><span class="delimiter">'</span><span class="content">ho</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">POGO</span> {

    <span class="directive">private</span> <span class="predefined-type">String</span> field
    <span class="predefined-type">String</span> property1

    <span class="type">void</span> setProperty1(<span class="predefined-type">String</span> property1) {
        <span class="local-variable">this</span>.property1 = <span class="string"><span class="delimiter">&quot;</span><span class="content">setProperty1</span><span class="delimiter">&quot;</span></span>
    }
}

<span class="keyword">def</span> pogo = <span class="keyword">new</span> POGO()
pogo.metaClass.setAttribute(pogo, <span class="string"><span class="delimiter">'</span><span class="content">field</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">ha</span><span class="delimiter">'</span></span>)
pogo.metaClass.setAttribute(pogo, <span class="string"><span class="delimiter">'</span><span class="content">property1</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">ho</span><span class="delimiter">'</span></span>)

<span class="keyword">assert</span> pogo.field == <span class="string"><span class="delimiter">'</span><span class="content">ha</span><span class="delimiter">'</span></span>
<span class="keyword">assert</span> pogo.property1 == <span class="string"><span class="delimiter">'</span><span class="content">ho</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_propertymissing">5.9. PropertyMissing</h3>
<div class="paragraph">
<p>Invocado unicamente cuando ha ocurrido un fallo al acceder a una propiedad por no estar definida.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Foo</span> {
   <span class="keyword">def</span> storage = [:]
   <span class="keyword">def</span> <span class="function">propertyMissing</span>(<span class="predefined-type">String</span> name, value) { storage[name] = value }
   <span class="keyword">def</span> <span class="function">propertyMissing</span>(<span class="predefined-type">String</span> name) { storage[name] }
}

<span class="keyword">def</span> f = <span class="keyword">new</span> Foo()
f.foo = <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>

<span class="keyword">assert</span> f.foo == <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modulos_de_extension">5.10. Modulos de Extension</h3>
<div class="paragraph">
<p>Se pueden definir nuevos métodos a clases ya existentes, incluso aunque esten precompiladas.</p>
</div>
<div class="paragraph">
<p>Este API es el que se aplica para dotar de mayores funcionalidades a clases java como <strong>File</strong>, que en java no dispone de un método <strong>getText()</strong>, pero que en groovy si.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> file = <span class="keyword">new</span> <span class="predefined-type">File</span>(...)
<span class="keyword">def</span> contents = file.getText(<span class="string"><span class="delimiter">'</span><span class="content">utf-8</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto sucede por la definicion de un método de extensión en la clase <strong>ResourceGroovyMethods</strong></p>
</div>
<div class="listingblock">
<div class="title">ResourceGroovyMethods.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">String</span> getText(<span class="predefined-type">File</span> file, <span class="predefined-type">String</span> charset) <span class="directive">throws</span> <span class="exception">IOException</span> {
 <span class="keyword">return</span> IOGroovyMethods.getText(newReader(file, charset));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hay que observar varias cosas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>El método de extensión es estatico.</p>
</li>
<li>
<p>El primer parametro hace referencia a la instancia que adquiere el método.</p>
</li>
<li>
<p>Del segundo parametro en adelante, son los parametros de entrada al método.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Se pueden definir nuevos métodos asociados a la instancia y a la clase.</p>
</div>
<div class="paragraph">
<p>Para definir un nuevo <strong>Metodo de instancia</strong>, habrá que definir una clase con un método estatico como el siguiente</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">MaxRetriesExtension</span> {
    <span class="directive">static</span> <span class="type">void</span> maxRetries(<span class="predefined-type">Integer</span> self, Closure code) {
        <span class="keyword">assert</span> self &gt;= <span class="integer">0</span>
        <span class="type">int</span> retries = self
        <span class="predefined-type">Throwable</span> e = <span class="predefined-constant">null</span>
        <span class="keyword">while</span> (retries &gt; <span class="integer">0</span>) {
            <span class="keyword">try</span> {
                code.call()
                <span class="keyword">break</span>
            } <span class="keyword">catch</span> (<span class="predefined-type">Throwable</span> err) {
                e = err
                retries--
            }
        }
        <span class="keyword">if</span> (retries == <span class="integer">0</span> &amp;&amp; e) {
            <span class="keyword">throw</span> e
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>PAra emplear el anterior método de instancia se hará</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">int</span> i=<span class="integer">0</span>
<span class="integer">5</span>.maxRetries {
    i++
}
<span class="keyword">assert</span> i == <span class="integer">1</span>
i=<span class="integer">0</span>
<span class="keyword">try</span> {
    <span class="integer">5</span>.maxRetries {
        i++
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">RuntimeException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">oops</span><span class="delimiter">&quot;</span></span>)
    }
} <span class="keyword">catch</span> (<span class="exception">RuntimeException</span> e) {
    <span class="keyword">assert</span> i == <span class="integer">5</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para definir un nuevo <strong>Metodo de clase</strong>, habrá que definir una clase con un método estatico como el siguiente</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">StaticStringExtension</span> {
    <span class="directive">static</span> <span class="predefined-type">String</span> greeting(<span class="predefined-type">String</span> self) {
        <span class="string"><span class="delimiter">'</span><span class="content">Hello, world!</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>PAra emplear el anterior método de clase se hará</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> <span class="predefined-type">String</span>.greeting() == <span class="string"><span class="delimiter">'</span><span class="content">Hello, world!</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>En ambos casos, tambien habrá que definir el fichero de configuracion del modulo de extension <strong>META-INF/groovy/org.codehaus.groovy.runtime.ExtensionModule</strong> con los siguientes campos</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>moduleName</strong>: Nombre del modulo</p>
</li>
<li>
<p><strong>moduleVersion</strong>: Version del modulo</p>
</li>
<li>
<p><strong>extensionClasses</strong>: Clase con métodos estaticos de instancia</p>
</li>
<li>
<p><strong>staticExtensionClasses</strong>: Clase con métodos estaticos de clase</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">moduleName=Test module for specifications
moduleVersion=1.0-test
extensionClasses=support.MaxRetriesExtension
staticExtensionClasses=support.StaticStringExtension</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operadores">6. Operadores</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sobrecarga_de_operadores">6.1. Sobrecarga de operadores</h3>
<div class="paragraph">
<p>Se pueden redefinir los operadores en groovy dado que al final son métodos de las tipologias.</p>
</div>
<div class="paragraph">
<p>Para hacerlo, habrá que crear nuevos métodos en los tipos donde se desee sobrecargar el operador teniendo en cuenta estas reglas</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.plus(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.minus(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.multiply(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.div(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.mod(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.leftShift(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.rightShift(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">**</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.power(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;&gt;&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.rightShiftUnsigned(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">|</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.or(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">++</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.next()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.and(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.previous()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.xor(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.positive()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">as</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.asType(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.negative()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">a()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.call()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">~a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.bitwiseNegate()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">a[b]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.getAt(b)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">a[b] = c</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a.putAt(b, c)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">a in b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">b.isCase(a)</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Entero</span> {
        <span class="type">int</span> valor = <span class="integer">0</span>;

        <span class="keyword">def</span> <span class="function">plus</span>(Entero b) {
                <span class="local-variable">this</span>.valor += b.valor
                <span class="local-variable">this</span>
        }
}

<span class="keyword">def</span> entero1 = <span class="keyword">new</span> Entero(<span class="key">valor</span>: <span class="integer">1</span>)
<span class="keyword">def</span> entero2 = <span class="keyword">new</span> Entero(<span class="key">valor</span>: <span class="integer">2</span>)

println((entero1 + entero2).valor)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ojo en el anterior ejercicio con los parentesis, lo siguiente no compila, ya que los parentesis se interpretan que son del método println y no una agrupacion de la operacion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println (entero1 + entero2).valor</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_operador">6.2. Operador ==</h3>
<div class="paragraph">
<p>En groovy el operador <strong>==</strong> es equivalente a emplear los métodos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>comparteTo()</strong> si se implementa la interface <strong>Comparable</strong></p>
</li>
<li>
<p><strong>equals()</strong> para el resto de casos</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">groovy.transform.EqualsAndHashCode</span>

<span class="keyword">def</span> s3 = <span class="keyword">new</span> <span class="predefined-type">String</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">pepe</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">def</span> s4 = <span class="keyword">new</span> <span class="predefined-type">String</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">pepe</span><span class="delimiter">&quot;</span></span>)

println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Los String s3 == s4 -&gt; </span><span class="inline"><span class="inline-delimiter">${</span>s3 == s4<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)

<span class="type">class</span> <span class="class">Persona</span> {
    <span class="predefined-type">String</span> nombre
}

<span class="keyword">def</span> p1 = <span class="keyword">new</span> Persona(<span class="key">nombre</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">def</span> p2 = <span class="keyword">new</span> Persona(<span class="key">nombre</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>)

println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Las Persona p1 == p2 -&gt; </span><span class="inline"><span class="inline-delimiter">${</span>p1 == p2<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)

<span class="annotation">@EqualsAndHashCode</span>
<span class="type">class</span> <span class="class">Cliente</span> {
    <span class="predefined-type">String</span> nombre
}

<span class="keyword">def</span> c1 = <span class="keyword">new</span> Cliente(<span class="key">nombre</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">def</span> c2 = <span class="keyword">new</span> Cliente(<span class="key">nombre</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>)

println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Los Cliente c1 == c2 -&gt; </span><span class="inline"><span class="inline-delimiter">${</span>c1 == c2<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dado que el operador <strong>==</strong> ya no compara si son el mismo objeto en memoria, se proporciona un método <strong>is()</strong> que permite realizar esa comparación</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> s3 = <span class="keyword">new</span> <span class="predefined-type">String</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">pepe</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">def</span> s4 = <span class="keyword">new</span> <span class="predefined-type">String</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">pepe</span><span class="delimiter">&quot;</span></span>)

println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Los String s3 y s4 son el mismo objeto -&gt; </span><span class="inline"><span class="inline-delimiter">${</span>s3.is(s4)<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)

<span class="keyword">def</span> s5 = s3

println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Los String s3 y s5 son el mismo objeto -&gt; </span><span class="inline"><span class="inline-delimiter">${</span>s3.is(s5)<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operador_2">6.3. Operador *</h3>
<div class="paragraph">
<p>El operador <strong>\</strong>* permite indicar a una coleccion que ejecute un método de todos sus elementos</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Persona</span> {
        <span class="predefined-type">String</span> nombre
        <span class="type">int</span> edad
        <span class="keyword">def</span> <span class="function">imprimir</span>(){println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">$</span>nombre</span><span class="content">:</span><span class="inline"><span class="inline-delimiter">$</span>edad</span><span class="delimiter">&quot;</span></span>}
}

<span class="keyword">def</span> personas=[
        <span class="keyword">new</span> Persona(<span class="key">nombre</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">paco</span><span class="delimiter">&quot;</span></span>,<span class="key">edad</span>:<span class="integer">88</span>),
        <span class="keyword">new</span> Persona(<span class="key">nombre</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">julia</span><span class="delimiter">&quot;</span></span>,<span class="key">edad</span>:<span class="integer">38</span>),
        <span class="keyword">new</span> Persona(<span class="key">nombre</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">andrea</span><span class="delimiter">&quot;</span></span>,<span class="key">edad</span>:<span class="integer">68</span>)
]

personas*.imprimir()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operador_power">6.4. Operador ** (power)</h3>
<div class="paragraph">
<p>Permite definir una operacion de exponenciación, indicando la base y el exponente</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println <span class="integer">3</span> ** <span class="integer">3</span> <span class="comment">//Sera 27</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operador_3">6.5. Operador .&amp;</h3>
<div class="paragraph">
<p>Permite obtener la referencia a un metodo, pudiendola asignar a una variable para poderla invocar mas adelante o para pasarla como parametro a un método que acepte Closures</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> str = <span class="string"><span class="delimiter">'</span><span class="content">example of method reference</span><span class="delimiter">'</span></span>
<span class="keyword">def</span> fun = str.&amp;toUpperCase
println fun()

<span class="keyword">def</span> <span class="function">transform</span>(Closure action) {
        println action()
}

transform (fun)</code></pre>
</div>
</div>
<div class="paragraph">
<p>La referencia es hacia en nombre del método y no al método en concreto, es decir los parametros se resuelven en runtime, por lo que con una misma refrecencia se pueden invoca distintos métodos solo con cambiar el parametro enviado.</p>
</div>
<div class="paragraph">
<p>Como ventaja e que estamos manejando una Closure con todas sus funcionalidades.</p>
</div>
</div>
<div class="sect2">
<h3 id="_operador_4">6.6. Operador &lt;&#8658;</h3>
<div class="paragraph">
<p>Este operador delega en el método <strong>compareTo()</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> (<span class="integer">1</span> &lt;=&gt; <span class="integer">1</span>) == <span class="integer">0</span>
<span class="keyword">assert</span> (<span class="integer">1</span> &lt;=&gt; <span class="integer">2</span>) == -<span class="integer">1</span>
<span class="keyword">assert</span> (<span class="integer">2</span> &lt;=&gt; <span class="integer">1</span>) == <span class="integer">1</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operador_5">6.7. Operador []</h3>
<div class="paragraph">
<p>Este operador delega en los métodos <strong>getAt</strong> o <strong>putAt</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> list = [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>,<span class="integer">4</span>]

<span class="comment">//getAt</span>
<span class="keyword">assert</span> list[<span class="integer">2</span>] == <span class="integer">2</span>

<span class="comment">//putAt</span>
list[<span class="integer">2</span>] = <span class="integer">4</span>
<span class="keyword">assert</span> list[<span class="integer">0</span>..<span class="integer">2</span>] == [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">4</span>]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operador_in">6.8. Operador in</h3>
<div class="paragraph">
<p>Este operador delega en el método <strong>isCase</strong>. En el contexto de una coleccion es equivalente a invocar <strong>contains</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">ef list = [<span class="string"><span class="delimiter">'</span><span class="content">Grace</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">Rob</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">Emmy</span><span class="delimiter">'</span></span>]
<span class="keyword">assert</span> (<span class="string"><span class="delimiter">'</span><span class="content">Emmy</span><span class="delimiter">'</span></span> <span class="keyword">in</span> list)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operador_as">6.9. Operador as</h3>
<div class="paragraph">
<p>Permite realizar una transformacion de tipos (similar al casting, pero sin relacion de herencia). Se basa en la definición del método <strong>asType</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Identifiable</span> {
    <span class="predefined-type">String</span> name
}
<span class="type">class</span> <span class="class">User</span> {
    <span class="predefined-type">Long</span> id
    <span class="predefined-type">String</span> name
    <span class="keyword">def</span> <span class="function">asType</span>(<span class="predefined-type">Class</span> target) {
        <span class="keyword">if</span> (target == Identifiable) {
            <span class="keyword">return</span> <span class="keyword">new</span> Identifiable(<span class="key">name</span>: name)
        }
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ClassCastException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">User cannot be coerced into </span><span class="inline"><span class="inline-delimiter">$</span>target</span><span class="delimiter">&quot;</span></span>)
    }
}
<span class="keyword">def</span> u = <span class="keyword">new</span> User(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Xavier</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> p = u <span class="keyword">as</span> Identifiable
<span class="keyword">assert</span> p <span class="keyword">instanceof</span> Identifiable
<span class="keyword">assert</span> !(p <span class="keyword">instanceof</span> User)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operador_6">6.10. Operador ()</h3>
<div class="paragraph">
<p>Permite invocar el método <strong>call()</strong> definido en una clase</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">MyCallable</span> {
    <span class="type">int</span> call(<span class="type">int</span> x) {
        <span class="integer">2</span>*x
    }
}

<span class="keyword">def</span> mc = <span class="keyword">new</span> MyCallable()
<span class="keyword">assert</span> mc.call(<span class="integer">2</span>) == <span class="integer">4</span>
<span class="keyword">assert</span> mc(<span class="integer">2</span>) == <span class="integer">4</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operador_safe_navigator">6.11. Operador safe navigator</h3>
<div class="paragraph">
<p>Este operador <strong>?</strong>, permite evitar generar codigo para la validacion de variables distintas de null</p>
</div>
<div class="listingblock">
<div class="title">En java para poder acceder de forma segura al nombre de un cliente asociado a un pedido, se debe hacer&#8230;&#8203;.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">if</span> (pedido != <span class="predefined-constant">null</span>) {
    <span class="keyword">if</span> (pedido.getCliente() != <span class="predefined-constant">null</span>) {
        <span class="keyword">if</span> (pedido.getCliente().getNombre() != <span class="predefined-constant">null</span>) {
            <span class="predefined-type">System</span>.out.println(pedido.getCliente().getNombre());
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">En Groovy unicamente</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println pedido?.cliente?.nombre</code></pre>
</div>
</div>
<div class="paragraph">
<p>El operador en caso de que las variables empleadas sean null, hace que la expresion retorne null</p>
</div>
</div>
<div class="sect2">
<h3 id="_operador_ternario_y_operador_elvis">6.12. Operador ternario y operador Elvis</h3>
<div class="paragraph">
<p>Se acepta el formato tradicional del operador ternario</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println usuario.nombre ? usuario.nombre : <span class="string"><span class="delimiter">'</span><span class="content">Desconocido</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Y en el caso de querer el dato evaluado como resultado de la expresión, se acepta la expresion reducida conocida como <strong>Elvis</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println usuario.nombre ?: <span class="string"><span class="delimiter">'</span><span class="content">Desconocido</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_colecciones">7. Colecciones</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy tiene soporte nativos para distintos tipos de colecciones incluidos <strong>List</strong>, <strong>Map</strong> y <strong>Range</strong>.</p>
</div>
<div class="sect2">
<h3 id="_list_listas">7.1. List (Listas)</h3>
<div class="paragraph">
<p>Se pueden definir listas de forma muy rapida, sin necesidad de hacer uso de las clases del API java de <strong>Collections</strong>, con el operador <strong>[]</strong>, la lista generada será de tipo <strong>ArrayList</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> lista = [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>] <span class="comment">// ArrayList</span>

<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; lista = [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>]

<span class="comment">//Para emplear otra implementacion basta con indicarlo con el operador *as*</span>
<span class="keyword">def</span> vector = [<span class="string"><span class="delimiter">&quot;</span><span class="content">hola</span><span class="delimiter">&quot;</span></span>] <span class="keyword">as</span> <span class="predefined-type">Vector</span>

<span class="comment">//Se pueden clonar, ojo que los objetos referenciados no se clonan, se clonan las referencias</span>
<span class="keyword">def</span> otro = [[<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>],[<span class="integer">1</span>, <span class="integer">2</span>]]

<span class="keyword">def</span> clon = otro.clone()
<span class="keyword">assert</span> clon[<span class="integer">0</span>] == [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>]
clon[<span class="integer">1</span>] &lt;&lt; <span class="integer">4</span>
<span class="keyword">assert</span> otro[<span class="integer">1</span>] == [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">4</span>]</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_acceso_a_elementos">7.1.1. Acceso a elementos</h4>
<div class="paragraph">
<p>Para acceder a los elementos se un <strong>List</strong> se puede emplear el operador <strong>[]</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>][<span class="integer">0</span>] == <span class="integer">1</span>

<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>].get(<span class="integer">0</span>) == <span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Se pueden emplear indices negativos para recorrer la lista en sentido contrario, desde el final, solo con <strong>[]</strong> y <strong>getAt()</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>][-<span class="integer">1</span>] == <span class="integer">5</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>].getAt(-<span class="integer">2</span>) == <span class="integer">4</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_edicion_de_elementos">7.1.2. Edicion de elementos</h4>
<div class="paragraph">
<p>Se puede modificar elementos de la lista</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> list = [<span class="integer">5</span>, <span class="integer">6</span>, <span class="integer">7</span>, <span class="integer">8</span>]

list[<span class="integer">2</span>] = <span class="integer">9</span>

<span class="keyword">assert</span> list == [<span class="integer">5</span>, <span class="integer">6</span>, <span class="integer">9</span>, <span class="integer">8</span>]

list.putAt(<span class="integer">2</span>, <span class="integer">10</span>) <span class="comment">//Equivalente al uso de []</span>

<span class="keyword">assert</span> list == [<span class="integer">5</span>, <span class="integer">6</span>, <span class="integer">10</span>, <span class="integer">8</span>]

<span class="keyword">assert</span> list.set(<span class="integer">2</span>, <span class="integer">11</span>) == <span class="integer">10</span> <span class="comment">//Equivalente al uso de [], pero ademas retorna el valor antiguo</span>

<span class="keyword">assert</span> list == [<span class="integer">5</span>, <span class="integer">6</span>, <span class="integer">11</span>, <span class="integer">8</span>]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_agregacion_de_elementos">7.1.3. Agregacion de elementos</h4>
<div class="paragraph">
<p>Se pueden agregar elementos de forma tradicional o con el operador <strong>&lt;&lt;</strong>, este operador retorna el objeto lista.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lista.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">Grails</span><span class="delimiter">&quot;</span></span>)

lista.addAll([<span class="string"><span class="delimiter">&quot;</span><span class="content">Grails</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Griffon</span><span class="delimiter">&quot;</span></span>])

lista &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Grails</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>O con el operador <strong>* o *=</strong>, que no mutan la coleccion original, sino que crean otro objeto <strong>List</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> a = [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>]
<span class="comment">//Se crea una nueva coleccion y la variable a pierde la referencia a la original, referenciando a la nueva</span>
a += <span class="integer">4</span>
a += [<span class="integer">5</span>, <span class="integer">6</span>]
<span class="keyword">assert</span> a == [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>, <span class="integer">6</span>]

<span class="comment">//a sigue referenciando a la coleccion inicial, que no ha cambiado, y se crea una nueva coleccion con los elementos de a y el 7</span>
<span class="keyword">def</span> otra = a + <span class="integer">7</span>

<span class="keyword">assert</span> a == [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>, <span class="integer">6</span>]
<span class="keyword">assert</span> otra == [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>, <span class="integer">6</span>, <span class="integer">7</span>]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_borrado_de_elementos">7.1.4. Borrado de elementos</h4>
<div class="paragraph">
<p>Se pueden eliminar elementos de la lista de forma tradicional o con el operador <strong>-</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lista.addAll([<span class="string"><span class="delimiter">&quot;</span><span class="content">Grails</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Griffon</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Groovy</span><span class="delimiter">&quot;</span></span>])

<span class="comment">//Borra el elemento en la lista modificando el objeto lista y retornando true si lo borra</span>
<span class="keyword">assert</span> lista.remove(<span class="string"><span class="delimiter">&quot;</span><span class="content">Griffon</span><span class="delimiter">&quot;</span></span>)

<span class="comment">//Borra el elemento en la posicion inicial de la lista y retorna el objeto borrado</span>
<span class="keyword">assert</span> lista.remove(<span class="integer">0</span>) == <span class="string"><span class="delimiter">'</span><span class="content">Grails</span><span class="delimiter">'</span></span>

<span class="comment">//Igual que el anterior</span>
<span class="keyword">assert</span> list.removeAt(<span class="integer">0</span>) == <span class="string"><span class="delimiter">'</span><span class="content">Grails</span><span class="delimiter">'</span></span>

<span class="comment">//Borra el primer elemento &quot;Groovy&quot; que encuentra y retorna true</span>
<span class="keyword">assert</span> list.removeElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">Groovy</span><span class="delimiter">&quot;</span></span>)

<span class="comment">//Crea un nuevo objeto con los elementos de la lista original menos 'Grails' y lo asigna a la variable lista, la referencia a la lista original se pierde</span>
lista = lista - <span class="string"><span class="delimiter">'</span><span class="content">Grails</span><span class="delimiter">'</span></span>

<span class="comment">//Igual que la anterior pero compactada.</span>
lista -= <span class="string"><span class="delimiter">&quot;</span><span class="content">Dos</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_iterador">7.1.5. Iterador</h4>
<div class="paragraph">
<p>Se ofrecen métodos para iterar los elementos de las listas directamente aplicando una expresion lambda.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">//Iterar por elemento</span>
lista.each { println <span class="string"><span class="delimiter">&quot;</span><span class="content">Technology: </span><span class="inline"><span class="inline-delimiter">$</span><span class="local-variable">it</span></span><span class="delimiter">&quot;</span></span>}

<span class="comment">//Iterar por elemento e indice</span>
lista.eachWithIndex { <span class="local-variable">it</span>, i -&gt; println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">$</span>i</span><span class="content">: </span><span class="inline"><span class="inline-delimiter">$</span><span class="local-variable">it</span></span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_map_collect">7.1.6. Map (Collect)</h4>
<div class="paragraph">
<p>Se ofrecen métodos para aplicar a cada elemento de la lista una operacion, el generico es <strong>collect</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].collect { <span class="local-variable">it</span> * <span class="integer">2</span> } == [<span class="integer">2</span>, <span class="integer">4</span>, <span class="integer">6</span>]

<span class="comment">//Expresion reducida de collect</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>]*.multiply(<span class="integer">2</span>) == [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].collect { <span class="local-variable">it</span>.multiply(<span class="integer">2</span>) }

<span class="comment">//Se puede dar ya una lista a collect para que almacene alli los datos</span>
<span class="keyword">def</span> list = [<span class="integer">0</span>]
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].collect(list) { <span class="local-variable">it</span> * <span class="integer">2</span> } == [<span class="integer">0</span>, <span class="integer">2</span>, <span class="integer">4</span>, <span class="integer">6</span>]
<span class="keyword">assert</span> list == [<span class="integer">0</span>, <span class="integer">2</span>, <span class="integer">4</span>, <span class="integer">6</span>]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_operaciones_con_los_elementos_de_la_lista">7.1.7. Operaciones con los elementos de la lista</h4>
<div class="paragraph">
<p>Se pueden realizar calculos sobre los elementos de la coleccion como sumas, transformaciones, calculo de maximo, minimo, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">//Realiza la suma de todos los elementos que conponen la lista empleando el mentodo *plus()*</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>, <span class="integer">6</span>].sum() == <span class="integer">21</span>
<span class="keyword">assert</span> [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">e</span><span class="delimiter">'</span></span>].sum() == <span class="string"><span class="delimiter">'</span><span class="content">abcde</span><span class="delimiter">'</span></span>
<span class="keyword">assert</span> [[<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>], [<span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>]].sum() == [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>]

<span class="comment">//Se permite asociar valores a los elementos de la lista para realizar la suma.</span>
<span class="keyword">assert</span> [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">e</span><span class="delimiter">'</span></span>].sum {
    <span class="local-variable">it</span> == <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span> ? <span class="integer">1</span> : <span class="local-variable">it</span> == <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span> ? <span class="integer">2</span> : <span class="local-variable">it</span> == <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span> ? <span class="integer">3</span> : <span class="local-variable">it</span> == <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span> ? <span class="integer">4</span> : <span class="local-variable">it</span> == <span class="string"><span class="delimiter">'</span><span class="content">e</span><span class="delimiter">'</span></span> ? <span class="integer">5</span> : <span class="integer">0</span>
} == <span class="integer">15</span>

<span class="comment">//Se puede proporcionar el primer elemento a sumar</span>
<span class="keyword">assert</span> <span class="type">[]</span>.sum(<span class="integer">1000</span>) == <span class="integer">1000</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].sum(<span class="integer">1000</span>) == <span class="integer">1006</span>

<span class="comment">//Permite formar un nuevo String concatenando los elementos de la lista empleando un caracter de union</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].join(<span class="string"><span class="delimiter">'</span><span class="content">-</span><span class="delimiter">'</span></span>) == <span class="string"><span class="delimiter">'</span><span class="content">1-2-3</span><span class="delimiter">'</span></span>

<span class="comment">//Permite conocer la parte comun de las dos colleciones</span>
<span class="keyword">assert</span> [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">4</span>,<span class="integer">6</span>,<span class="integer">8</span>,<span class="integer">10</span>,<span class="integer">12</span>].intersect([<span class="integer">1</span>,<span class="integer">3</span>,<span class="integer">6</span>,<span class="integer">9</span>,<span class="integer">12</span>]) == [<span class="integer">1</span>,<span class="integer">6</span>,<span class="integer">12</span>]

<span class="comment">//Permite compara si dos colleciones no tienen nada en común</span>
<span class="keyword">assert</span> [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>].disjoint( [<span class="integer">4</span>,<span class="integer">6</span>,<span class="integer">9</span>] )

<span class="comment">//Se pueden aplanar listas de listas</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, [<span class="integer">2</span>, <span class="integer">3</span>, [<span class="integer">4</span>, <span class="integer">5</span>], <span class="integer">6</span>], <span class="integer">7</span>, [<span class="integer">8</span>, <span class="integer">9</span>]].flatten() == [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>, <span class="integer">6</span>, <span class="integer">7</span>, <span class="integer">8</span>, <span class="integer">9</span>]

<span class="comment">//Permite calcular el maximo y el minimo dentro de la coleccion</span>
<span class="keyword">def</span> list = [<span class="integer">9</span>, <span class="integer">4</span>, <span class="integer">2</span>, <span class="integer">10</span>, <span class="integer">5</span>]
<span class="keyword">assert</span> list.max() == <span class="integer">10</span>
<span class="keyword">assert</span> list.min() == <span class="integer">2</span>
<span class="keyword">assert</span> [<span class="string"><span class="delimiter">'</span><span class="content">x</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">y</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">z</span><span class="delimiter">'</span></span>].min() == <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>

<span class="comment">// Se puede definir el algoritmo a aplicar a cada item para obtener el valor por el que se ha ordenar para obteenr el maximo y el minimo</span>
<span class="keyword">def</span> list2 = [<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">z</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">xyzuvw</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Hello</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">321</span><span class="delimiter">'</span></span>]
<span class="keyword">assert</span> list2.max { <span class="local-variable">it</span>.size() } == <span class="string"><span class="delimiter">'</span><span class="content">xyzuvw</span><span class="delimiter">'</span></span>
<span class="keyword">assert</span> list2.min { <span class="local-variable">it</span>.size() } == <span class="string"><span class="delimiter">'</span><span class="content">z</span><span class="delimiter">'</span></span>

<span class="comment">//Tambien definiendo un objeto Comparator</span>
<span class="predefined-type">Comparator</span> mc = { a, b -&gt; a == b ? <span class="integer">0</span> : (a &lt; b ? -<span class="integer">1</span> : <span class="integer">1</span>) }

<span class="keyword">def</span> list = [<span class="integer">7</span>, <span class="integer">4</span>, <span class="integer">9</span>, -<span class="integer">6</span>, -<span class="integer">1</span>, <span class="integer">11</span>, <span class="integer">2</span>, <span class="integer">3</span>, -<span class="integer">9</span>, <span class="integer">5</span>, -<span class="integer">13</span>]
<span class="keyword">assert</span> list.max(mc) == <span class="integer">11</span>
<span class="keyword">assert</span> list.min(mc) == -<span class="integer">13</span>

<span class="comment">//Se pueden quitar duplicados</span>
[<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>].unique() == [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_busquedas">7.1.8. Busquedas</h4>
<div class="paragraph">
<p>Y métodos para buscar, de forma tradicional, reducida y otras formas avanzadas</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">contained = lista.contains( <span class="string"><span class="delimiter">'</span><span class="content">Groovy</span><span class="delimiter">'</span></span> )

contained = <span class="string"><span class="delimiter">'</span><span class="content">Groovy</span><span class="delimiter">'</span></span> <span class="keyword">in</span> lista

lista.containsAll([<span class="string"><span class="delimiter">'</span><span class="content">Groovy</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">Grails</span><span class="delimiter">'</span></span>])

<span class="comment">//Busqueda del primer elemento que cumple una expresiones de tipo predicado (booleana)</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].find { <span class="local-variable">it</span> &gt; <span class="integer">1</span> } == <span class="integer">2</span>

<span class="comment">//Busqueda de todos los elementos que cumplen una expresiones de tipo predicado</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].findAll { <span class="local-variable">it</span> &gt; <span class="integer">1</span> } == [<span class="integer">2</span>, <span class="integer">3</span>]

<span class="comment">//Retorna el indice del primer elemento que cumple una expresiones</span>
<span class="keyword">assert</span> [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">e</span><span class="delimiter">'</span></span>].findIndexOf { <span class="local-variable">it</span> <span class="keyword">in</span> [<span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">e</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">g</span><span class="delimiter">'</span></span>] } == <span class="integer">2</span>

<span class="comment">//Retorna el indice del primer elemento indicado</span>
<span class="keyword">assert</span> [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>].indexOf(<span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>) == <span class="integer">2</span>
<span class="keyword">assert</span> [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>].indexOf(<span class="string"><span class="delimiter">'</span><span class="content">z</span><span class="delimiter">'</span></span>) == -<span class="integer">1</span>

<span class="comment">//Retorna el indice del ultimo elemento indicado</span>
<span class="keyword">assert</span> [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>].lastIndexOf(<span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>) == <span class="integer">4</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ordenacion">7.1.9. Ordenacion</h4>
<div class="paragraph">
<p>Permite realizar operaciones de comparacion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">//Retorna true si todos los elementos de la lista cumplen el predicado</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].every { <span class="local-variable">it</span> &lt; <span class="integer">5</span> }
<span class="keyword">assert</span> ![<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].every { <span class="local-variable">it</span> &lt; <span class="integer">3</span> }

<span class="comment">//Retorna true si alguno de los elementos de la lista cumplen el predicado</span>
<span class="keyword">assert</span> [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].any { <span class="local-variable">it</span> &gt; <span class="integer">2</span> }
<span class="keyword">assert</span> ![<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>].any { <span class="local-variable">it</span> &gt; <span class="integer">3</span> }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y de ordenacion de elementos en las listas, modificando la lista original o proporcionando otro objeto</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">//Modifica la lista original</span>
lista.sort()

<span class="comment">//Obtiene otro objeto con la ordenación</span>
sortedlista = lista.sort(<span class="predefined-constant">false</span>)

<span class="comment">//Ordenacion aplicando una expresión lambda para definir el dato por el que ordenar</span>
<span class="keyword">def</span> list = [<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">z</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">xyzuvw</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Hello</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">321</span><span class="delimiter">'</span></span>]
<span class="keyword">assert</span> list.sort {
    <span class="local-variable">it</span>.size()
} == [<span class="string"><span class="delimiter">'</span><span class="content">z</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">321</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Hello</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">xyzuvw</span><span class="delimiter">'</span></span>]

<span class="comment">//Ordenacion aplicando un algoritmo de comparacion</span>
<span class="keyword">def</span> list2 = [<span class="integer">7</span>, <span class="integer">4</span>, -<span class="integer">6</span>, -<span class="integer">1</span>, <span class="integer">11</span>, <span class="integer">2</span>, <span class="integer">3</span>, -<span class="integer">9</span>, <span class="integer">5</span>, -<span class="integer">13</span>]
<span class="keyword">assert</span> list2.sort { a, b -&gt; a == b ? <span class="integer">0</span> : <span class="predefined-type">Math</span>.abs(a) &lt; <span class="predefined-type">Math</span>.abs(b) ? -<span class="integer">1</span> : <span class="integer">1</span> } ==
        [-<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>, -<span class="integer">6</span>, <span class="integer">7</span>, -<span class="integer">9</span>, <span class="integer">11</span>, -<span class="integer">13</span>]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_agrupacion">7.1.10. Agrupacion</h4>
<div class="paragraph">
<p>Se pueden agrupar los elementos de una <strong>List</strong> indicando una expresion, obteniendo un mapa, donde las claves son los posibles valores que toma la expresion para los distintos elementos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="integer">7</span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, [<span class="integer">2</span>, <span class="integer">3</span>]].groupBy {
    <span class="local-variable">it</span>.class
} == [(<span class="predefined-type">String</span>)   : [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>],
      (<span class="predefined-type">Integer</span>)  : [<span class="integer">7</span>],
      (<span class="predefined-type">ArrayList</span>): [[<span class="integer">2</span>, <span class="integer">3</span>]]
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapas">7.2. Mapas</h3>
<div class="paragraph">
<p>Igual que con las listas, tambien se permite la construccion de mapas de forma sencilla.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// HashMap no tipado de 2 elementos, donde la clave es un string</span>
<span class="keyword">def</span> mapa=[<span class="string"><span class="delimiter">&quot;</span><span class="content">uno</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">one</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">dos</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">two</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">tres</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">three</span><span class="delimiter">&quot;</span></span>]

<span class="comment">//Mapa vacio</span>
<span class="keyword">def</span> emptyMap = [:]

<span class="comment">//Se pueden clonar</span>
<span class="keyword">def</span> map = [
        simple : <span class="integer">123</span>,
        <span class="key">complex</span>: [<span class="key">a</span>: <span class="integer">1</span>, <span class="key">b</span>: <span class="integer">2</span>]
]
<span class="keyword">def</span> map2 = map.clone()
<span class="keyword">assert</span> map2.get(<span class="string"><span class="delimiter">'</span><span class="content">simple</span><span class="delimiter">'</span></span>) == map.get(<span class="string"><span class="delimiter">'</span><span class="content">simple</span><span class="delimiter">'</span></span>)
<span class="keyword">assert</span> map2.get(<span class="string"><span class="delimiter">'</span><span class="content">complex</span><span class="delimiter">'</span></span>) == map.get(<span class="string"><span class="delimiter">'</span><span class="content">complex</span><span class="delimiter">'</span></span>)
map2.get(<span class="string"><span class="delimiter">'</span><span class="content">complex</span><span class="delimiter">'</span></span>).put(<span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="integer">3</span>)
<span class="keyword">assert</span> map.get(<span class="string"><span class="delimiter">'</span><span class="content">complex</span><span class="delimiter">'</span></span>).get(<span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>) == <span class="integer">3</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_claves">7.2.1. Claves</h4>
<div class="paragraph">
<p>Para el establecimiento de las claves hay que tener cuidado</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">//Se pueden emplear variables para establecer las claves, pero con cuidado, que hay que escaparlas</span>
<span class="keyword">def</span> a = <span class="string"><span class="delimiter">'</span><span class="content">Bob</span><span class="delimiter">'</span></span>

<span class="comment">//Establece como clave el literal 'a', no el valor de la variable 'a'</span>
<span class="keyword">def</span> ages = [<span class="key">a</span>: <span class="integer">43</span>]
<span class="keyword">assert</span> ages[<span class="string"><span class="delimiter">'</span><span class="content">Bob</span><span class="delimiter">'</span></span>] == <span class="predefined-constant">null</span> <span class="comment">// 'Bob' no se encuentra</span>
<span class="keyword">assert</span> ages[<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>] == <span class="integer">43</span>     <span class="comment">// 'a' si</span>

<span class="comment">//Ahora si se establece como clave el valor de la variable 'a'</span>
ages = [(a): <span class="integer">43</span>]
<span class="keyword">assert</span> ages[<span class="string"><span class="delimiter">'</span><span class="content">Bob</span><span class="delimiter">'</span></span>] == <span class="integer">43</span>   <span class="comment">// 'Bob' si se encuentra</span>

<span class="comment">//No se deben emplear GString para el establecimiento de las claves, ya que no tienen el mismo hashcode</span>
<span class="keyword">def</span> key = <span class="string"><span class="delimiter">'</span><span class="content">some key</span><span class="delimiter">'</span></span>
<span class="keyword">def</span> map = [:]
<span class="keyword">def</span> gstringKey = <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>key.toUpperCase()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
map.put(gstringKey,<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>)
<span class="keyword">assert</span> map.get(<span class="string"><span class="delimiter">'</span><span class="content">SOME KEY</span><span class="delimiter">'</span></span>) == <span class="predefined-constant">null</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_acceso_a_elementos_2">7.2.2. Acceso a elementos</h4>
<div class="paragraph">
<p>Distintos formatos soportados para el acceso a los datos del mapa</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println mapa[<span class="string"><span class="delimiter">&quot;</span><span class="content">uno</span><span class="delimiter">&quot;</span></span>]
println mapa.<span class="string"><span class="delimiter">&quot;</span><span class="content">uno</span><span class="delimiter">&quot;</span></span>
println mapa.uno
println mapa.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">uno</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se puede obtener la coleccion de claves <strong>keyset</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> map = [<span class="integer">1</span>:<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="integer">2</span>:<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="integer">3</span>:<span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>]

<span class="keyword">def</span> keys = map.keySet()
<span class="keyword">assert</span> keys == [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>] <span class="keyword">as</span> <span class="predefined-type">Set</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Y transformar el mapa en un <strong>Set</strong> de objetos <strong>Entry</strong> con <strong>entryset</strong></p>
</div>
<div class="paragraph">
<p>El tipo <strong>Entry</strong> tiene dos caracteristicas <strong>key</strong> y <strong>value</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> entries = map.entrySet()
entries.each { entry -&gt;
    <span class="keyword">assert</span> entry.key <span class="keyword">in</span> [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>]
    <span class="keyword">assert</span> entry.value <span class="keyword">in</span> [<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_edicion_y_agregacion_de_elementos">7.2.3. Edicion y Agregacion de elementos</h4>
<div class="paragraph">
<p>Se emplea la misma sintaxis tanto para editar un valor asociado a una clave, como para establecer un nuevo par de (clave,valor), la diferencia es si existe la clave</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> defaults = [<span class="integer">1</span>: <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="integer">2</span>: <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="integer">3</span>: <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="integer">4</span>: <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>]
<span class="keyword">def</span> overrides = [<span class="integer">2</span>: <span class="string"><span class="delimiter">'</span><span class="content">z</span><span class="delimiter">'</span></span>, <span class="integer">5</span>: <span class="string"><span class="delimiter">'</span><span class="content">x</span><span class="delimiter">'</span></span>, <span class="integer">13</span>: <span class="string"><span class="delimiter">'</span><span class="content">x</span><span class="delimiter">'</span></span>]

<span class="keyword">def</span> result = <span class="keyword">new</span> <span class="predefined-type">LinkedHashMap</span>(defaults)
result.put(<span class="integer">15</span>, <span class="string"><span class="delimiter">'</span><span class="content">t</span><span class="delimiter">'</span></span>)
result[<span class="integer">17</span>] = <span class="string"><span class="delimiter">'</span><span class="content">u</span><span class="delimiter">'</span></span>
result.putAll(overrides)
<span class="keyword">assert</span> result == [<span class="integer">1</span>: <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="integer">2</span>: <span class="string"><span class="delimiter">'</span><span class="content">z</span><span class="delimiter">'</span></span>, <span class="integer">3</span>: <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>, <span class="integer">4</span>: <span class="string"><span class="delimiter">'</span><span class="content">d</span><span class="delimiter">'</span></span>, <span class="integer">5</span>: <span class="string"><span class="delimiter">'</span><span class="content">x</span><span class="delimiter">'</span></span>, <span class="integer">13</span>: <span class="string"><span class="delimiter">'</span><span class="content">x</span><span class="delimiter">'</span></span>, <span class="integer">15</span>: <span class="string"><span class="delimiter">'</span><span class="content">t</span><span class="delimiter">'</span></span>, <span class="integer">17</span>: <span class="string"><span class="delimiter">'</span><span class="content">u</span><span class="delimiter">'</span></span>]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_borrado_de_elementos_2">7.2.4. Borrado de elementos</h4>
<div class="paragraph">
<p>Se puede vaciar la coleccion con <strong>clear()</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> m = [<span class="integer">1</span>:<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="integer">2</span>:<span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>]
<span class="keyword">assert</span> m.get(<span class="integer">1</span>) == <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>
m.clear()
<span class="keyword">assert</span> m == [:]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_iterador_2">7.2.5. Iterador</h4>
<div class="paragraph">
<p>Para iterar por elemento y tambien por elemento y su posicion en el mapa</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// Iterar por elemento empleando la variable por defecto it que referencia a la tupla</span>
mapa.each { println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">$</span><span class="local-variable">it</span></span><span class="content">.key: </span><span class="inline"><span class="inline-delimiter">$</span><span class="local-variable">it</span></span><span class="content">.value</span><span class="delimiter">&quot;</span></span> }

<span class="comment">// Iterar indicando la variable que alberga la clave y la que alberga el valor</span>
mapa.each { key, value -&gt;
    println <span class="string"><span class="delimiter">&quot;</span><span class="content">Name: </span><span class="inline"><span class="inline-delimiter">$</span>key</span><span class="content"> Age: </span><span class="inline"><span class="inline-delimiter">$</span>value</span><span class="delimiter">&quot;</span></span>
}

<span class="comment">// Iterar por eleemnto y posicion</span>
mapa.eachWithIndex { entry, i -&gt;
    println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">$</span>i</span><span class="content"> - Name: </span><span class="inline"><span class="inline-delimiter">$</span>entry</span><span class="content">.key Age: </span><span class="inline"><span class="inline-delimiter">$</span>entry</span><span class="content">.value</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_map_collect_2">7.2.6. Map (Collect)</h4>
<div class="paragraph">
<p>Se puede realizar una transformacion del mapa en una coleccion, aplicando una expresion a los elementos</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> people.collect {<span class="local-variable">it</span>.value.age} == [<span class="integer">32</span>,<span class="integer">36</span>,<span class="integer">21</span>,<span class="integer">54</span>]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_operaciones_con_los_elementos_del_mapa">7.2.7. Operaciones con los elementos del mapa</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> people.intersect([
        <span class="integer">4</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Amy</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">54</span>, <span class="key">gender</span>:<span class="string"><span class="delimiter">'</span><span class="content">F</span><span class="delimiter">'</span></span>],
        <span class="integer">1</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Bob</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">32</span>, <span class="key">gender</span>: <span class="string"><span class="delimiter">'</span><span class="content">M</span><span class="delimiter">'</span></span>]]) == [
        <span class="integer">4</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Amy</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">54</span>, <span class="key">gender</span>:<span class="string"><span class="delimiter">'</span><span class="content">F</span><span class="delimiter">'</span></span>],
        <span class="integer">1</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Bob</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">32</span>, <span class="key">gender</span>: <span class="string"><span class="delimiter">'</span><span class="content">M</span><span class="delimiter">'</span></span>]]

<span class="keyword">assert</span> people.max {<span class="local-variable">it</span>.value.age}.value.age == <span class="integer">54</span>

<span class="keyword">assert</span> people.min {<span class="local-variable">it</span>.value.age}.value.age == <span class="integer">21</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_busquedas_2">7.2.8. Busquedas</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> people = [
    <span class="integer">1</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Bob</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">32</span>, <span class="key">gender</span>: <span class="string"><span class="delimiter">'</span><span class="content">M</span><span class="delimiter">'</span></span>],
    <span class="integer">2</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Johnny</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">36</span>, <span class="key">gender</span>: <span class="string"><span class="delimiter">'</span><span class="content">M</span><span class="delimiter">'</span></span>],
    <span class="integer">3</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Claire</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">21</span>, <span class="key">gender</span>: <span class="string"><span class="delimiter">'</span><span class="content">F</span><span class="delimiter">'</span></span>],
    <span class="integer">4</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Amy</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">54</span>, <span class="key">gender</span>:<span class="string"><span class="delimiter">'</span><span class="content">F</span><span class="delimiter">'</span></span>]
]

<span class="comment">//Busqueda de un elemento simple definiendo un predicado, retorna un Entry</span>
<span class="keyword">def</span> bob = people.find { <span class="local-variable">it</span>.value.name == <span class="string"><span class="delimiter">'</span><span class="content">Bob</span><span class="delimiter">'</span></span> }

<span class="comment">//Busqueda de todos los elementos que cumplan el predicado, retorna un listado de Entry</span>
<span class="keyword">def</span> females = people.findAll { <span class="local-variable">it</span>.value.gender == <span class="string"><span class="delimiter">'</span><span class="content">F</span><span class="delimiter">'</span></span> }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ordenacion_2">7.2.9. Ordenacion</h4>
<div class="paragraph">
<p>Al igual que las listas los mapas se pueden ordenar</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// Obtenemos true si todos los elementos cumplen el predicado</span>
<span class="keyword">assert</span> people.every { id, person -&gt;
    person.age &gt; <span class="integer">18</span>
}

<span class="comment">// Obtenemos true si alguno de los elementos cumple el predicado</span>
<span class="keyword">assert</span> people.any { id, person -&gt;
    person.age == <span class="integer">54</span>
}

<span class="keyword">assert</span> people.sort {
    <span class="local-variable">it</span>.value.name
} == [
        <span class="integer">4</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Amy</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">54</span>, <span class="key">gender</span>:<span class="string"><span class="delimiter">'</span><span class="content">F</span><span class="delimiter">'</span></span>],
        <span class="integer">1</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Bob</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">32</span>, <span class="key">gender</span>: <span class="string"><span class="delimiter">'</span><span class="content">M</span><span class="delimiter">'</span></span>],
        <span class="integer">3</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Claire</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">21</span>, <span class="key">gender</span>: <span class="string"><span class="delimiter">'</span><span class="content">F</span><span class="delimiter">'</span></span>],
        <span class="integer">2</span>: [<span class="key">name</span>:<span class="string"><span class="delimiter">'</span><span class="content">Johnny</span><span class="delimiter">'</span></span>, <span class="key">age</span>: <span class="integer">36</span>, <span class="key">gender</span>: <span class="string"><span class="delimiter">'</span><span class="content">M</span><span class="delimiter">'</span></span>]
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sql">8. SQL</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_preparacion_de_la_bd">8.1. Preparacion de la BD</h3>
<div class="paragraph">
<p>En los ejemplos se emplea un base de datos Derby, para levantar el servidor, se ha de ejecutar el comando</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">&gt; %DERBY_HOME%\bin\startNetworkServer.bat</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se dispone de un cliente de comandos <strong>ij</strong>, para emplearlo ejecutar</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">&gt; %DERBY_HOME%\bin\ij.bat</code></pre>
</div>
</div>
<div class="paragraph">
<p>Una vez dentro, se puede conectar a la BD con el comando</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">ij&gt; connect 'jdbc:derby://127.0.0.1:1527/PRUEBA_GROOVY;create=true';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mostrar los esquemas con</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">ij&gt; show schemas;</code></pre>
</div>
</div>
<div class="paragraph">
<p>En los siguientes ejemplo, se empleará el schema <strong>APP</strong></p>
</div>
<div class="paragraph">
<p>Mostrar las tablas de un schema</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">ij&gt; show tables in app;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mostrar las columnas de una tabla</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">ij&gt; describe personas;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ejecutar cualquier sonsulta SQL</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">ij&gt; select * from personas;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conexion">8.2. Conexion</h3>
<div class="paragraph">
<p>Se basa en el uso de de la clase <strong>groovy.sql.Sql</strong></p>
</div>
<div class="paragraph">
<p>Para conectarse a la base de datos habrá que dar los siguientes campos</p>
</div>
<div class="ulist">
<ul>
<li>
<p>URL</p>
</li>
<li>
<p>User</p>
</li>
<li>
<p>Password</p>
</li>
<li>
<p>DriverClassName</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> sql = Sql.newInstance(<span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:derby://127.0.0.1:1527/PRUEBA_GROOVY;create=true</span><span class="delimiter">&quot;</span></span>,
        <span class="predefined-constant">null</span>,<span class="comment">//Usuario de la BD</span>
        <span class="predefined-constant">null</span>,<span class="comment">//Password de la BD</span>
        <span class="string"><span class="delimiter">&quot;</span><span class="content">org.apache.derby.jdbc.ClientDriver</span><span class="delimiter">&quot;</span></span>)<span class="comment">//Driver de conexion</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Para terminar la conexion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">sql.close()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se puede emplear la funcion <strong>withInstance</strong> que permite delegar la gestion del cierre de la conexion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Sql.withInstance(url, user, password, driver) { sql -&gt;
  <span class="comment">// use 'sql' instance ...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tambien se tiene la opcion de obtener las conexiones a traves de un datasource</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> dataSource = <span class="keyword">new</span> JDBCDataSource(<span class="key">database</span>: <span class="string"><span class="delimiter">'</span><span class="content">jdbc:hsqldb:mem:yourDB</span><span class="delimiter">'</span></span>, <span class="key">user</span>: <span class="string"><span class="delimiter">'</span><span class="content">sa</span><span class="delimiter">'</span></span>, <span class="key">password</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> sql = <span class="keyword">new</span> Sql(dataSource)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>No se tiene la opcion de trabajar con <strong>withInstance</strong> y <strong>datasource</strong> juntos.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_crear_tablas">8.3. Crear Tablas</h3>
<div class="paragraph">
<p>Para lanzar cualquier sentencia que altere el estado de la base de datos, se dispone de <strong>execute()</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">sql.execute <span class="string"><span class="delimiter">'''</span><span class="content">
  CREATE TABLE Author (
    id          INTEGER GENERATED BY DEFAULT AS IDENTITY,
    firstname   VARCHAR(64),
    lastname    VARCHAR(64)
  );
</span><span class="delimiter">'''</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inserciones">8.4. Inserciones</h3>
<div class="paragraph">
<p>Con el propio método <strong>execute()</strong> o son el mas especializado <strong>executeInsert()</strong>, se pueden añadir registros a la BD.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">sql.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Dierk', 'Koenig')</span><span class="delimiter">&quot;</span></span>

<span class="comment">//Parametrizado, se pueden definir ? tanto en execute, como en executeInsert</span>
<span class="keyword">def</span> insertSql = <span class="string"><span class="delimiter">'</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES (?,?)</span><span class="delimiter">'</span></span>
<span class="keyword">def</span> params = [<span class="string"><span class="delimiter">'</span><span class="content">Jon</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Skeet</span><span class="delimiter">'</span></span>]
<span class="comment">//executeInsert retorna las claves generadas</span>
<span class="keyword">def</span> keys = sql.executeInsert insertSql, params
<span class="keyword">assert</span> keys[<span class="integer">0</span>] == [<span class="integer">1</span>]

<span class="comment">//Aunque lo mas facil es emplear GString</span>
<span class="keyword">def</span> first = <span class="string"><span class="delimiter">'</span><span class="content">Guillaume</span><span class="delimiter">'</span></span>
<span class="keyword">def</span> last = <span class="string"><span class="delimiter">'</span><span class="content">Laforge</span><span class="delimiter">'</span></span>
<span class="keyword">def</span> myKeyNames = [<span class="string"><span class="delimiter">'</span><span class="content">ID</span><span class="delimiter">'</span></span>]
<span class="keyword">def</span> myKeys = sql.executeInsert <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
  INSERT INTO Author (firstname, lastname)
  VALUES (</span><span class="inline"><span class="inline-delimiter">${</span>first<span class="inline-delimiter">}</span></span><span class="content">, </span><span class="inline"><span class="inline-delimiter">${</span>last<span class="inline-delimiter">}</span></span><span class="content">)
</span><span class="delimiter">&quot;&quot;&quot;</span></span>, myKeyNames
<span class="keyword">assert</span> myKeys[<span class="integer">0</span>] == [<span class="key">ID</span>: <span class="integer">2</span>]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_actualizaciones">8.5. Actualizaciones</h3>
<div class="paragraph">
<p>De nuevo <strong>execute()</strong> y el método mas concreto <strong>executeUpdate()</strong>, que retorna el numero de registros afectados por la actualizacion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">sql.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (lastname) VALUES ('Thorvaldsson')</span><span class="delimiter">&quot;</span></span>
sql.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">UPDATE Author SET firstname='Erik' where lastname='Thorvaldsson'</span><span class="delimiter">&quot;</span></span>

<span class="keyword">def</span> updateSql = <span class="string"><span class="delimiter">&quot;</span><span class="content">UPDATE Author SET lastname='Pragt' where lastname='Thorvaldsson'</span><span class="delimiter">&quot;</span></span>
<span class="keyword">def</span> updateCount = sql.executeUpdate updateSql
<span class="keyword">assert</span> updateCount == <span class="integer">1</span>

<span class="keyword">def</span> row = sql.firstRow <span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT * FROM Author where firstname = 'Erik'</span><span class="delimiter">&quot;</span></span>
<span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>row.firstname<span class="inline-delimiter">}</span></span><span class="content"> </span><span class="inline"><span class="inline-delimiter">${</span>row.lastname<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> == <span class="string"><span class="delimiter">'</span><span class="content">Erik Pragt</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_borrados">8.6. Borrados</h3>
<div class="paragraph">
<p>De nuevo <strong>execute()</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> sql.firstRow(<span class="string"><span class="delimiter">'</span><span class="content">SELECT COUNT(*) as num FROM Author</span><span class="delimiter">'</span></span>).num == <span class="integer">3</span>
sql.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">DELETE FROM Author WHERE lastname = 'Skeet'</span><span class="delimiter">&quot;</span></span>
<span class="keyword">assert</span> sql.firstRow(<span class="string"><span class="delimiter">'</span><span class="content">SELECT COUNT(*) as num FROM Author</span><span class="delimiter">'</span></span>).num == <span class="integer">2</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_consultas">8.7. Consultas</h3>
<div class="paragraph">
<p>Se proporciona el método <strong>query(){}</strong>, que acepta por un lado la consulta y por otro la closure que recibirá el <strong>resultSet</strong> con los resultados de la consulta.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> expected = [<span class="string"><span class="delimiter">'</span><span class="content">Dierk Koenig</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Jon Skeet</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Guillaume Laforge</span><span class="delimiter">'</span></span>]

<span class="keyword">def</span> rowNum = <span class="integer">0</span>
sql.query(<span class="string"><span class="delimiter">'</span><span class="content">SELECT firstname, lastname FROM Author</span><span class="delimiter">'</span></span>) { resultSet -&gt;
  <span class="keyword">while</span> (resultSet.next()) {
    <span class="keyword">def</span> first = resultSet.getString(<span class="integer">1</span>)
    <span class="keyword">def</span> last = resultSet.getString(<span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>)
    <span class="keyword">assert</span> expected[rowNum++] == <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">$</span>first</span><span class="content"> </span><span class="inline"><span class="inline-delimiter">$</span>last</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tambien se proporciona <strong>eachRow(){}</strong>, que recibiendo un String que representa la consulta SQL y una Closure, permite aplicar a cada registro obtenido la logica de la Closure, LA Closure recibe por parametro abstraiendo el <strong>resultSet</strong> en mapas de claves y valores</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">rowNum = <span class="integer">0</span>
sql.eachRow(<span class="string"><span class="delimiter">'</span><span class="content">SELECT firstname, lastname FROM Author</span><span class="delimiter">'</span></span>) { row -&gt;
  <span class="keyword">def</span> first = row[<span class="integer">0</span>]
  <span class="keyword">def</span> last = row.lastname
  <span class="keyword">assert</span> expected[rowNum++] == <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">$</span>first</span><span class="content"> </span><span class="inline"><span class="inline-delimiter">$</span>last</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y <strong>rows()</strong> que permite obtener un <strong>List</strong> donde cada fila será un <strong>Map</strong>, abstraiendo así del objeto <strong>resultSet</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">List</span> authors = sql.rows(<span class="string"><span class="delimiter">'</span><span class="content">SELECT firstname, lastname FROM Author</span><span class="delimiter">'</span></span>)
<span class="keyword">assert</span> authors.size() == <span class="integer">3</span>
<span class="keyword">assert</span> authors.collect { <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">$</span><span class="local-variable">it</span></span><span class="content">.FIRSTNAME </span><span class="inline"><span class="inline-delimiter">${</span><span class="local-variable">it</span>[-<span class="integer">1</span>]<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> } == expected</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_transacciones">8.8. Transacciones</h3>
<div class="paragraph">
<p>Se pueden ejecutar transacciones de forma facil con la closure <strong>withTransaction{}</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">assert</span> sql.firstRow(<span class="string"><span class="delimiter">'</span><span class="content">SELECT COUNT(*) as num FROM Author</span><span class="delimiter">'</span></span>).num == <span class="integer">0</span>
sql.withTransaction {
  sql.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Dierk', 'Koenig')</span><span class="delimiter">&quot;</span></span>
  sql.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Jon', 'Skeet')</span><span class="delimiter">&quot;</span></span>
}
<span class="keyword">assert</span> sql.firstRow(<span class="string"><span class="delimiter">'</span><span class="content">SELECT COUNT(*) as num FROM Author</span><span class="delimiter">'</span></span>).num == <span class="integer">2</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_batch">8.9. Batch</h3>
<div class="paragraph">
<p>Permite la ejecucuion de bloques de sentencias con <strong>withBatch(){}</strong>, donde se le indicará cuantas sentencias se quieren que formen un bloque y todas las sentencias a ejecutar.</p>
</div>
<div class="listingblock">
<div class="title">Ejecucion de 7 sentencias en bloques de 3</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">sql.withBatch(<span class="integer">3</span>) { stmt -&gt;
  stmt.addBatch <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Dierk', 'Koenig')</span><span class="delimiter">&quot;</span></span>
  stmt.addBatch <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Paul', 'King')</span><span class="delimiter">&quot;</span></span>
  stmt.addBatch <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Guillaume', 'Laforge')</span><span class="delimiter">&quot;</span></span>
  stmt.addBatch <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Hamlet', 'D''Arcy')</span><span class="delimiter">&quot;</span></span>
  stmt.addBatch <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Cedric', 'Champeau')</span><span class="delimiter">&quot;</span></span>
  stmt.addBatch <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Erik', 'Pragt')</span><span class="delimiter">&quot;</span></span>
  stmt.addBatch <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES ('Jon', 'Skeet')</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En una segunda implmentacion, permite tambien recibir la consulta SQL parametrizada, teniendo que definir en los <strong>Batch</strong> los parametros para cada ejecucion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">ef qry = <span class="string"><span class="delimiter">'</span><span class="content">INSERT INTO Author (firstname, lastname) VALUES (?,?)</span><span class="delimiter">'</span></span>
sql.withBatch(<span class="integer">3</span>, qry) { ps -&gt;
  ps.addBatch(<span class="string"><span class="delimiter">'</span><span class="content">Dierk</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Koenig</span><span class="delimiter">'</span></span>)
  ps.addBatch(<span class="string"><span class="delimiter">'</span><span class="content">Paul</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">King</span><span class="delimiter">'</span></span>)
  ps.addBatch(<span class="string"><span class="delimiter">'</span><span class="content">Guillaume</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Laforge</span><span class="delimiter">'</span></span>)
  ps.addBatch(<span class="string"><span class="delimiter">'</span><span class="content">Hamlet</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">D'Arcy</span><span class="delimiter">&quot;</span></span>)
  ps.addBatch(<span class="string"><span class="delimiter">'</span><span class="content">Cedric</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Champeau</span><span class="delimiter">'</span></span>)
  ps.addBatch(<span class="string"><span class="delimiter">'</span><span class="content">Erik</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Pragt</span><span class="delimiter">'</span></span>)
  ps.addBatch(<span class="string"><span class="delimiter">'</span><span class="content">Jon</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Skeet</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_paginacion">8.10. Paginacion</h3>
<div class="paragraph">
<p>El método <strong>rows(sql, offset, maxrows)</strong> esta sobrecargado, siendo una de sus implementaciones la que recibe la consulta, el elemento por donde empezar a retornar y el numero de elementos solicitados</p>
</div>
<div class="listingblock">
<div class="title">Siguiendo con el anterior ejemplo, donde se habian insertado 7 registros, se obtienen distintos bloques por paginacion</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> qry = <span class="string"><span class="delimiter">'</span><span class="content">SELECT * FROM Author</span><span class="delimiter">'</span></span>
<span class="comment">//Empezando por el primer elemento, se retornan 3, es decir los 3 primeros</span>
<span class="keyword">assert</span> sql.rows(qry, <span class="integer">1</span>, <span class="integer">3</span>)*.firstname == [<span class="string"><span class="delimiter">'</span><span class="content">Dierk</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Paul</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Guillaume</span><span class="delimiter">'</span></span>]
<span class="comment">//Empezando por el cuarto elemento, se retornan 3, es decir los 3 segundos</span>
<span class="keyword">assert</span> sql.rows(qry, <span class="integer">4</span>, <span class="integer">3</span>)*.firstname == [<span class="string"><span class="delimiter">'</span><span class="content">Hamlet</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Cedric</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Erik</span><span class="delimiter">'</span></span>]
<span class="comment">//Empezando por el septimo elemento, se retornan 3, es decir ultimo</span>
<span class="keyword">assert</span> sql.rows(qry, <span class="integer">7</span>, <span class="integer">3</span>)*.firstname == [<span class="string"><span class="delimiter">'</span><span class="content">Jon</span><span class="delimiter">'</span></span>]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_procedimientos_almacenados">8.11. Procedimientos Almacenados</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dataset">8.12. DataSet</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ficheros">9. Ficheros</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_api_groovy">10. Api Groovy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gstrings">10.1. GStrings</h3>
<div class="paragraph">
<p>Tambien conocidos como string interpolados, permiten definir <strong>Strings</strong> empleando variables Groovy.</p>
</div>
<div class="paragraph">
<p>Se han de definir entre comillas dobles.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println <span class="string"><span class="delimiter">&quot;</span><span class="content">El precio de la acción </span><span class="inline"><span class="inline-delimiter">$</span>accion</span><span class="content"> a día </span><span class="inline"><span class="inline-delimiter">$</span>fecha</span><span class="content"> es </span><span class="inline"><span class="inline-delimiter">$</span>valor</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_expresiones_regulares">10.2. Expresiones regulares</h3>
<div class="paragraph">
<p>Basta con declarar la expresión de búsqueda entre barras diagonales, como en Perl, y usar uno de los tres operadores disponibles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>~</strong>: patrón (prduce un java.util.regex.Pattern). Para definir un patron se pueden emplear</p>
<div class="ulist">
<ul>
<li>
<p>Strings</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> patron = ~<span class="regexp"><span class="delimiter">/</span><span class="content">ua</span><span class="delimiter">/</span></span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Expresiones de tipo <strong>dollar-slashy</strong>, es decir expresiones rodeadas por <strong>$/</strong> y <strong>/$</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> p = ~<span class="error">$</span><span class="regexp"><span class="delimiter">/</span><span class="content">aqui se puede escribir cualquier cosa incluso simbolos de </span><span class="delimiter">/</span></span> y <span class="error">$</span> /<span class="error">$</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>GString</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> nombre = <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>
<span class="keyword">def</span> pattern = ~<span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>nombre<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>=~</strong>: búsqueda de ocurrencias (produce un java.util.regex.Matcher)</p>
</li>
<li>
<p><strong>==~</strong>: coincidencias exactas (produce un Boolean)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">java.util.regex.Matcher</span>

<span class="keyword">def</span> patron = ~<span class="regexp"><span class="delimiter">/</span><span class="content">ua</span><span class="delimiter">/</span></span>

texto = <span class="string"><span class="delimiter">&quot;</span><span class="content">Groovy es un lenguaje dinámico</span><span class="delimiter">&quot;</span></span>

<span class="comment">//Se cumple, ya que el etexto contiene ua</span>
<span class="keyword">assert</span> texto =~ <span class="regexp"><span class="delimiter">/</span><span class="content">ua</span><span class="delimiter">/</span></span>

<span class="comment">//Se cumple, ya que es el mismo texto</span>
<span class="keyword">assert</span> texto ==~ <span class="regexp"><span class="delimiter">/</span><span class="content">Groovy es un lenguaje dinámico</span><span class="delimiter">/</span></span>

<span class="comment">//No se cumple</span>
<span class="comment">//assert texto ==~ /ua/</span>

<span class="comment">//No se cumple</span>
<span class="comment">//assert texto =~ /ur/</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json">10.3. Json</h3>
<div class="paragraph">
<p>El empleo de Json es tambien muy sencillo, ya que se proporciona un API para procesar objetos Json.</p>
</div>
<div class="paragraph">
<p>Para generar un json como el siguiente</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">cliente</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">nombre</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">apellido</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Herrero</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">direccion</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">ciudad</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Valladolid</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">pais</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">España</span><span class="delimiter">&quot;</span></span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">facturas</span><span class="delimiter">&quot;</span></span>: [
      <span class="integer">1234</span>,
      <span class="integer">1235</span>,
      <span class="integer">1236</span>
    ]
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>en Groovy unicamente debemos hacer</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">groovy.json.JsonBuilder</span>

<span class="keyword">def</span> builder = <span class="keyword">new</span> JsonBuilder()
builder.
    cliente {
        nombre <span class="string"><span class="delimiter">'</span><span class="content">Victor</span><span class="delimiter">'</span></span>
        apellido <span class="string"><span class="delimiter">'</span><span class="content">Herrero</span><span class="delimiter">'</span></span>
        direccion(
            <span class="key">ciudad</span>: <span class="string"><span class="delimiter">'</span><span class="content">Valladolid</span><span class="delimiter">'</span></span>,
            <span class="key">pais</span>: <span class="string"><span class="delimiter">'</span><span class="content">España</span><span class="delimiter">'</span></span>
        )
        facturas(
            <span class="integer">1234</span>,
            <span class="integer">1235</span>,
            <span class="integer">1236</span>
        )
    }

println builder.toPrettyString()</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ast">11. AST</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Con la anotacion <strong>@Canonical</strong>, se obtienen implementaciones para equals, hascode y tostring, ademas de constructores con los atributos.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-10-16 05:59:22 UTC
</div>
</div>
</body>
</html>